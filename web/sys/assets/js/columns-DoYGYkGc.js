import{s as H}from"./pinia-DE-bJcb2.js";import{a4 as G,u as w,a5 as J,a as K}from"./index-Cf93PWEY.js";import{_ as Q}from"./aside.vue_vue_type_script_setup_true_lang-_7A9-Z5U.js";import{_ as S,a as W}from"./main.vue_vue_type_script_setup_true_lang-BJbZ2yLL.js";import{u as X,b as ee,o as te}from"./vue-router-CWOL7ATe.js";import{d as F,b as T,Z as se,_ as oe,e as ne,j as ie,Y as le,ai as C,o as u,c as _,U as l,O as g,a as d,F as re,a8 as ae,u as a,I as p,T as D,i as ue,n as me,k as ce,M as $,R as N}from"./@vue-CIdpUgdv.js";import"./vue-demi-Dq6ymT-8.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-jSNvwxF2.js";import"./nprogress-ekFNJb3B.js";import"./@intlify-BrbEMGpa.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./element-plus-BcbsnzDt.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";import"./screenfull-DmVOzVZz.js";import"./sysNotice-C7br5zb9.js";import"./sysNoticeRead-MRZGqRU_.js";import"./index-CGGO-gYc.js";import"./logo-mini-DKVW2eaB.js";import"./sortablejs-C0-Qcoum.js";import"./parent-CU-pSH9j.js";const de={class:"layout-columns-aside"},pe=["onClick","onMouseenter","title"],fe={class:"columns-vertical-title font12"},he=["href"],_e={class:"columns-vertical-title font12"},Ce=F({name:"layoutColumnsAside",__name:"columnsAside",setup(P){const v=T([]),y=T(),{proxy:i}=ue(),f=G(),L=w(),{routesList:b,isColumnsMenuHover:A,isColumnsNavHover:I}=H(f),{themeConfig:m}=H(L),M=X(),x=ee(),o=se({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),{columnsAsideList:j,liIndex:U,liHoverIndex:V}=oe(o),R=e=>{o.liIndex=e,y.value.style.top=`${v.value[e].offsetTop+o.difference}px`},z=(e,t)=>{R(t);let{path:n,redirect:r}=e;r?x.push(r):x.push(n)},E=(e,t)=>{if(!m.value.isColumnsMenuHoverPreload)return!1;let{path:n}=e;o.liOldPath=n,o.liOldIndex=t,o.liHoverIndex=t,i.mittBus.emit("setSendColumnsChildren",h(n)),f.setColumnsMenuHover(!1),f.setColumnsNavHover(!0)},Y=async()=>{await f.setColumnsNavHover(!1),setTimeout(()=>{!A&&!I&&i.mittBus.emit("restoreDefault")},100)},B=e=>{me(()=>{R(e)})},Z=()=>{o.columnsAsideList=O(b.value);const e=h(M.path);if(Object.keys(e).length<=0)return!1;B(e.item[0].k),i.mittBus.emit("setSendColumnsChildren",e)},h=e=>{let t={};return o.columnsAsideList.some((n,r)=>(n.children&&n.children.some(s=>{if(s.path===e)return n.k=r,t.item=[{...n}],t.children=[{...n}],n.children&&(t.children=n.children),!0}),!1)),t},O=e=>e.filter(t=>!t.meta.isHide).map(t=>(t=Object.assign({},t),t.children&&(t.children=O(t.children)),t)),q=e=>{const t=o.columnsAsideList.some(n=>(n.children&&n.children.some(r=>{if(r.path===e)return!0}),!1));if(!t)return!1;setTimeout(()=>{B(t.k)},0)};return ne(J.state,e=>{if(e.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?o.difference=3:o.difference=0,!e.routesList.isColumnsMenuHover&&!e.routesList.isColumnsNavHover)o.liHoverIndex=null,i.mittBus.emit("setSendColumnsChildren",h(M.path));else{if(o.liHoverIndex=o.liOldIndex,!o.liOldPath)return!1;i.mittBus.emit("setSendColumnsChildren",h(o.liOldPath))}},{deep:!0}),ie(()=>{Z(),i.mittBus.on("restoreDefault",()=>{o.liOldIndex=null,o.liOldPath=null})}),le(()=>{i.mittBus.off("restoreDefault",()=>{})}),te(e=>{q(e.path),i.mittBus.emit("setSendColumnsChildren",h(e.path))}),(e,t)=>{const n=C("SvgIcon"),r=C("el-scrollbar");return u(),_("div",de,[l(r,null,{default:g(()=>[d("ul",{onMouseleave:t[0]||(t[0]=s=>Y())},[(u(!0),_(re,null,ae(a(j),(s,c)=>(u(),_("li",{key:c,onClick:k=>z(s,c),onMouseenter:k=>E(s,c),ref_for:!0,ref:k=>{k&&(v.value[c]=k)},class:p({"layout-columns-active":a(U)===c,"layout-columns-hover":a(V)===c}),title:e.$t(s.meta.title)},[!s.meta.isLink||s.meta.isLink&&s.meta.isIframe?(u(),_("div",{key:0,class:p(a(m).columnsAsideLayout)},[l(n,{name:s.meta.icon},null,8,["name"]),d("div",fe,D(e.$t(s.meta.title)&&e.$t(s.meta.title).length>=4?e.$t(s.meta.title).substr(0,a(m).columnsAsideLayout==="columns-vertical"?4:3):e.$t(s.meta.title)),1)],2)):(u(),_("div",{key:1,class:p(a(m).columnsAsideLayout)},[d("a",{href:s.meta.isLink,target:"_blank"},[l(n,{name:s.meta.icon},null,8,["name"]),d("div",_e,D(e.$t(s.meta.title)&&e.$t(s.meta.title).length>=4?e.$t(s.meta.title).substr(0,a(m).columnsAsideLayout==="columns-vertical"?4:3):e.$t(s.meta.title)),1)],8,he)],2))],42,pe))),128)),d("div",{ref_key:"columnsAsideActiveRef",ref:y,class:p(a(m).columnsAsideStyle)},null,2)],32)]),_:1})])}}}),ve=K(Ce,[["__scopeId","data-v-c6f24550"]]),ye={class:"layout-columns-warp"},vt=F({name:"layoutColumns",__name:"columns",setup(P){const v=w(),{themeConfig:y}=H(v),i=ce(()=>y.value.isFixedHeader);return(f,L)=>{const b=C("el-scrollbar"),A=C("el-container"),I=C("el-backtop");return u(),$(A,{class:"layout-container"},{default:g(()=>[l(ve),d("div",ye,[l(Q),l(A,{class:p(["flex-center layout-backtop",{"layout-backtop":!i.value}])},{default:g(()=>[i.value?(u(),$(S,{key:0})):N("",!0),l(b,{class:p({"layout-backtop":i.value})},{default:g(()=>[i.value?N("",!0):(u(),$(S,{key:0})),l(W)]),_:1},8,["class"])]),_:1},8,["class"])]),l(I,{target:".layout-backtop .el-scrollbar__wrap"})]),_:1})}}});export{vt as default};
