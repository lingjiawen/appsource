import{g as N,a as q,u as H}from"./signRedeemCode-B5rpnkPq.js";import{a as R}from"./element-plus-BcbsnzDt.js";import{d as Z,b as U,Z as j,_ as z,o as r,c as s,U as t,O as o,u as a,D as G,ai as u,aq as J,P as K,S as m,T as f,a as Q,F as _,a8 as g,M as T}from"./@vue-CIdpUgdv.js";import{a as X}from"./index-Cf93PWEY.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@element-plus-jSNvwxF2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./@intlify-BrbEMGpa.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";const $={class:"install-signRedeemCode-edit"},h={class:"dialog-footer"},ee=Z({name:"ApiV1InstallSignRedeemCodeEdit",__name:"edit",props:{accountTypeOptions:{type:Array,default:()=>[]},warrantyTypeOptions:{type:Array,default:()=>[]},deviceTypeOptions:{type:Array,default:()=>[]},poolOptions:{type:Array,default:()=>[]},apiPlatformOptions:{type:Array,default:()=>[]},apiWarrantyTypeOptions:{type:Array,default:()=>[]}},emits:["signRedeemCodeList"],setup(v,{expose:O,emit:S}){const w=S,A=U(null);U();const n=j({loading:!1,isShowDialog:!1,formData:{id:void 0,code:void 0,udid:void 0,certId:void 0,accountType:void 0,warrantyType:void 0,deviceType:void 0,pool:void 0,apiPlatform:void 0,note:void 0,apiWarrantyType:void 0,banned:!1,active:!1,activeAt:void 0,createdBy:void 0,updatedBy:void 0,createdAt:void 0,updatedAt:void 0,deletedAt:void 0},rules:{id:[{required:!0,message:"ID不能为空",trigger:"blur"}]}}),{loading:x,isShowDialog:b,formData:d,rules:B}=z(n),P=y=>{E(),y&&N(y.id).then(l=>{const i=l.data;i.accountType=""+i.accountType,i.warrantyType=""+i.warrantyType,i.deviceType=""+i.deviceType,i.pool=""+i.pool,i.apiPlatform=""+i.apiPlatform,i.apiWarrantyType=""+i.apiWarrantyType,i.banned=!!i.banned,i.active=!!i.active,n.formData=i}),n.isShowDialog=!0},D=()=>{n.isShowDialog=!1};O({openDialog:P});const W=()=>{D()},I=()=>{const y=a(A);y&&y.validate(l=>{l&&(n.loading=!0,!n.formData.id||n.formData.id===0?q(n.formData).then(()=>{R.success("添加成功"),D(),w("signRedeemCodeList")}).finally(()=>{n.loading=!1}):H(n.formData).then(()=>{R.success("修改成功"),D(),w("signRedeemCodeList")}).finally(()=>{n.loading=!1}))})},E=()=>{n.formData={id:void 0,code:void 0,udid:void 0,certId:void 0,accountType:"",warrantyType:"",deviceType:"",pool:"",apiPlatform:"",note:void 0,apiWarrantyType:"",banned:!1,active:!1,activeAt:void 0,createdBy:void 0,updatedBy:void 0,createdAt:void 0,updatedAt:void 0,deletedAt:void 0}};return(y,l)=>{const i=u("el-input"),p=u("el-form-item"),c=u("el-radio"),V=u("el-radio-group"),C=u("el-switch"),L=u("el-date-picker"),M=u("el-form"),k=u("el-button"),Y=u("el-dialog"),F=J("drag");return r(),s("div",$,[t(Y,{modelValue:a(b),"onUpdate:modelValue":l[13]||(l[13]=e=>G(b)?b.value=e:null),width:"800px","close-on-click-modal":!1,"destroy-on-close":!0},{header:o(()=>[K((r(),s("div",null,[m(f((!a(d).id||a(d).id==0?"添加":"修改")+"签名卡密"),1)])),[[F,[".install-signRedeemCode-edit .el-dialog",".install-signRedeemCode-edit .el-dialog__header"]]])]),footer:o(()=>[Q("div",h,[t(k,{type:"primary",onClick:I,disabled:a(x)},{default:o(()=>[m("确 定")]),_:1},8,["disabled"]),t(k,{onClick:W},{default:o(()=>[m("取 消")]),_:1})])]),default:o(()=>[t(M,{ref_key:"formRef",ref:A,model:a(d),rules:a(B),"label-width":"120px"},{default:o(()=>[t(p,{label:"兑换码",prop:"code"},{default:o(()=>[t(i,{modelValue:a(d).code,"onUpdate:modelValue":l[0]||(l[0]=e=>a(d).code=e),placeholder:"请输入兑换码"},null,8,["modelValue"])]),_:1}),t(p,{label:"设备码",prop:"udid"},{default:o(()=>[t(i,{modelValue:a(d).udid,"onUpdate:modelValue":l[1]||(l[1]=e=>a(d).udid=e),placeholder:"请输入设备码"},null,8,["modelValue"])]),_:1}),t(p,{label:"证书标识",prop:"certId"},{default:o(()=>[t(i,{modelValue:a(d).certId,"onUpdate:modelValue":l[2]||(l[2]=e=>a(d).certId=e),placeholder:"请输入证书标识"},null,8,["modelValue"])]),_:1}),t(p,{label:"时效类型",prop:"accountType"},{default:o(()=>[t(V,{modelValue:a(d).accountType,"onUpdate:modelValue":l[3]||(l[3]=e=>a(d).accountType=e)},{default:o(()=>[(r(!0),s(_,null,g(v.accountTypeOptions,e=>(r(),T(c,{key:e.value,value:e.value},{default:o(()=>[m(f(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"售后类型",prop:"warrantyType"},{default:o(()=>[t(V,{modelValue:a(d).warrantyType,"onUpdate:modelValue":l[4]||(l[4]=e=>a(d).warrantyType=e)},{default:o(()=>[(r(!0),s(_,null,g(v.warrantyTypeOptions,e=>(r(),T(c,{key:e.value,value:e.value},{default:o(()=>[m(f(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"设备类型",prop:"deviceType"},{default:o(()=>[t(V,{modelValue:a(d).deviceType,"onUpdate:modelValue":l[5]||(l[5]=e=>a(d).deviceType=e)},{default:o(()=>[(r(!0),s(_,null,g(v.deviceTypeOptions,e=>(r(),T(c,{key:e.value,value:e.value},{default:o(()=>[m(f(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"出书方式",prop:"pool"},{default:o(()=>[t(V,{modelValue:a(d).pool,"onUpdate:modelValue":l[6]||(l[6]=e=>a(d).pool=e)},{default:o(()=>[(r(!0),s(_,null,g(v.poolOptions,e=>(r(),T(c,{key:e.value,value:e.value},{default:o(()=>[m(f(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"对接平台",prop:"apiPlatform"},{default:o(()=>[t(V,{modelValue:a(d).apiPlatform,"onUpdate:modelValue":l[7]||(l[7]=e=>a(d).apiPlatform=e)},{default:o(()=>[(r(!0),s(_,null,g(v.apiPlatformOptions,e=>(r(),T(c,{key:e.value,value:e.value},{default:o(()=>[m(f(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"备注",prop:"note"},{default:o(()=>[t(i,{modelValue:a(d).note,"onUpdate:modelValue":l[8]||(l[8]=e=>a(d).note=e),type:"textarea",placeholder:"请输入备注"},null,8,["modelValue"])]),_:1}),t(p,{label:"对接售后类型",prop:"apiWarrantyType"},{default:o(()=>[t(V,{modelValue:a(d).apiWarrantyType,"onUpdate:modelValue":l[9]||(l[9]=e=>a(d).apiWarrantyType=e)},{default:o(()=>[(r(!0),s(_,null,g(v.apiWarrantyTypeOptions,e=>(r(),T(c,{key:e.value,value:e.value},{default:o(()=>[m(f(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"禁用",prop:"banned"},{default:o(()=>[t(C,{modelValue:a(d).banned,"onUpdate:modelValue":l[10]||(l[10]=e=>a(d).banned=e),class:"ml-2"},null,8,["modelValue"])]),_:1}),t(p,{label:"激活",prop:"active"},{default:o(()=>[t(C,{modelValue:a(d).active,"onUpdate:modelValue":l[11]||(l[11]=e=>a(d).active=e),class:"ml-2"},null,8,["modelValue"])]),_:1}),t(p,{label:"激活时间",prop:"activeAt"},{default:o(()=>[t(L,{clearable:"",style:{width:"200px"},modelValue:a(d).activeAt,"onUpdate:modelValue":l[12]||(l[12]=e=>a(d).activeAt=e),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"选择激活时间"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),je=X(ee,[["__scopeId","data-v-d3056280"]]);export{je as default};
