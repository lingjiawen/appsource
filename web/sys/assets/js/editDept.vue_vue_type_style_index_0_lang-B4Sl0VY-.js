import{s as i}from"./index-Cf93PWEY.js";import{s as M}from"./index-CbMIc7j8.js";import{a as D}from"./element-plus-BcbsnzDt.js";import{d as O,b as P,Z as W,_ as Z,o as v,c as N,U as e,O as t,u as l,D as A,ai as n,i as G,a as y,S as I,T as g,R as H}from"./@vue-CIdpUgdv.js";function J(m){return i({url:"/api/v1/system/dept/list",method:"get",params:m})}function K(m){return i({url:"/api/v1/system/dept/add",method:"post",data:m})}function Q(m){return i({url:"/api/v1/system/dept/edit",method:"put",data:m})}function se(m){return i({url:"/api/v1/system/dept/delete",method:"delete",data:{id:m}})}const X={class:"system-edit-dept-container"},Y={key:0},$={class:"dialog-footer"},de=O({name:"systemEditDept",__name:"editDept",emits:["deptList"],setup(m,{expose:U,emit:w}){const V=w,{proxy:F}=G(),x=P(null),d=W({isShowDialog:!1,ruleForm:{deptId:0,parentId:0,deptName:"",orderNum:0,leader:[],phone:"",email:"",status:1},deptData:[],rules:{deptName:[{required:!0,message:"部门名称不能为空",trigger:"blur"}]}}),{isShowDialog:c,ruleForm:a,deptData:C,rules:S}=Z(d);U({openDialog:r=>{R(),J().then(o=>{d.deptData=F.handleTree(o.data.deptList??[],"deptId","parentId","children",!0)}),r&&typeof r=="object"?d.ruleForm=r:r&&(d.ruleForm.parentId=r),d.isShowDialog=!0}});const f=()=>{d.isShowDialog=!1},k=()=>{f()},L=()=>{const r=l(x);r&&r.validate(o=>{o&&(d.ruleForm.deptId===0?K(d.ruleForm).then(()=>{D.success("角色添加成功"),f(),V("deptList")}):Q(d.ruleForm).then(()=>{D.success("角色修改成功"),f(),V("deptList")}))})},R=()=>{d.ruleForm={deptId:0,parentId:0,deptName:"",orderNum:0,leader:[],phone:"",email:"",status:1}};return(r,o)=>{const z=n("el-cascader"),u=n("el-form-item"),p=n("el-col"),_=n("el-input"),B=n("el-input-number"),E=n("el-switch"),T=n("el-row"),j=n("el-form"),b=n("el-button"),q=n("el-dialog");return v(),N("div",X,[e(q,{title:(l(a).deptId!==0?"修改":"添加")+"部门",modelValue:l(c),"onUpdate:modelValue":o[7]||(o[7]=s=>A(c)?c.value=s:null),width:"769px"},{footer:t(()=>[y("span",$,[e(b,{onClick:k,size:"default"},{default:t(()=>[I("取 消")]),_:1}),e(b,{type:"primary",onClick:L,size:"default"},{default:t(()=>[I(g(l(a).deptId!==0?"修 改":"添 加"),1)]),_:1})])]),default:t(()=>[e(j,{ref_key:"formRef",ref:x,model:l(a),rules:l(S),size:"default","label-width":"90px"},{default:t(()=>[e(T,{gutter:35},{default:t(()=>[e(p,{xs:24,sm:24,md:24,lg:24,xl:24},{default:t(()=>[e(u,{label:"上级部门"},{default:t(()=>[e(z,{options:l(C),props:{checkStrictly:!0,emitPath:!1,value:"deptId",label:"deptName"},placeholder:"请选择部门",clearable:"",class:"w100",modelValue:l(a).parentId,"onUpdate:modelValue":o[0]||(o[0]=s=>l(a).parentId=s)},{default:t(({node:s,data:h})=>[y("span",null,g(h.deptName),1),s.isLeaf?H("",!0):(v(),N("span",Y," ("+g(h.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[e(u,{label:"部门名称",prop:"deptName"},{default:t(()=>[e(_,{modelValue:l(a).deptName,"onUpdate:modelValue":o[1]||(o[1]=s=>l(a).deptName=s),placeholder:"请输入部门名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[e(u,{label:"负责人"},{default:t(()=>[e(M,{modelValue:l(a).leader,"onUpdate:modelValue":o[2]||(o[2]=s=>l(a).leader=s)},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[e(u,{label:"手机号"},{default:t(()=>[e(_,{modelValue:l(a).phone,"onUpdate:modelValue":o[3]||(o[3]=s=>l(a).phone=s),placeholder:"请输入手机号",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[e(u,{label:"邮箱"},{default:t(()=>[e(_,{modelValue:l(a).email,"onUpdate:modelValue":o[4]||(o[4]=s=>l(a).email=s),placeholder:"请输入",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[e(u,{label:"排序"},{default:t(()=>[e(B,{modelValue:l(a).orderNum,"onUpdate:modelValue":o[5]||(o[5]=s=>l(a).orderNum=s),min:0,max:999,"controls-position":"right",placeholder:"请输入排序",class:"w100"},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{xs:24,sm:12,md:12,lg:12,xl:12},{default:t(()=>[e(u,{label:"部门状态"},{default:t(()=>[e(E,{modelValue:l(a).status,"onUpdate:modelValue":o[6]||(o[6]=s=>l(a).status=s),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"启","inactive-text":"禁"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{de as _,se as d,J as g};
