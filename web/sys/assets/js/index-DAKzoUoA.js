import{d as $,b as q,Z as j,_ as O,j as Q,o as b,c as D,U as e,O as n,i as Z,ai as r,a as A,u as o,a9 as y,F as G,a8 as H,M as J,S as f,P as W,V as X}from"./@vue-CIdpUgdv.js";import{s as v}from"./index-Cf93PWEY.js";import{a as h,E as k}from"./element-plus-BcbsnzDt.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-jSNvwxF2.js";import"./nprogress-ekFNJb3B.js";import"./@intlify-BrbEMGpa.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";function ee(c){return v({url:"/api/v1/system/loginLog/list",method:"get",params:c})}function te(c){return v({url:"/api/v1/system/loginLog/delete",method:"delete",params:{ids:c}})}function ae(){return v({url:"/api/v1/system/loginLog/clear",method:"delete"})}const oe={class:"system-dic-container"},le={class:"system-user-search mb15"},Ae=$({name:"apiV1SystemLoginLogList",__name:"index",setup(c){const{proxy:w}=Z(),V=q(),{admin_login_status:x}=w.useDict("admin_login_status"),d=j({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,dateRange:[],status:"",ipaddr:"",loginLocation:"",userName:""}}}),{tableData:l}=O(d),C=()=>{s()},s=()=>{ee(d.tableData.param).then(i=>{d.tableData.data=i.data.list,d.tableData.total=i.data.total})},N=i=>{let t="你确定要删除所选数据？",m=[];if(m=d.ids,m.length===0){h.error("请选择要删除的数据。");return}k.confirm(t,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{te(m).then(()=>{h.success("删除成功"),s()})}).catch(()=>{})},R=()=>{k.confirm("你确定要删除所选数据？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{ae().then(()=>{h.success("清除成功"),s()})}).catch(()=>{})};Q(()=>{C()});const S=i=>{i&&(i.resetFields(),s())},B=i=>{d.ids=i.map(t=>t.infoId)},U=i=>w.selectDictLabel(o(x),i.status);return(i,t)=>{const m=r("el-input"),u=r("el-form-item"),z=r("el-option"),T=r("el-select"),M=r("el-date-picker"),F=r("ele-Search"),g=r("el-icon"),_=r("el-button"),I=r("ele-Refresh"),L=r("ele-Delete"),K=r("el-form"),p=r("el-table-column"),Y=r("el-table"),E=r("pagination"),P=r("el-card");return b(),D("div",oe,[e(P,{shadow:"hover"},{default:n(()=>[A("div",le,[e(K,{model:o(l).param,ref_key:"queryRef",ref:V,inline:!0,"label-width":"68px"},{default:n(()=>[e(u,{label:"登录IP",prop:"ipaddr"},{default:n(()=>[e(m,{modelValue:o(l).param.ipaddr,"onUpdate:modelValue":t[0]||(t[0]=a=>o(l).param.ipaddr=a),placeholder:"请输入登录地址",clearable:"",style:{width:"180px"},onKeyup:y(s,["enter","native"])},null,8,["modelValue"])]),_:1}),e(u,{label:"登录地点",prop:"loginLocation"},{default:n(()=>[e(m,{modelValue:o(l).param.loginLocation,"onUpdate:modelValue":t[1]||(t[1]=a=>o(l).param.loginLocation=a),placeholder:"请输入登录地点",clearable:"",style:{width:"180px"},onKeyup:y(s,["enter","native"])},null,8,["modelValue"])]),_:1}),e(u,{label:"用户名称",prop:"userName"},{default:n(()=>[e(m,{modelValue:o(l).param.userName,"onUpdate:modelValue":t[2]||(t[2]=a=>o(l).param.userName=a),placeholder:"请输入用户名称",clearable:"",style:{width:"180px"},onKeyup:y(s,["enter","native"])},null,8,["modelValue"])]),_:1}),e(u,{label:"状态",prop:"status"},{default:n(()=>[e(T,{modelValue:o(l).param.status,"onUpdate:modelValue":t[3]||(t[3]=a=>o(l).param.status=a),placeholder:"登录状态",clearable:"",style:{width:"180px"}},{default:n(()=>[(b(!0),D(G,null,H(o(x),a=>(b(),J(z,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"登录时间",prop:"dateRange"},{default:n(()=>[e(M,{modelValue:o(l).param.dateRange,"onUpdate:modelValue":t[4]||(t[4]=a=>o(l).param.dateRange=a),style:{width:"240px"},"value-format":"YYYY-MM-DD",type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])]),_:1}),e(u,null,{default:n(()=>[e(_,{size:"default",type:"primary",class:"ml10",onClick:s},{default:n(()=>[e(g,null,{default:n(()=>[e(F)]),_:1}),f(" 查询 ")]),_:1}),e(_,{size:"default",onClick:t[5]||(t[5]=a=>S(V.value))},{default:n(()=>[e(g,null,{default:n(()=>[e(I)]),_:1}),f(" 重置 ")]),_:1}),e(_,{size:"default",type:"danger",class:"ml10",onClick:t[6]||(t[6]=a=>N(null))},{default:n(()=>[e(g,null,{default:n(()=>[e(L)]),_:1}),f(" 删除日志 ")]),_:1}),e(_,{size:"default",type:"danger",class:"ml10",onClick:t[7]||(t[7]=a=>R())},{default:n(()=>[e(g,null,{default:n(()=>[e(L)]),_:1}),f(" 清空日志 ")]),_:1})]),_:1})]),_:1},8,["model"])]),e(Y,{data:o(l).data,style:{width:"100%"},onSelectionChange:B},{default:n(()=>[e(p,{type:"selection",width:"55",align:"center"}),e(p,{label:"编号",align:"center",prop:"infoId"}),e(p,{label:"登录名称",align:"center",prop:"loginName"}),e(p,{label:"登录地址",align:"center",prop:"ipaddr",width:"130","show-overflow-tooltip":!0}),e(p,{label:"登录地点",align:"center",prop:"loginLocation","show-overflow-tooltip":!0}),e(p,{label:"浏览器",align:"center",prop:"browser"}),e(p,{label:"操作系统",align:"center",prop:"os"}),e(p,{label:"登录状态",align:"center",prop:"status",formatter:U}),e(p,{label:"操作信息",align:"center",prop:"msg"}),e(p,{label:"登录日期",align:"center",prop:"loginTime",width:"180"}),e(p,{label:"登录模块",alian:"center",prop:"module"})]),_:1},8,["data"]),W(e(E,{total:o(l).total,page:o(l).param.pageNum,"onUpdate:page":t[8]||(t[8]=a=>o(l).param.pageNum=a),limit:o(l).param.pageSize,"onUpdate:limit":t[9]||(t[9]=a=>o(l).param.pageSize=a),onPagination:s},null,8,["total","page","limit"]),[[X,o(l).total>0]])]),_:1})])}}});export{Ae as default};
