import{d as $,b as c,E as M,o as O,c as P,U as e,O as a,ai as r,G as q,a as h,P as f,V as v,S as T,i as z}from"./@vue-CIdpUgdv.js";import{u as A}from"./vue-router-CWOL7ATe.js";import j from"./basicInfo-1bO95sWQ.js";import{g as K,s as U}from"./index-BXP_iOH9.js";import H from"./genInfoForm-DUE28YvC.js";import J from"./tableColumns-B03wggcs.js";import{a as C}from"./element-plus-BcbsnzDt.js";import{a as L}from"./index-Cf93PWEY.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@element-plus-jSNvwxF2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./@intlify-BrbEMGpa.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";import"./type-AtHV8VU4.js";import"./relationTable-D_eZHI_c.js";import"./lodash-kx6XzW9U.js";const Q={class:"app-container"},W={class:"mb15"},X={class:"tools-footer"},Y=$({name:"apiV1SystemToolsGenColumnEdit",__name:"edit",setup(Z){const{proxy:I}=z(),x=A(),m=c(),_=c(),B=c(),l=c(1),d=o=>{if(o>l.value)switch(o){case 2:m.value.nextTip&&m.value.nextTip()&&(l.value=o);break;case 3:l.value==1?m.value.nextTip&&m.value.nextTip()&&(l.value=o):_.value.nextTip&&_.value.nextTip()&&(l.value=o);break}else l.value=o},k=[{key:"api",value:!1},{key:"controller",value:!1},{key:"dao",value:!1},{key:"dao_internal",value:!1},{key:"logic",value:!1},{key:"model",value:!1},{key:"model_do",value:!1},{key:"model_entity",value:!1},{key:"router",value:!1},{key:"router_func",value:!1},{key:"service",value:!1},{key:"sql",value:!1},{key:"tsApi",value:!1},{key:"tsModel",value:!1},{key:"vue",value:!1},{key:"vueDetail",value:!1},{key:"vueEdit",value:!1}],y=c({overwriteInfo:k});q("tableData",y);const E=(o,n)=>{const s={};return o.forEach(i=>{i.forEach(t=>{s[t[n]]=t})}),Object.values(s)};M(()=>{var n;const o=(n=x.query)==null?void 0:n.tableId;o?K(o).then(s=>{let i=[];i=s.data.list.filter(u=>!["updated_at","deleted_at"].includes(u.columnName));const t=s.data.info;t.columns=i,t.overwriteInfo=t.overwriteInfo?E([k,t.overwriteInfo],"key"):k,y.value=t}):C.error("参数错误")});const b=(o,n)=>new Promise((s,i)=>{I.$refs[o].$refs[n].validate(t=>{t?s(t):i("请将表单填写完整")})}),F=()=>{Promise.all([b("toolsBasicInfoFormRef","basicInfoFormRef"),b("genInfoFormRef","genInfoFormRef")]).then(()=>{U(y.value).then(()=>{C.success("保存成功"),p()})}).catch(o=>{C.error(o.toString())})},g=()=>{l.value>2?l.value=1:l.value++},p=()=>{I.mittBus.emit("onCurrentContextmenuClick",Object.assign({},{contextMenuClickId:1,...x}))};return(o,n)=>{const s=r("el-col"),i=r("ele-Comment"),t=r("el-icon"),u=r("el-step"),N=r("ele-Document"),S=r("ele-Expand"),V=r("el-steps"),D=r("el-row"),w=r("el-button"),G=r("el-card");return O(),P("div",Q,[e(G,{shadow:"hover"},{default:a(()=>[h("div",W,[e(D,null,{default:a(()=>[e(s,{span:4}),e(s,{span:16},{default:a(()=>[e(V,{active:l.value,"align-center":"",simple:""},{default:a(()=>[e(u,{title:"1.基本信息",onClick:n[0]||(n[0]=R=>d(1))},{icon:a(()=>[e(t,null,{default:a(()=>[e(i)]),_:1})]),_:1}),e(u,{title:"2.生成信息",onClick:n[1]||(n[1]=R=>d(2))},{icon:a(()=>[e(t,null,{default:a(()=>[e(N)]),_:1})]),_:1}),e(u,{title:"3.字段信息",onClick:n[2]||(n[2]=R=>d(3))},{icon:a(()=>[e(t,null,{default:a(()=>[e(S)]),_:1})]),_:1})]),_:1},8,["active"])]),_:1}),e(s,{span:4})]),_:1})]),f(e(j,{ref_key:"toolsBasicInfoFormRef",ref:m,onGoNext:g,onClose:p},null,512),[[v,l.value===1]]),f(e(H,{ref_key:"genInfoFormRef",ref:_,onGoNext:g,onClose:p},null,512),[[v,l.value===2]]),f(e(J,{ref_key:"tableColumnsRef",ref:B},null,512),[[v,l.value===3]]),f(h("div",X,[e(w,{size:"default",onClick:p},{default:a(()=>[T("关 闭")]),_:1}),e(w,{type:"primary",onClick:F,size:"default"},{default:a(()=>[T("保 存")]),_:1})],512),[[v,l.value===3]])]),_:1})])}}}),We=L(Y,[["__scopeId","data-v-dd3d3e0a"]]);export{We as default};
