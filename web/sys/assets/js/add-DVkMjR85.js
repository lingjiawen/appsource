import{a as I}from"./asRedeemCode-Cs__bbJp.js";import{a as L}from"./element-plus-BcbsnzDt.js";import{d as N,b as c,Z as T,_ as M,o as s,c as _,U as i,O as t,u as e,D as P,ai as p,aq as W,P as Z,S as d,T as D,a as j,F as z,a8 as G,M as H}from"./@vue-CIdpUgdv.js";import{a as J}from"./index-Cf93PWEY.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@element-plus-jSNvwxF2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./@intlify-BrbEMGpa.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";const K={class:"install-RedeemCode-add"},Q={class:"dialog-footer"},X=N({name:"ApiV1AppsourceAsRedeemCodeEdit",__name:"add",props:{typeOptions:{type:Array,default:()=>[]},activeOptions:{type:Array,default:()=>[]}},emits:["asRedeemCodeList"],setup(C,{expose:x,emit:R}){const b=R,y=c(null);c();const m=c(null),l=T({loading:!1,isShowDialog:!1,formData:{id:void 0,quantity:void 0,prefix:void 0,type:void 0}}),{loading:A,isShowDialog:n,formData:r,rules:k}=M(l),h=()=>{S(),l.isShowDialog=!0,setTimeout(()=>{m.value&&m.value.focus()},100)},v=()=>{l.isShowDialog=!1};x({openDialog:h});const q=()=>{v()},w=()=>{const u=e(y);u&&u.validate(a=>{a&&(l.loading=!0,(!l.formData.id||l.formData.id===0)&&I(l.formData).then(()=>{L.success("添加成功"),v(),b("asRedeemCodeList")}).finally(()=>{l.loading=!1}))})},S=()=>{l.formData={id:void 0,quantity:1,prefix:"",type:"3"}};return(u,a)=>{const g=p("el-input"),f=p("el-form-item"),U=p("el-radio"),B=p("el-radio-group"),O=p("el-form"),V=p("el-button"),E=p("el-dialog"),F=W("drag");return s(),_("div",K,[i(E,{modelValue:e(n),"onUpdate:modelValue":a[3]||(a[3]=o=>P(n)?n.value=o:null),width:"800px","close-on-click-modal":!1,"destroy-on-close":!0},{header:t(()=>[Z((s(),_("div",null,[d(D((!e(r).id||e(r).id==0?"添加":"修改")+"卡密管理"),1)])),[[F,[".appsource-asRedeemCode-add .el-dialog",".appsource-asRedeemCode-add .el-dialog__header"]]])]),footer:t(()=>[j("div",Q,[i(V,{type:"primary",onClick:w,disabled:e(A)},{default:t(()=>[d("确 定")]),_:1},8,["disabled"]),i(V,{onClick:q},{default:t(()=>[d("取 消")]),_:1})])]),default:t(()=>[i(O,{ref_key:"formRef",ref:y,model:e(r),rules:e(k),"label-width":"120px"},{default:t(()=>[i(f,{label:"兑换码前缀",prop:"prefix"},{default:t(()=>[i(g,{modelValue:e(r).prefix,"onUpdate:modelValue":a[0]||(a[0]=o=>e(r).prefix=o),placeholder:"兑换码前缀"},null,8,["modelValue"])]),_:1}),i(f,{label:"生成数量",prop:"quantity"},{default:t(()=>[i(g,{ref_key:"quantityInput",ref:m,modelValue:e(r).quantity,"onUpdate:modelValue":a[1]||(a[1]=o=>e(r).quantity=o),placeholder:"生成数量"},null,8,["modelValue"])]),_:1}),i(f,{label:"类型",prop:"type"},{default:t(()=>[i(B,{modelValue:e(r).type,"onUpdate:modelValue":a[2]||(a[2]=o=>e(r).type=o)},{default:t(()=>[(s(!0),_(z,null,G(C.typeOptions,o=>(s(),H(U,{key:o.value,value:o.value},{default:t(()=>[d(D(o.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),We=J(X,[["__scopeId","data-v-ec93a873"]]);export{We as default};
