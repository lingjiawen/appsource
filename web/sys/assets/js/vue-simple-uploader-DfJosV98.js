import{U as b,S as M,P as V,V as J,o as D,M as A,H as N,b as R,B as Z,j as he,n as pe,A as Se,k as L,e as ye,Y as de,T as O,ai as B,F as fe,a8 as ce,G as _e,Z as le,O as se,i as ve}from"./@vue-CIdpUgdv.js";function re(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ge=function a(v,y,t){function m(e,s){if(!y[e]){if(!v[e]){if(!s&&re)return re(e);if(h)return h(e,!0);throw new Error("Cannot find module '"+e+"'")}var l=y[e]={exports:{}};v[e][0].call(l.exports,function(n){var r=v[e][1][n];return m(r||n)},l,l.exports,a,v,y,t)}return y[e].exports}for(var h=re,o=0;o<t.length;o++)m(t[o]);return m}({1:[function(a,v,y){var t=a("./utils");function m(o,e,s){t.defineNonEnumerable(this,"uploader",o),t.defineNonEnumerable(this,"file",e),t.defineNonEnumerable(this,"bytes",null),this.offset=s,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=t.evalOpts(o.opts.chunkSize,e,this),this.startByte=this.offset*this.chunkSize,this.endByte=this.computeEndByte(),this.xhr=null}var h=m.STATUS={PENDING:"pending",UPLOADING:"uploading",READING:"reading",SUCCESS:"success",ERROR:"error",COMPLETE:"complete",PROGRESS:"progress",RETRY:"retry"};t.extend(m.prototype,{_event:function(o,e){(e=t.toArray(arguments)).unshift(this),this.file._chunkEvent.apply(this.file,e)},computeEndByte:function(){var o=Math.min(this.file.size,(this.offset+1)*this.chunkSize);return this.file.size-o<this.chunkSize&&!this.uploader.opts.forceChunkSize&&(o=this.file.size),o},getParams:function(){return{chunkNumber:this.offset+1,chunkSize:this.chunkSize,currentChunkSize:this.endByte-this.startByte,totalSize:this.file.size,identifier:this.file.uniqueIdentifier,filename:this.file.name,relativePath:this.file.relativePath,totalChunks:this.file.chunks.length}},getTarget:function(o,e){return e.length?(o.indexOf("?")<0?o+="?":o+="&",o+e.join("&")):o},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",l,!1),this.xhr.addEventListener("error",l,!1);var o=t.evalOpts(this.uploader.opts.testMethod,this.file,this),e=this.prepareXhrRequest(o,!0);this.xhr.send(e);var s=this;function l(n){var r=s.status(!0);r===h.ERROR?(s._event(r,s.message()),s.uploader.uploadNextChunk()):r===h.SUCCESS?(s._event(r,s.message()),s.tested=!0):s.file.paused||(s.tested=!0,s.send())}},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(o){this.readState=2,this.bytes=o,this.send()},send:function(){var o=this.uploader.opts.preprocess,e=this.uploader.opts.readFileFn;if(t.isFunction(o))switch(this.preprocessState){case 0:return this.preprocessState=1,void o(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void e(this.file,this.file.fileType,this.startByte,this.endByte,this);case 1:return}if(!this.uploader.opts.testChunks||this.tested){this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",r,!1),this.xhr.addEventListener("load",p,!1),this.xhr.addEventListener("error",p,!1);var s=t.evalOpts(this.uploader.opts.uploadMethod,this.file,this),l=this.prepareXhrRequest(s,!1,this.uploader.opts.method,this.bytes);this.xhr.send(l);var n=this}else this.test();function r(f){f.lengthComputable&&(n.loaded=f.loaded,n.total=f.total),n._event(h.PROGRESS,f)}function p(f){var i=n.message();n.processingResponse=!0,n.uploader.opts.processResponse(i,function(u,c){if(n.processingResponse=!1,n.xhr){n.processedState={err:u,res:c};var g=n.status();if(g===h.SUCCESS||g===h.ERROR)n._event(g,c),g===h.ERROR&&n.uploader.uploadNextChunk();else{n._event(h.RETRY,c),n.pendingRetry=!0,n.abort(),n.retries++;var S=n.uploader.opts.chunkRetryInterval;S!==null?setTimeout(function(){n.send()},S):n.send()}}},n.file,n)}},abort:function(){var o=this.xhr;this.xhr=null,this.processingResponse=!1,this.processedState=null,o&&o.abort()},status:function(o){if(this.readState===1)return h.READING;if(this.pendingRetry||this.preprocessState===1)return h.UPLOADING;if(this.xhr){if(this.xhr.readyState<4||this.processingResponse)return h.UPLOADING;var e;this.uploader.opts.successStatuses.indexOf(this.xhr.status)>-1?e=h.SUCCESS:this.uploader.opts.permanentErrors.indexOf(this.xhr.status)>-1||!o&&this.retries>=this.uploader.opts.maxChunkRetries?e=h.ERROR:(this.abort(),e=h.PENDING);var s=this.processedState;return s&&s.err&&(e=h.ERROR),e}return h.PENDING},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var o=this.status();return o===h.SUCCESS||o===h.ERROR?1:o===h.PENDING?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var o=this.endByte-this.startByte;return this.status()!==h.SUCCESS&&(o=this.progress()*o),o},prepareXhrRequest:function(o,e,s,l){var n=t.evalOpts(this.uploader.opts.query,this.file,this,e);n=t.extend(this.getParams(),n),n=this.uploader.opts.processParams(n,this.file,this,e);var r=t.evalOpts(this.uploader.opts.target,this.file,this,e),p=null;if(o==="GET"||s==="octet"){var f=[];t.each(n,function(i,u){f.push([encodeURIComponent(u),encodeURIComponent(i)].join("="))}),r=this.getTarget(r,f),p=l||null}else p=new FormData,t.each(n,function(i,u){p.append(u,i)}),l!==void 0&&p.append(this.uploader.opts.fileParameterName,l,this.file.name);return this.xhr.open(o,r,!0),this.xhr.withCredentials=this.uploader.opts.withCredentials,t.each(t.evalOpts(this.uploader.opts.headers,this.file,this,e),function(i,u){this.xhr.setRequestHeader(u,i)},this),p}}),v.exports=m},{"./utils":5}],2:[function(a,v,y){var t=a("./utils").each,m={_eventData:null,on:function(h,o){this._eventData||(this._eventData={}),this._eventData[h]||(this._eventData[h]=[]);var e=!1;t(this._eventData[h],function(s){if(s===o)return e=!0,!1}),e||this._eventData[h].push(o)},off:function(h,o){this._eventData||(this._eventData={}),this._eventData[h]&&this._eventData[h].length&&(o?t(this._eventData[h],function(e,s){if(e===o)return this._eventData[h].splice(s,1),!1},this):this._eventData[h]=[])},trigger:function(h){if(this._eventData||(this._eventData={}),!this._eventData[h])return!0;var o=this._eventData[h].slice.call(arguments,1),e=!1;return t(this._eventData[h],function(s){e=s.apply(this,o)===!1||e},this),!e}};v.exports=m},{"./utils":5}],3:[function(a,v,y){var t=a("./utils"),m=a("./event"),h=a("./file"),o=a("./chunk"),e="0.6.0",s=typeof window>"u",l=!s&&window.navigator.msPointerEnabled,n=function(){if(s)return!1;var i="slice",u=t.isDefined(window.File)&&t.isDefined(window.Blob)&&t.isDefined(window.FileList),c=null;return u&&(c=window.Blob.prototype,t.each(["slice","webkitSlice","mozSlice"],function(g){if(c[g])return i=g,!1}),u=!!c[i]),u&&(p.sliceName=i),c=null,u}(),r=function(){if(s)return!1;var i=window.document.createElement("input");i.type="file";var u="webkitdirectory"in i||"directory"in i;return i=null,u}();function p(i){this.support=n,this.support&&(this.supportDirectory=r,t.defineNonEnumerable(this,"filePaths",{}),this.opts=t.extend({},p.defaults,i||{}),this.preventEvent=t.bind(this._preventEvent,this),h.call(this,this))}var f=function(i,u,c,g,S){S.readFinished(i.file[p.sliceName](c,g,u))};p.version=e,p.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:f,checkChunkUploadedByResponse:null,initialPaused:!1,processResponse:function(i,u){u(null,i)},processParams:function(i){return i}},p.utils=t,p.event=m,p.File=h,p.Chunk=o,p.prototype=t.extend({},h.prototype),t.extend(p.prototype,m),t.extend(p.prototype,{constructor:p,_trigger:function(i){var u=t.toArray(arguments),c=!this.trigger.apply(this,arguments);return i!=="catchAll"&&(u.unshift("catchAll"),c=!this.trigger.apply(this,u)||c),!c},_triggerAsync:function(){var i=arguments;t.nextTick(function(){this._trigger.apply(this,i)},this)},addFiles:function(i,u){var c=[],g=this.fileList.length;t.each(i,function(d){if((!l||l&&d.size>0)&&(d.size%4096!=0||d.name!=="."&&d.fileName!==".")){var E=this.generateUniqueIdentifier(d);if(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(E)){var F=new h(this,d,this);F.uniqueIdentifier=E,this._trigger("fileAdded",F,u)?c.push(F):h.prototype.removeFile.call(this,F)}}},this);var S=this.fileList.slice(g);this._trigger("filesAdded",c,S,u)?(t.each(c,function(d){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(d)},this),this._trigger("filesSubmitted",c,S,u)):t.each(S,function(d){h.prototype.removeFile.call(this,d)},this)},addFile:function(i,u){this.addFiles([i],u)},cancel:function(){for(var i=this.fileList.length-1;i>=0;i--)this.fileList[i].cancel()},removeFile:function(i){h.prototype.removeFile.call(this,i),this._trigger("fileRemoved",i)},generateUniqueIdentifier:function(i){var u=this.opts.generateUniqueIdentifier;if(t.isFunction(u))return u(i);var c=i.relativePath||i.webkitRelativePath||i.fileName||i.name;return i.size+"-"+c.replace(/[^0-9a-zA-Z_-]/gim,"")},getFromUniqueIdentifier:function(i){var u=!1;return t.each(this.files,function(c){if(c.uniqueIdentifier===i)return u=c,!1}),u},uploadNextChunk:function(i){var u=!1,c=o.STATUS.PENDING,g=this.uploader.opts.checkChunkUploadedByResponse;if(this.opts.prioritizeFirstAndLastChunk&&(t.each(this.files,function(d){if(!d.paused&&(!g||d._firstResponse||!d.isUploading()))return d.chunks.length&&d.chunks[0].status()===c?(d.chunks[0].send(),u=!0,!1):d.chunks.length>1&&d.chunks[d.chunks.length-1].status()===c?(d.chunks[d.chunks.length-1].send(),u=!0,!1):void 0}),u))return u;if(t.each(this.files,function(d){if(!d.paused){if(g&&!d._firstResponse&&d.isUploading())return;t.each(d.chunks,function(E){if(E.status()===c)return E.send(),u=!0,!1})}if(u)return!1}),u)return!0;var S=!1;return t.each(this.files,function(d){if(!d.isComplete())return S=!0,!1}),S||i||!this.files.length||this._triggerAsync("complete"),S},upload:function(i){var u=this._shouldUploadNext();if(u!==!1){!i&&this._trigger("uploadStart");for(var c=!1,g=1;g<=this.opts.simultaneousUploads-u&&((c=this.uploadNextChunk(!i)||c)||!i);g++);c||i||this._triggerAsync("complete")}},_shouldUploadNext:function(){var i=0,u=!0,c=this.opts.simultaneousUploads,g=o.STATUS.UPLOADING;return t.each(this.files,function(S){return t.each(S.chunks,function(d){if(d.status()===g&&++i>=c)return u=!1,!1}),u}),u&&i},assignBrowse:function(i,u,c,g){i.length===void 0&&(i=[i]),t.each(i,function(S){var d;S.tagName==="INPUT"&&S.type==="file"?d=S:((d=document.createElement("input")).setAttribute("type","file"),t.extend(d.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),S.appendChild(d),S.addEventListener("click",function(F){S.tagName.toLowerCase()!=="label"&&d.click()},!1)),this.opts.singleFile||c||d.setAttribute("multiple","multiple"),u&&d.setAttribute("webkitdirectory","webkitdirectory"),g&&t.each(g,function(F,C){d.setAttribute(C,F)});var E=this;d.addEventListener("change",function(F){E._trigger(F.type,F),F.target.value&&(E.addFiles(F.target.files,F),F.target.value="")},!1)},this)},onDrop:function(i){this._trigger(i.type,i),this.opts.onDropStopPropagation&&i.stopPropagation(),i.preventDefault(),this._parseDataTransfer(i.dataTransfer,i)},_parseDataTransfer:function(i,u){i.items&&i.items[0]&&i.items[0].webkitGetAsEntry?this.webkitReadDataTransfer(i,u):this.addFiles(i.files,u)},webkitReadDataTransfer:function(i,u){var c=this,g=i.items.length,S=[];function d(U){U.readEntries(function(P){P.length?(g+=P.length,t.each(P,function(w){if(w.isFile){var I=w.fullPath;w.file(function(K){E(K,I)},F)}else w.isDirectory&&d(w.createReader())}),d(U)):C()},F)}function E(U,P){U.relativePath=P.substring(1),S.push(U),C()}function F(U){throw U}function C(){--g==0&&c.addFiles(S,u)}t.each(i.items,function(U){var P=U.webkitGetAsEntry();P?P.isFile?E(U.getAsFile(),P.fullPath):d(P.createReader()):C()})},_assignHelper:function(i,u,c){i.length===void 0&&(i=[i]);var g=c?"removeEventListener":"addEventListener";t.each(i,function(S){t.each(u,function(d,E){S[g](E,d,!1)},this)},this)},_preventEvent:function(i){t.preventEvent(i),this._trigger(i.type,i)},assignDrop:function(i){this._onDrop=t.bind(this.onDrop,this),this._assignHelper(i,{dragover:this.preventEvent,dragenter:this.preventEvent,dragleave:this.preventEvent,drop:this._onDrop})},unAssignDrop:function(i){this._assignHelper(i,{dragover:this.preventEvent,dragenter:this.preventEvent,dragleave:this.preventEvent,drop:this._onDrop},!0),this._onDrop=null}}),v.exports=p},{"./chunk":1,"./event":2,"./file":4,"./utils":5}],4:[function(a,v,y){var t=a("./utils"),m=a("./chunk");function h(e,s,l){t.defineNonEnumerable(this,"uploader",e),this.isRoot=this.isFolder=e===this,t.defineNonEnumerable(this,"parent",l||null),t.defineNonEnumerable(this,"files",[]),t.defineNonEnumerable(this,"fileList",[]),t.defineNonEnumerable(this,"chunks",[]),t.defineNonEnumerable(this,"_errorFiles",[]),t.defineNonEnumerable(this,"file",null),this.id=t.uid(),this.isRoot||!s?this.file=null:t.isString(s)?(this.isFolder=!0,this.file=null,this.path=s,this.parent.path&&(s=s.substr(this.parent.path.length)),this.name=s.charAt(s.length-1)==="/"?s.substr(0,s.length-1):s):(this.file=s,this.fileType=this.file.type,this.name=s.fileName||s.name,this.size=s.size,this.relativePath=s.relativePath||s.webkitRelativePath||this.name,this._parseFile()),this.paused=e.opts.initialPaused,this.error=!1,this.allError=!1,this.aborted=!1,this.completed=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function o(e){var s=[],l=e.split("/"),n=l.length,r=1;if(l.splice(n-1,1),n--,l.length)for(;r<=n;)s.push(l.slice(0,r++).join("/")+"/");return s}t.extend(h.prototype,{_parseFile:function(){var e=o(this.relativePath);if(e.length){var s=this.uploader.filePaths;t.each(e,function(l,n){var r=s[l];r||(r=new h(this.uploader,l,this.parent),s[l]=r,this._updateParentFileList(r)),this.parent=r,r.files.push(this),e[n+1]||r.fileList.push(this)},this)}else this._updateParentFileList()},_updateParentFileList:function(e){e||(e=this);var s=this.parent;s&&s.fileList.push(e)},_eachAccess:function(e,s){this.isFolder?t.each(this.files,function(l,n){return e.call(this,l,n)},this):s.call(this,this)},bootstrap:function(){if(!this.isFolder){var e=this.uploader.opts;t.isFunction(e.initFileFn)&&e.initFileFn.call(this,this),this.abort(!0),this._resetError(),this._prevProgress=0;for(var s=e.forceChunkSize?Math.ceil:Math.floor,l=Math.max(s(this.size/e.chunkSize),1),n=0;n<l;n++)this.chunks.push(new m(this.uploader,this,n))}},_measureSpeed:function(){var e=this.uploader.opts.speedSmoothingFactor,s=Date.now()-this._lastProgressCallback;if(s){var l=this.sizeUploaded();this.currentSpeed=Math.max((l-this._prevUploadedSize)/s*1e3,0),this.averageSpeed=e*this.currentSpeed+(1-e)*this.averageSpeed,this._prevUploadedSize=l,this.parent&&this.parent._checkProgress()&&this.parent._measureSpeed()}},_checkProgress:function(e){return Date.now()-this._lastProgressCallback>=this.uploader.opts.progressCallbacksInterval},_chunkEvent:function(e,s,l){var n=this.uploader,r=m.STATUS,p=this,f=this.getRoot(),i=function(){p._measureSpeed(),n._trigger("fileProgress",f,p,e),p._lastProgressCallback=Date.now()};switch(s){case r.PROGRESS:this._checkProgress()&&i();break;case r.ERROR:this._error(),this.abort(!0),n._trigger("fileError",f,this,l,e);break;case r.SUCCESS:if(this._updateUploadedChunks(l,e),this.error)return;clearTimeout(this._progeressId),this._progeressId=0;var u=Date.now()-this._lastProgressCallback;u<n.opts.progressCallbacksInterval&&(this._progeressId=setTimeout(i,n.opts.progressCallbacksInterval-u)),this.isComplete()?(clearTimeout(this._progeressId),i(),this.currentSpeed=0,this.averageSpeed=0,n._trigger("fileSuccess",f,this,l,e),f.isComplete()&&n._trigger("fileComplete",f,this)):this._progeressId||i();break;case r.RETRY:n._trigger("fileRetry",f,this,e)}},_updateUploadedChunks:function(e,s){var l=this.uploader.opts.checkChunkUploadedByResponse;if(l){var n=s.xhr;t.each(this.chunks,function(r){if(!r.tested){var p=l.call(this,r,e);r!==s||p||(r.xhr=null),p&&(r.xhr=n),r.tested=!0}},this),this._firstResponse?this.uploader.uploadNextChunk():(this._firstResponse=!0,this.uploader.upload(!0))}else this.uploader.uploadNextChunk()},_error:function(){this.error=this.allError=!0;for(var e=this.parent;e&&e!==this.uploader;)e._errorFiles.push(this),e.error=!0,e._errorFiles.length===e.files.length&&(e.allError=!0),e=e.parent},_resetError:function(){this.error=this.allError=!1;for(var e=this.parent,s=-1;e&&e!==this.uploader;)s=e._errorFiles.indexOf(this),e._errorFiles.splice(s,1),e.allError=!1,e._errorFiles.length||(e.error=!1),e=e.parent},isComplete:function(){if(!this.completed){var e=!1;this._eachAccess(function(s){if(!s.isComplete())return e=!0,!1},function(){if(this.error)e=!0;else{var s=m.STATUS;t.each(this.chunks,function(l){var n=l.status();if(n===s.ERROR||n===s.PENDING||n===s.UPLOADING||n===s.READING||l.preprocessState===1||l.readState===1)return e=!0,!1})}}),this.completed=!e}return this.completed},isUploading:function(){var e=!1;return this._eachAccess(function(s){if(s.isUploading())return e=!0,!1},function(){var s=m.STATUS.UPLOADING;t.each(this.chunks,function(l){if(l.status()===s)return e=!0,!1})}),e},resume:function(){this._eachAccess(function(e){e.resume()},function(){this.paused=!1,this.aborted=!1,this.uploader.upload()}),this.paused=!1,this.aborted=!1},pause:function(){this._eachAccess(function(e){e.pause()},function(){this.paused=!0,this.abort()}),this.paused=!0},cancel:function(){this.uploader.removeFile(this)},retry:function(e){var s=function(l){l.error&&l.bootstrap()};e?e.bootstrap():this._eachAccess(s,function(){this.bootstrap()}),this.uploader.upload()},abort:function(e){if(!this.aborted){this.currentSpeed=0,this.averageSpeed=0,this.aborted=!e;var s=this.chunks;e&&(this.chunks=[]);var l=m.STATUS.UPLOADING;t.each(s,function(n){n.status()===l&&(n.abort(),this.uploader.uploadNextChunk())},this)}},progress:function(){var e=0,s=0,l=0;return this._eachAccess(function(n,r){e+=n.progress()*n.size,s+=n.size,r===this.files.length-1&&(l=s>0?e/s:this.isComplete()?1:0)},function(){if(this.error)l=1;else{if(this.chunks.length===1)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),void(l=this._prevProgress);var n=0;t.each(this.chunks,function(p){n+=p.progress()*(p.endByte-p.startByte)});var r=n/this.size;this._prevProgress=Math.max(this._prevProgress,r>.9999?1:r),l=this._prevProgress}}),l},getSize:function(){var e=0;return this._eachAccess(function(s){e+=s.size},function(){e+=this.size}),e},getFormatSize:function(){var e=this.getSize();return t.formatSize(e)},getRoot:function(){if(this.isRoot)return this;for(var e=this.parent;e;){if(e.parent===this.uploader)return e;e=e.parent}return this},sizeUploaded:function(){var e=0;return this._eachAccess(function(s){e+=s.sizeUploaded()},function(){t.each(this.chunks,function(s){e+=s.sizeUploaded()})}),e},timeRemaining:function(){var e=0,s=0,l=0;return this._eachAccess(function(r,p){r.paused||r.error||(s+=r.size-r.sizeUploaded(),l+=r.averageSpeed),p===this.files.length-1&&(e=n(s,l))},function(){if(this.paused||this.error)e=0;else{var r=this.size-this.sizeUploaded();e=n(r,this.averageSpeed)}}),e;function n(r,p){return r&&!p?Number.POSITIVE_INFINITY:r||p?Math.floor(r/p):0}},removeFile:function(e){if(e.isFolder)for(;e.files.length;){var s=e.files[e.files.length-1];this._removeFile(s)}this._removeFile(e)},_delFilePath:function(e){e.path&&this.filePaths&&delete this.filePaths[e.path],t.each(e.fileList,function(s){this._delFilePath(s)},this)},_removeFile:function(e){if(!e.isFolder){t.each(this.files,function(n,r){if(n===e)return this.files.splice(r,1),!1},this),e.abort();for(var s,l=e.parent;l&&l!==this;)s=l.parent,l._removeFile(e),l=s}e.parent===this&&t.each(this.fileList,function(n,r){if(n===e)return this.fileList.splice(r,1),!1},this),this.isRoot||!this.isFolder||this.files.length||(this.parent._removeFile(this),this.uploader._delFilePath(this)),e.parent=null},getType:function(){return this.isFolder?"folder":this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.isFolder?"":this.name.substr(2+(~-this.name.lastIndexOf(".")>>>0)).toLowerCase()}}),v.exports=h},{"./chunk":1,"./utils":5}],5:[function(a,v,y){var t=Object.prototype,m=Array.prototype,h=t.toString,o=function(r){return h.call(r)==="[object Function]"},e=Array.isArray||function(r){return h.call(r)==="[object Array]"},s=function(r){return h.call(r)==="[object Object]"&&Object.getPrototypeOf(r)===t},l=0,n={uid:function(){return++l},noop:function(){},bind:function(r,p){return function(){return r.apply(p,arguments)}},preventEvent:function(r){r.preventDefault()},stop:function(r){r.preventDefault(),r.stopPropagation()},nextTick:function(r,p){setTimeout(n.bind(r,p),0)},toArray:function(r,p,f){return p===void 0&&(p=0),f===void 0&&(f=r.length),m.slice.call(r,p,f)},isPlainObject:s,isFunction:o,isArray:e,isObject:function(r){return Object(r)===r},isString:function(r){return typeof r=="string"},isUndefined:function(r){return r===void 0},isDefined:function(r){return r!==void 0},each:function(r,p,f){if(n.isDefined(r.length))for(var i=0,u=r.length;i<u&&p.call(f,r[i],i,r)!==!1;i++);else for(var c in r)if(p.call(f,r[c],c,r)===!1)break},evalOpts:function(r,p){return n.isFunction(r)&&(p=n.toArray(arguments),r=r.apply(null,p.slice(1))),r},extend:function(){var r,p,f,i,u,c,g=arguments[0]||{},S=1,d=arguments.length,E=!1;for(typeof g=="boolean"&&(E=g,g=arguments[1]||{},S++),typeof g=="object"||o(g)||(g={}),S===d&&(g=this,S--);S<d;S++)if((r=arguments[S])!=null)for(p in r)f=g[p],g!==(i=r[p])&&(E&&i&&(s(i)||(u=e(i)))?(u?(u=!1,c=f&&e(f)?f:[]):c=f&&s(f)?f:{},g[p]=n.extend(E,c,i)):i!==void 0&&(g[p]=i));return g},formatSize:function(r){return r<1024?r.toFixed(0)+" bytes":r<1048576?(r/1024).toFixed(0)+" KB":r<1073741824?(r/1024/1024).toFixed(1)+" MB":(r/1024/1024/1024).toFixed(1)+" GB"},defineNonEnumerable:function(r,p,f){Object.defineProperty(r,p,{enumerable:!1,configurable:!0,writable:!0,value:f})}};v.exports=n},{}]},{},[3])(3);/*!
 * Uploader - Uploader library implements html5 file upload and provides multiple simultaneous, stable, fault tolerant and resumable uploads
 * @version v0.6.0
 * @author dolymood <dolymood@gmail.com>
 * @link https://github.com/simple-uploader/Uploader
 * @license MIT
 */function ne(a){return a.replace(/[A-Z]/g,v=>`-${v.toLowerCase()}`)}const q={name:"uploader-btn",props:{directory:{type:Boolean,default:!1},single:{type:Boolean,default:!1},attrs:{type:Object,default:()=>({})}},setup(a){const v=R(null),y=Z("uploader"),t=y.support;return he(()=>{pe(()=>{y.assignBrowse(v.value,a.directory,a.single,a.attrs)})}),{btn:v,support:t}}},be={class:"uploader-btn",ref:"btn"};q.render=function(a,v,y,t,m,h){return V((D(),A("label",be,[N(a.$slots,"default")],512)),[[J,t.support]])};const $={name:"uploader-drop",setup(){const a=Z("uploader");let v=R(null),y=R("");const t=a.support,m=()=>{y="uploader-dragover"},h=()=>{y=""},o=()=>{y="uploader-droped"};return pe(()=>{const e=v.value;a.assignDrop(e),a.on("dragenter",m),a.on("dragleave",h),a.on("drop",o)}),Se(()=>{const e=v.value;a.off("dragenter",m),a.off("dragleave",h),a.off("drop",o),a.unAssignDrop(e)}),{drop:v,dropClass:y,support:t,onDragEnter:m,onDragLeave:h,onDrop:o}}};$.render=function(a,v,y,t,m,h){return V((D(),A("div",{class:["uploader-drop",t.dropClass],ref:"drop"},[N(a.$slots,"default")],2)),[[J,t.support]])};const H={name:"uploader-unsupport",setup:()=>({support:Z("uploader").support})},ke={class:"uploader-unsupport"},Re=b("p",null,[M(" Your browser, unfortunately, is not supported by Uploader.js. The library requires support for "),b("a",{href:"http://www.w3.org/TR/FileAPI/"},"the HTML5 File API"),M(" along with "),b("a",{href:"http://www.w3.org/TR/FileAPI/#normalization-of-params"},"file slicing"),M(". ")],-1);H.render=function(a,v,y,t,m,h){return V((D(),A("div",ke,[N(a.$slots,"default",{},()=>[Re])],512)),[[J,!t.support]])};const ue=["fileProgress","fileSuccess","fileComplete","fileError"],z={name:"uploader-file",props:{file:{type:Object,default:()=>({})},list:{type:Boolean,default:!1}},setup(a){const v=ve();let y={},t=0;const m=R(null),h=R(!1),o=R(!1),e=R(0),s=R(0),l=R(!1),n=R(!1),r=R(0),p=R(""),f=R(0),i=R(0),u=R(0),c=R(""),g=R(""),S=R(""),d=L(()=>{let _=a.file.isFolder?"folder":"unknown";const k=a.file.uploader.opts.categoryMap||{image:["gif","jpg","jpeg","png","bmp","webp"],video:["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"],audio:["mp3","wav","wma","ogg","aac","flac"],document:["doc","txt","docx","pages","epub","pdf","numbers","csv","xls","xlsx","keynote","ppt","pptx"]};return Object.keys(k).forEach(x=>{k[x].indexOf(g.value)>-1&&(_=x)}),_}),E=L(()=>{i.value=Math.floor(100*i.value);const _=`translateX(${Math.floor(i.value-100)}%)`;return{progress:`${i.value}%`,webkitTransform:_,mozTransform:_,msTransform:_,transform:_}}),F=L(()=>`${ge.utils.formatSize(e.value)} / s`),C=L(()=>{let _=o;return l.value?"success":_.value?"error":n.value?"uploading":h.value?"paused":"waiting"}),U=L(()=>{const _=a.file.uploader.fileStatusText;let k=C.value;return k=typeof _=="function"?_(C.value,m.value):_[C.value],k||C}),P=L(()=>{const _=a.file;if(u.value===Number.POSITIVE_INFINITY||u.value===0)return"";let k=function(T){const j=Math.floor(T/31536e3);if(j)return j+" year"+G(j);const ee=Math.floor((T%=31536e3)/86400);if(ee)return ee+" day"+G(ee);const te=Math.floor((T%=86400)/3600);if(te)return te+" hour"+G(te);const ie=Math.floor((T%=3600)/60);if(ie)return ie+" minute"+G(ie);const oe=T%60;return oe+" second"+G(oe);function G(me){return me>1?"s":""}}(u.value);const x=_.uploader.opts.parseTimeRemaining;return x&&(k=x(u.value,k)),k}),w=()=>{h.value=a.file.paused,o.value=a.file.error,n.value=a.file.isUploading()},I=_=>{let k=_;try{k=JSON.parse(_)}catch{}m.value=k},K=(_,k)=>{const x=k[0],T=k[1],j=a.list?x:T;if(JSON.stringify(a.file)===JSON.stringify(j)){if(a.list&&_==="fileSuccess")return void I(k[2]);v.setupState[_](...k)}},Q=()=>{i.value=a.file.progress(),e.value=a.file.averageSpeed,s.value=a.file.currentSpeed,u.value=a.file.timeRemaining(),f.value=a.file.sizeUploaded(),w()},ae=(_,k,x)=>{_&&I(x),Q(),o.value=!1,l.value=!0,n.value=!1};return ye(C,(_,k)=>{k&&_==="uploading"&&k!=="uploading"?t=setTimeout(()=>{S.value="uploader-file-progressing"},200):(clearTimeout(t),S.value="")}),he(()=>{h.value=a.file.paused,o.value=a.file.error,e.value=a.file.averageSpeed,s.value=a.file.currentSpeed,l.value=a.file.isComplete(),n.value=a.file.isUploading(),r.value=a.file.getSize(),p.value=a.file.getFormatSize(),f.value=a.file.sizeUploaded(),i.value=a.file.progress(),u.value=a.file.timeRemaining(),c.value=a.file.getType(),g.value=a.file.getExtension(),ue.forEach(_=>{a.file.uploader.on(_,(k=>(y[k]=(...x)=>{K(k,x)},y[k]))(_))})}),de(()=>{ue.forEach(_=>{a.file.uploader.off(_,y[_])}),y=null}),{response:m,paused:h,error:o,averageSpeed:e,currentSpeed:s,isComplete:l,isUploading:n,size:r,formatedSize:p,uploadedSize:f,progress:i,timeRemaining:u,type:c,extension:g,progressingClass:S,fileCategory:d,progressStyle:E,formatedAverageSpeed:F,status:C,statusText:U,formatedTimeRemaining:P,actionCheck:w,pause:()=>{a.file.pause(),w(),Q()},resume:()=>{a.file.resume(),w()},remove:()=>{a.file.cancel()},retry:()=>{a.file.retry(),w()},processResponse:I,fileEventsHandler:K,fileProgress:Q,fileSuccess:ae,fileComplete:()=>{ae()},fileError:(_,k,x)=>{Q(),I(x),o.value=!0,l.value=!1,n.value=!1}}}},Ee={class:"uploader-file-info"},Fe={class:"uploader-file-name"},xe={class:"uploader-file-size"},Ce=b("div",{class:"uploader-file-meta"},null,-1),Ue={class:"uploader-file-status"},Pe={class:"uploader-file-actions"};z.render=function(a,v,y,t,m,h){return D(),A("div",{class:"uploader-file",status:t.status},[N(a.$slots,"default",{file:y.file,list:y.list,status:t.status,paused:t.paused,error:t.error,response:t.response,averageSpeed:t.averageSpeed,formatedAverageSpeed:t.formatedAverageSpeed,currentSpeed:t.currentSpeed,isComplete:t.isComplete,isUploading:t.isUploading,size:t.size,formatedSize:t.formatedSize,uploadedSize:t.uploadedSize,progress:t.progress,progressStyle:t.progressStyle,progressingClass:t.progressingClass,timeRemaining:t.timeRemaining,formatedTimeRemaining:t.formatedTimeRemaining,type:t.type,extension:t.extension,fileCategory:t.fileCategory},()=>[b("div",{class:["uploader-file-progress",t.progressingClass],style:t.progressStyle},null,6),b("div",Ee,[b("div",Fe,[b("i",{class:"uploader-file-icon",icon:t.fileCategory},null,8,["icon"]),M(O(y.file.name),1)]),b("div",xe,O(t.formatedSize),1),Ce,b("div",Ue,[V(b("span",null,O(t.statusText),513),[[J,t.status!=="uploading"]]),V(b("span",null,[b("span",null,O(t.progressStyle.progress)+" ",1),b("em",null,O(t.formatedAverageSpeed)+" ",1),b("i",null,O(t.formatedTimeRemaining),1)],512),[[J,t.status==="uploading"]])]),b("div",Pe,[b("span",{class:"uploader-file-pause",onClick:v[1]||(v[1]=(...o)=>t.pause&&t.pause(...o))}),b("span",{class:"uploader-file-resume",onClick:v[2]||(v[2]=(...o)=>t.resume&&t.resume(...o))},"️"),b("span",{class:"uploader-file-retry",onClick:v[3]||(v[3]=(...o)=>t.retry&&t.retry(...o))}),b("span",{class:"uploader-file-remove",onClick:v[4]||(v[4]=(...o)=>t.remove&&t.remove(...o))})])])])],8,["status"])};const Y={name:"uploader-list",components:{UploaderFile:z},setup:()=>({fileList:Z("uploader").fileList})},we={class:"uploader-list"};Y.render=function(a,v,y,t,m,h){const o=B("uploader-file");return D(),A("div",we,[N(a.$slots,"default",{fileList:t.fileList},()=>[b("ul",null,[(D(!0),A(fe,null,ce(t.fileList,e=>(D(),A("li",{key:e.id},[b(o,{file:e,list:!0},null,8,["file"])]))),128))])])])};const X={name:"uploader-files",components:{UploaderFile:z},setup:()=>({files:Z("uploader").files})},De={class:"uploader-files"};X.render=function(a,v,y,t,m,h){const o=B("uploader-file");return D(),A("div",De,[N(a.$slots,"default",{files:t.files},()=>[b("ul",null,[(D(!0),A(fe,null,ce(t.files,e=>(D(),A("li",{key:e.id},[b(o,{file:e},null,8,["file"])]))),128))])])])};const W={name:"uploader",props:{options:{type:Object,default:()=>({})},autoStart:{type:Boolean,default:!0},fileStatusText:{type:[Object,Function],default:()=>({success:"success",error:"error",uploading:"uploading",paused:"paused",waiting:"waiting"})}},setup(a,{emit:v}){const y=R(null),t=R(!1),m=R([]),h=R([]),o=ve();let e=new ge(a.options);const s=f=>{const i=le(f);if(v(ne("fileAdded"),i),i.ignored)return!1},l=(f,i)=>{if(v(ne("filesAdded"),f,i),f.ignored||i.ignored)return!1},n=f=>{m.value=e.files,h.value=e.fileList},r=(f,i)=>{m.value=e.files,h.value=e.fileList,a.autoStart&&e.upload()},p=(...f)=>{const i=f[0],u={fileAdded:!0,filesAdded:!0,uploadStart:"uploadStart"}[i];if(u){if(u===!0)return;o.setupState[u](...f.slice(1))}f[0]=ne(i),v(...f)};return a.options.initialPaused=!a.autoStart,e.fileStatusText=a.fileStatusText,e.on("catchAll",p),e.on("fileAdded",s),e.on("filesAdded",l),e.on("fileRemoved",n),e.on("filesSubmitted",r),de(()=>{e.off("catchAll",p),e.off("fileAdded",s),e.off("filesAdded",l),e.off("fileRemoved",n),e.off("filesSubmitted",r),e=null}),_e("uploader",le(e)),{uploader:e,started:t,files:m,fileList:h,uploadStart:()=>{t.value=!0},fileAdded:s,filesAdded:l,fileRemoved:n,filesSubmitted:r,allEvent:p,uploaderList:y}},components:{UploaderBtn:q,UploaderDrop:$,UploaderUnsupport:H,UploaderList:Y,UploaderFiles:X,UploaderFile:z}},Ae={class:"uploader"},Te=b("p",null,"Drop files here to upload or",-1),ze=M("select files"),Ne=M("select folder");W.render=function(a,v,y,t,m,h){const o=B("uploader-unsupport"),e=B("uploader-btn"),s=B("uploader-drop"),l=B("uploader-list");return D(),A("div",Ae,[N(a.$slots,"default",{files:t.files,fileList:t.fileList,started:t.started},()=>[b(o),b(s,null,{default:se(()=>[Te,b(e,null,{default:se(()=>[ze]),_:1}),b(e,{directory:!0},{default:se(()=>[Ne]),_:1})]),_:1}),b(l)])])};const Le={version:"1.0.0-beta.5",install:function(a,v){a.component(W.name,W),a.component(q.name,q),a.component($.name,$),a.component(H.name,H),a.component(Y.name,Y),a.component(X.name,X),a.component(z.name,z)},Uploader:W,UploaderBtn:q,UploaderDrop:$,UploaderUnsupport:H,UploaderList:Y,UploaderFiles:X,UploaderFile:z};export{Le as Z};
