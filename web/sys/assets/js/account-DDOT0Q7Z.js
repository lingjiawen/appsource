import{o as u,c as j,a as s,R as N,F as q,a8 as $,J as Y,T as P,S as v,ai as m,U as n,O as c,I as G,bl as ee,bj as te,d as se,b as O,Z as ae,_ as ie,j as oe,k as Me,M as x,u as g,a9 as U,i as ce}from"./@vue-CIdpUgdv.js";import{u as ne,b as le}from"./vue-router-CWOL7ATe.js";import{v as ue}from"./vue-i18n-C6ZazF2L.js";import{a as re}from"./js-cookie-Cz0CWeBA.js";import{s as Ie}from"./pinia-DE-bJcb2.js";import{a as k,u as ge,f as de,S as f,W as me,X as je,V as Ne}from"./index-Cf93PWEY.js";import{c as Le,a as ye,b as pe,l as De}from"./index-CGGO-gYc.js";import{a as B}from"./element-plus-BcbsnzDt.js";import"./@intlify-BrbEMGpa.js";import"./vue-BUaMJYO7.js";import"./vue-demi-Dq6ymT-8.js";import"./@element-plus-jSNvwxF2.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";const we={name:"GoCaptcha",props:{value:Boolean,width:{type:String,default:"300px"},height:{type:String,default:"240px"},calcPosType:{type:String,default:"dom",validator:e=>["dom","screen"].includes(e)},maxDot:{type:Number,default:5},imageBase64:String,thumbBase64:String},data(){return{dots:[],imageBase64Code:"",thumbBase64Code:""}},watch:{value(){this.dots=[],this.imageBase64Code="",this.thumbBase64Code=""},imageBase64(e){this.dots=[],this.imageBase64Code=e},thumbBase64(e){this.dots=[],this.thumbBase64Code=e}},computed:{style(){return`width:${this.width}; height:${this.height};`}},methods:{handleCloseEvent(){this.$emit("close"),this.dots=[],this.imageBase64Code="",this.thumbBase64Code=""},handleRefreshEvent(){this.dots=[],this.$emit("refresh")},handleConfirmEvent(){this.$emit("confirm",this.dots)},handleClickPos(e){if(this.dots.length>=this.maxDot)return;const t=e||window.event;t.preventDefault();const o=t.currentTarget,{domX:p,domY:i}=this.getDomXY(o);let a=navigator.appName==="Netscape"?t.pageX:t.x+document.body.offsetTop,M=navigator.appName==="Netscape"?t.pageY:t.y+document.body.offsetTop;this.calcPosType==="screen"&&(a=navigator.appName==="Netscape"?t.clientX:t.x,M=navigator.appName==="Netscape"?t.clientY:t.y);const D=a-p,d=M-i,z=parseInt(D.toString()),r=parseInt(d.toString());return this.dots.push({x:z-11,y:r-11,index:this.dots.length+1}),!1},calcLocationLeft(e){let t=e.offsetLeft,o=e.offsetParent;for(;o!=null;)t+=o.offsetLeft,o=o.offsetParent;return t},calcLocationTop(e){let t=e.offsetTop,o=e.offsetParent;for(;o!=null;)t+=o.offsetTop,o=o.offsetParent;return t},getDomXY(e){let t=0,o=0;if(e.getBoundingClientRect){let p=e.getBoundingClientRect(),i=document.documentElement;t=p.left+Math.max(i.scrollLeft,document.body.scrollLeft)-i.clientLeft,o=p.top+Math.max(i.scrollTop,document.body.scrollTop)-i.clientTop}else for(;e!==document.body;)t+=e.offsetLeft,o+=e.offsetTop,e=e.offsetParent;return{domX:t,domY:o}}}},ze={class:"wg-cap-wrap"},Te={class:"wg-cap-wrap__header"},he=s("span",null,[v("请在下图"),s("em",null,"依次"),v("点击：")],-1),Ce=["src"],xe=["src"],Ae=s("img",{class:"wg-cap-wrap__loading",src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBzdHlsZT0ibWFyZ2luOiBhdXRvOyBiYWNrZ3JvdW5kOiByZ2JhKDI0MSwgMjQyLCAyNDMsIDApOyBkaXNwbGF5OiBibG9jazsgc2hhcGUtcmVuZGVyaW5nOiBhdXRvOyIgd2lkdGg9IjY0cHgiIGhlaWdodD0iNjRweCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIj4KICA8Y2lyY2xlIGN4PSI1MCIgY3k9IjM2LjgxMDEiIHI9IjEzIiBmaWxsPSIjM2U3Y2ZmIj4KICAgIDxhbmltYXRlIGF0dHJpYnV0ZU5hbWU9ImN5IiBkdXI9IjFzIiByZXBlYXRDb3VudD0iaW5kZWZpbml0ZSIgY2FsY01vZGU9InNwbGluZSIga2V5U3BsaW5lcz0iMC40NSAwIDAuOSAwLjU1OzAgMC40NSAwLjU1IDAuOSIga2V5VGltZXM9IjA7MC41OzEiIHZhbHVlcz0iMjM7Nzc7MjMiPjwvYW5pbWF0ZT4KICA8L2NpcmNsZT4KPC9zdmc+",alt:"正在加载中..."},null,-1),Se={class:"wg-cap-wrap__footer"},Ee={class:"wg-cap-wrap__ico"},fe={class:"wg-cap-wrap__btn"};function ve(e,t,o,p,i,a){return u(),j("div",ze,[s("div",Te,[he,i.thumbBase64Code?(u(),j("img",{key:0,class:"wg-cap-wrap__thumb",src:i.thumbBase64Code,alt:" "},null,8,Ce)):N("",!0)]),s("div",{class:"wg-cap-wrap__body",style:Y(a.style)},[i.imageBase64Code?(u(),j("img",{key:0,class:"wg-cap-wrap__picture",src:i.imageBase64Code,alt:" ",onClick:t[0]||(t[0]=M=>a.handleClickPos(M))},null,8,xe)):N("",!0),Ae,(u(!0),j(q,null,$(i.dots,(M,D)=>(u(),j("div",{key:D,class:"wg-cap-wrap__dot",style:Y(`top: ${M.y}px; left:${M.x}px;`)},[s("span",null,P(M.index),1)],4))),128))],4),s("div",Se,[s("div",Ee,[s("img",{onClick:t[1]||(t[1]=(...M)=>a.handleCloseEvent&&a.handleCloseEvent(...M)),src:"data:image/svg+xml;base64,PHN2ZyB0PSIxNjI2NjE0NDM5NDIzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9Ijg2NzUiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNNTEyIDIzLjI3MjcyN2MyNjkuOTE3MDkxIDAgNDg4LjcyNzI3MyAyMTguODEwMTgyIDQ4OC43MjcyNzMgNDg4LjcyNzI3M2E0ODYuNjMyNzI3IDQ4Ni42MzI3MjcgMCAwIDEtODQuOTQ1NDU1IDI3NS40MDk0NTUgNDYuNTQ1NDU1IDQ2LjU0NTQ1NSAwIDAgMS03Ni44NDY1NDUtNTIuNTI2NTQ2QTM5My41NDE4MTggMzkzLjU0MTgxOCAwIDAgMCA5MDcuNjM2MzY0IDUxMmMwLTIxOC41MDc2MzYtMTc3LjEyODcyNy0zOTUuNjM2MzY0LTM5NS42MzYzNjQtMzk1LjYzNjM2NFMxMTYuMzYzNjM2IDI5My40OTIzNjQgMTE2LjM2MzYzNiA1MTJzMTc3LjEyODcyNyAzOTUuNjM2MzY0IDM5NS42MzYzNjQgMzk1LjYzNjM2NGEzOTUuMTcwOTA5IDM5NS4xNzA5MDkgMCAwIDAgMTI1LjQ0LTIwLjI5MzgxOSA0Ni41NDU0NTUgNDYuNTQ1NDU1IDAgMCAxIDI5LjQ4NjU0NSA4OC4yOTY3MjhBNDg4LjI2MTgxOCA0ODguMjYxODE4IDAgMCAxIDUxMiAxMDAwLjcyNzI3M0MyNDIuMDgyOTA5IDEwMDAuNzI3MjczIDIzLjI3MjcyNyA3ODEuOTE3MDkxIDIzLjI3MjcyNyA1MTJTMjQyLjA4MjkwOSAyMy4yNzI3MjcgNTEyIDIzLjI3MjcyN3ogbS0xMTUuMiAzMDcuNzEyTDUxMiA0NDYuMTM4MTgybDExNS4yLTExNS4yYTQ2LjU0NTQ1NSA0Ni41NDU0NTUgMCAxIDEgNjUuODE1MjczIDY1Ljg2MTgxOEw1NzcuODYxODE4IDUxMmwxMTUuMiAxMTUuMmE0Ni41NDU0NTUgNDYuNTQ1NDU1IDAgMSAxLTY1Ljg2MTgxOCA2NS44MTUyNzNMNTEyIDU3Ny44NjE4MThsLTExNS4yIDExNS4yYTQ2LjU0NTQ1NSA0Ni41NDU0NTUgMCAxIDEtNjUuODE1MjczLTY1Ljg2MTgxOEw0NDYuMTM4MTgyIDUxMmwtMTE1LjItMTE1LjJhNDYuNTQ1NDU1IDQ2LjU0NTQ1NSAwIDEgMSA2NS44NjE4MTgtNjUuODE1MjczeiIgcC1pZD0iODY3NiIgZmlsbD0iIzcwNzA3MCI+PC9wYXRoPjwvc3ZnPg==",alt:"关闭"}),s("img",{onClick:t[2]||(t[2]=(...M)=>a.handleRefreshEvent&&a.handleRefreshEvent(...M)),src:"data:image/svg+xml;base64,PHN2ZyB0PSIxNjI2NjE0NDk5NjM4IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEzNjAiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNMTg3LjQ1NiA0MjUuMDI0YTMzNiAzMzYgMCAwIDAgMzY4LjM4NCA0MjAuMjI0IDQ4IDQ4IDAgMCAxIDEyLjU0NCA5NS4xNjggNDMyIDQzMiAwIDAgMS00NzMuNjY0LTU0MC4xNmwtNTcuMjgtMTUuMzZhMTIuOCAxMi44IDAgMCAxLTYuMjcyLTIwLjkyOGwxNTkuMTY4LTE3OS40NTZhMTIuOCAxMi44IDAgMCAxIDIyLjE0NCA1Ljg4OGw0OC4wNjQgMjM1LjA3MmExMi44IDEyLjggMCAwIDEtMTUuODA4IDE0LjkxMmwtNTcuMjgtMTUuMzZ6TTgzNi40OCA1OTkuMDRhMzM2IDMzNiAwIDAgMC0zNjguMzg0LTQyMC4yMjQgNDggNDggMCAxIDEtMTIuNTQ0LTk1LjE2OCA0MzIgNDMyIDAgMCAxIDQ3My42NjQgNTQwLjE2bDU3LjI4IDE1LjM2YTEyLjggMTIuOCAwIDAgMSA2LjI3MiAyMC45MjhsLTE1OS4xNjggMTc5LjQ1NmExMi44IDEyLjggMCAwIDEtMjIuMTQ0LTUuODg4bC00OC4wNjQtMjM1LjA3MmExMi44IDEyLjggMCAwIDEgMTUuODA4LTE0LjkxMmw1Ny4yOCAxNS4zNnoiIGZpbGw9IiM3MDcwNzAiIHAtaWQ9IjEzNjEiPjwvcGF0aD48L3N2Zz4=",alt:"刷新"})]),s("div",fe,[s("button",{onClick:t[3]||(t[3]=(...M)=>a.handleConfirmEvent&&a.handleConfirmEvent(...M))},"确认")])])])}const be=k(we,[["render",ve]]),_e={name:"GoCaptchaBtn",components:{GoCaptcha:be},props:{modelValue:{type:String,default:"default",validator:e=>["default","check","error","over","success"].indexOf(e)>-1},width:String,height:String,maxDot:{type:Number,default:5}},emits:["update:modelValue","handleConfirm"],data(){return{popoverVisible:!1,captStatus:"default",captchaData:{captBase64:"",captThumbBase64:"",captKey:"",captStatus:"default"}}},watch:{popoverVisible(e){e?this.captStatus="check":this.captStatus!=="success"&&(this.captStatus="default")},modelValue(e){window.console.log(e),this.captStatus!=="check"&&(this.captStatus=e),(e==="over"||e==="success")&&setTimeout(()=>{this.popoverVisible=!1},0)},captStatus(e){e!=="check"&&this.value!==e&&this.$emit("update:modelValue",e)}},computed:{style(){return`width:${this.width}; height:${this.height};`},activeClass(){return`wg-cap-active__${this.captStatus}`}},methods:{handleBtnEvent(){this.popoverVisible=!1,setTimeout(()=>{this.popoverVisible=!0,this.handleRefreshEvent()},200)},handleRefreshEvent(){this.captStatus="check",this.captchaData.captBase64="",this.captchaData.captThumbBase64="",this.captchaData.captKey="",Le().then(e=>{e.code===0&&(this.captchaData.captBase64=e.data.img||"",this.captchaData.captThumbBase64=e.data.thumb||"",this.captchaData.captKey=e.data.key||"")})},handleConfirmEvent(e){if(e.length<=0){B.error("请进行人机验证再操作");return}const t=btoa(encodeURIComponent(JSON.stringify(e)));ye({key:this.captchaData.captKey,dots:t}).then(o=>{o.code===0&&(B.success("人机验证成功"),this.captStatus="success",this.popoverVisible=!1,this.$emit("handleConfirm",{key:this.captchaData.captKey,dots:t}))}).catch(o=>{window.console.log(o),this.captStatus="error"})},handleCloseEvent(){this.popoverVisible=!1}}},A=e=>(ee("data-v-53749b8b"),e=e(),te(),e),Oe=A(()=>s("div",{class:"wg-cap-state__inner"},[s("div",{class:"wg-cap-btn__ico wg-cap-btn__verify"},[s("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSLlm77lsYJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiCgkgdmlld0JveD0iMCAwIDIwMCAyMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIwMCAyMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojM0U3Q0ZGO30KCS5zdDF7ZmlsbDojRkZGRkZGO30KPC9zdHlsZT4KPGNpcmNsZSBjbGFzcz0ic3QwIiBjeD0iMTAwIiBjeT0iMTAwIiByPSI5Ni4zIi8+CjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xNDAuOCw2NC40bC0zOS42LTExLjloLTIuNEw1OS4yLDY0LjRjLTEuNiwwLjgtMi44LDIuNC0yLjgsNHYyNC4xYzAsMjUuMywxNS44LDQ1LjksNDIuMyw1NC42CgljMC40LDAsMC44LDAuNCwxLjIsMC40YzAuNCwwLDAuOCwwLDEuMi0wLjRjMjYuNS04LjcsNDIuMy0yOC45LDQyLjMtNTQuNlY2OC4zQzE0My41LDY2LjgsMTQyLjMsNjUuMiwxNDAuOCw2NC40eiIvPgo8L3N2Zz4K"})]),s("span",{class:"wg-cap-btn__text"},"点击按键进行人机验证")],-1)),Ye=[Oe],Be={key:1,onClick:()=>!1,class:"wg-cap-state__check"},ke=A(()=>s("div",{class:"wg-cap-state__inner"},[s("div",{class:"wg-cap-btn__ico"},[s("img",{src:"data:image/svg+xml;base64,PHN2ZyB0PSIxNjI3MDU1NTg2NTk0IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjEyMTEiIHdpZHRoPSIyMDAiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNMTIwLjI1OTQ1NiA1MTIuMDAxMDIzbS0xMTcuOTIzNzYgMGExMTUuMjM4IDExNS4yMzggMCAxIDAgMjM1Ljg0NzUxOSAwIDExNS4yMzggMTE1LjIzOCAwIDEgMC0yMzUuODQ3NTE5IDBaIiBwLWlkPSIxMjEyIiBmaWxsPSIjZmZhMDAwIj48L3BhdGg+PHBhdGggZD0iTTUxMS45OTk0ODggNTEyLjAwMTAyM20tMTE3LjkyMTcxMyAwYTExNS4yMzYgMTE1LjIzNiAwIDEgMCAyMzUuODQzNDI2IDAgMTE1LjIzNiAxMTUuMjM2IDAgMSAwLTIzNS44NDM0MjYgMFoiIHAtaWQ9IjEyMTMiIGZpbGw9IiNmZmEwMDAiPjwvcGF0aD48cGF0aCBkPSJNOTAzLjczOTUyMSA1MTIuMDAxMDIzbS0xMTcuOTIzNzYgMGExMTUuMjM4IDExNS4yMzggMCAxIDAgMjM1Ljg0NzUxOSAwIDExNS4yMzggMTE1LjIzOCAwIDEgMC0yMzUuODQ3NTE5IDBaIiBwLWlkPSIxMjE0IiBmaWxsPSIjZmZhMDAwIj48L3BhdGg+PC9zdmc+",alt:""})]),s("span",{class:"wg-cap-btn__text"},"正在进行人机验证...")],-1)),Ze=[ke],Ue=A(()=>s("div",{class:"wg-cap-state__inner"},[s("div",{class:"wg-cap-btn__ico"},[s("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMDAgMjAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0VENDYzMDt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xODQsMjYuNkwxMDIuNCwyLjFoLTQuOUwxNiwyNi42Yy0zLjMsMS42LTUuNyw0LjktNS43LDguMnY0OS44YzAsNTIuMiwzMi42LDk0LjcsODcuMywxMTIuNgoJYzAuOCwwLDEuNiwwLjgsMi40LDAuOHMxLjYsMCwyLjQtMC44YzU0LjctMTgsODcuMy01OS42LDg3LjMtMTEyLjZWMzQuN0MxODkuOCwzMS41LDE4Ny4zLDI4LjIsMTg0LDI2LjZ6IE0xMzQuNSwxMjMuMQoJYzMuMSwzLjEsMy4xLDguMiwwLDExLjNjLTEuNiwxLjYtMy42LDIuMy01LjcsMi4zcy00LjEtMC44LTUuNy0yLjNMMTAwLDExMS4zbC0yMy4xLDIzLjFjLTEuNiwxLjYtMy42LDIuMy01LjcsMi4zCgljLTIsMC00LjEtMC44LTUuNy0yLjNjLTMuMS0zLjEtMy4xLTguMiwwLTExLjNMODguNywxMDBMNjUuNSw3Ni45Yy0zLjEtMy4xLTMuMS04LjIsMC0xMS4zYzMuMS0zLjEsOC4yLTMuMSwxMS4zLDBMMTAwLDg4LjcKCWwyMy4xLTIzLjFjMy4xLTMuMSw4LjItMy4xLDExLjMsMGMzLjEsMy4xLDMuMSw4LjIsMCwxMS4zTDExMS4zLDEwMEwxMzQuNSwxMjMuMXoiLz4KPC9zdmc+Cg==",alt:"失败"})]),s("span",null,[v("人机验证失败 "),s("em",null,"点击重试")])],-1)),Pe=[Ue],Ge=A(()=>s("div",{class:"wg-cap-state__inner"},[s("div",{class:"wg-cap-btn__ico"},[s("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMDAgMjAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0VENDYzMDt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xODQsMjYuNkwxMDIuNCwyLjFoLTQuOUwxNiwyNi42Yy0zLjMsMS42LTUuNyw0LjktNS43LDguMnY0OS44YzAsNTIuMiwzMi42LDk0LjcsODcuMywxMTIuNgoJYzAuOCwwLDEuNiwwLjgsMi40LDAuOHMxLjYsMCwyLjQtMC44YzU0LjctMTgsODcuMy01OS42LDg3LjMtMTEyLjZWMzQuN0MxODkuOCwzMS41LDE4Ny4zLDI4LjIsMTg0LDI2LjZ6IE0xMzQuNSwxMjMuMQoJYzMuMSwzLjEsMy4xLDguMiwwLDExLjNjLTEuNiwxLjYtMy42LDIuMy01LjcsMi4zcy00LjEtMC44LTUuNy0yLjNMMTAwLDExMS4zbC0yMy4xLDIzLjFjLTEuNiwxLjYtMy42LDIuMy01LjcsMi4zCgljLTIsMC00LjEtMC44LTUuNy0yLjNjLTMuMS0zLjEtMy4xLTguMiwwLTExLjNMODguNywxMDBMNjUuNSw3Ni45Yy0zLjEtMy4xLTMuMS04LjIsMC0xMS4zYzMuMS0zLjEsOC4yLTMuMSwxMS4zLDBMMTAwLDg4LjcKCWwyMy4xLTIzLjFjMy4xLTMuMSw4LjItMy4xLDExLjMsMGMzLjEsMy4xLDMuMSw4LjIsMCwxMS4zTDExMS4zLDEwMEwxMzQuNSwxMjMuMXoiLz4KPC9zdmc+Cg==",alt:"失败"})]),s("span",null,[v("点击次数过多 "),s("em",null,"点击重试")])],-1)),Qe=[Ge],He={key:4,onClick:()=>!1,class:"wg-cap-state__success"},We=A(()=>s("div",{class:"wg-cap-state__inner"},[s("div",{class:"wg-cap-btn__ico"},[s("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAyMDAgMjAwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMDAgMjAwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6IzVFQUEyRjt9Cjwvc3R5bGU+CjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xODMuMywyNy4yTDEwMi40LDIuOWgtNC45TDE2LjcsMjcuMkMxMy40LDI4LjgsMTEsMzIsMTEsMzUuM3Y0OS40YzAsNTEuOCwzMi40LDkzLjksODYuNiwxMTEuNwoJYzAuOCwwLDEuNiwwLjgsMi40LDAuOGMwLjgsMCwxLjYsMCwyLjQtMC44YzU0LjItMTcuOCw4Ni42LTU5LjEsODYuNi0xMTEuN1YzNS4zQzE4OSwzMiwxODYuNiwyOC44LDE4My4zLDI3LjJ6IE0xNDYuMSw4MS40CglsLTQ4LjUsNDguNWMtMS42LDEuNi0zLjIsMi40LTUuNywyLjRjLTIuNCwwLTQtMC44LTUuNy0yLjRMNjIsMTA1LjdjLTMuMi0zLjItMy4yLTguMSwwLTExLjNjMy4yLTMuMiw4LjEtMy4yLDExLjMsMGwxOC42LDE4LjYKCWw0Mi45LTQyLjljMy4yLTMuMiw4LjEtMy4yLDExLjMsMEMxNDkuNCw3My4zLDE0OS40LDc4LjIsMTQ2LjEsODEuNEwxNDYuMSw4MS40eiIvPgo8L3N2Zz4K",alt:"成功"})]),s("span",null,"人机验证已通过")],-1)),Re=[We];function Ve(e,t,o,p,i,a){const M=m("go-captcha"),D=m("el-popover");return u(),j("div",{class:"wg-cap-btn",style:Y(a.style)},[s("div",{class:G(["wg-cap-btn__inner",a.activeClass])},[n(D,{visible:i.popoverVisible,placement:"top",width:"330px",onHide:a.handleCloseEvent,trigger:"click"},{reference:c(()=>[i.captStatus==="default"?(u(),j("div",{key:0,onClick:t[1]||(t[1]=(...d)=>a.handleBtnEvent&&a.handleBtnEvent(...d)),class:"wg-cap-state__default"},Ye)):N("",!0),i.captStatus==="check"?(u(),j("div",Be,Ze)):N("",!0),i.captStatus==="error"?(u(),j("div",{key:2,onClick:t[2]||(t[2]=(...d)=>a.handleBtnEvent&&a.handleBtnEvent(...d)),class:"wg-cap-state__error"},Pe)):N("",!0),i.captStatus==="over"?(u(),j("div",{key:3,onClick:t[3]||(t[3]=(...d)=>a.handleBtnEvent&&a.handleBtnEvent(...d)),class:"wg-cap-state__over"},Qe)):N("",!0),i.captStatus==="success"?(u(),j("div",He,Re)):N("",!0)]),default:c(()=>[n(M,{modelValue:i.popoverVisible,"onUpdate:modelValue":t[0]||(t[0]=d=>i.popoverVisible=d),width:"300px",height:"240px","max-dot":o.maxDot,"image-base64":i.captchaData.captBase64,"thumb-base64":i.captchaData.captThumbBase64,onClose:a.handleCloseEvent,onRefresh:a.handleRefreshEvent,onConfirm:a.handleConfirmEvent},null,8,["modelValue","max-dot","image-base64","thumb-base64","onClose","onRefresh","onConfirm"])]),_:1},8,["visible","onHide"])],2)],4)}const Je=k(_e,[["render",Ve],["__scopeId","data-v-53749b8b"]]),Xe={class:"login-content-code"},Fe=["src"],Ke=se({name:"loginAccount",__name:"account",setup(e){const{t}=ue.useI18n(),{proxy:o}=ce(),p=ge(),{themeConfig:i}=Ie(p),a=ne(),M=le(),D=O(null),d=O("default"),z=O(0),r=ae({isShowPassword:!1,ruleForm:{username:"admin",password:"",verifyCode:"",verifyKey:""},formRules:{username:[{required:!0,trigger:"blur",message:"用户名不能为空"}],password:[{required:!0,trigger:"blur",message:"密码不能为空"}]},loading:{signIn:!1},captchaSrc:""}),{isShowPassword:S,ruleForm:T,formRules:Q,loading:H,captchaSrc:W}=ie(r);oe(()=>{b()});const b=()=>{pe().then(l=>{r.captchaSrc=l.data.img,r.ruleForm.verifyKey=l.data.key,z.value=l.data.verifyStatus})},R=Me(()=>de(new Date)),_=async()=>{if(r.loading.signIn)return;const l=g(D);l&&l.validate(I=>{I&&(r.loading.signIn=!0,De(r.ruleForm).then(async y=>{const L=y.data.userInfo;L.avatar=o.getUpFileUrl(L.avatar),f.set("token",y.data.token),f.set("userInfo",L),f.set("userMenu",y.data.menuList),f.set("permissions",y.data.permissions),re.set("username",r.ruleForm.username),i.value.isRequestRoutes?(await je(),Z()):(await me(),Z())}).catch(()=>{r.loading.signIn=!1,r.ruleForm.verifyKey="",r.ruleForm.verifyCode="",d.value="default",b()}))})},Z=()=>{var y,L,C,h;let l=R.value;(y=a.query)!=null&&y.redirect?M.push({path:(L=a.query)==null?void 0:L.redirect,query:Object.keys((C=a.query)==null?void 0:C.params).length>0?JSON.parse((h=a.query)==null?void 0:h.params):""}):M.push("/"),r.loading.signIn=!0;const I=t("message.signInText");B.success(`${l}，${I}`),Ne.start()},V=l=>{r.ruleForm.verifyCode=l.dots,r.ruleForm.verifyKey=l.key};return(l,I)=>{const y=m("ele-User"),L=m("el-icon"),C=m("el-input"),h=m("el-form-item"),J=m("ele-Unlock"),E=m("el-col"),X=m("ele-Position"),F=m("el-button"),K=m("el-form");return u(),x(K,{ref_key:"loginForm",ref:D,size:"large",class:"login-content-form",model:g(T),rules:g(Q)},{default:c(()=>[n(h,{class:"login-animation1",prop:"username"},{default:c(()=>[n(C,{type:"text",placeholder:l.$t("message.account.accountPlaceholder1"),modelValue:g(T).username,"onUpdate:modelValue":I[0]||(I[0]=w=>g(T).username=w),clearable:"",autocomplete:"off"},{prefix:c(()=>[n(L,{class:"el-input__icon"},{default:c(()=>[n(y)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1}),n(h,{class:"login-animation2",prop:"password"},{default:c(()=>[n(C,{type:g(S)?"text":"password",placeholder:l.$t("message.account.accountPlaceholder2"),modelValue:g(T).password,"onUpdate:modelValue":I[2]||(I[2]=w=>g(T).password=w),autocomplete:"off",onKeyup:U(_,["enter"])},{prefix:c(()=>[n(L,{class:"el-input__icon"},{default:c(()=>[n(J)]),_:1})]),suffix:c(()=>[s("i",{class:G(["iconfont el-input__icon login-content-password",g(S)?"icon-yincangmima":"icon-xianshimima"]),onClick:I[1]||(I[1]=w=>S.value=!g(S))},null,2)]),_:1},8,["type","placeholder","modelValue"])]),_:1}),n(h,{class:"login-animation3",prop:"verifyCode"},{default:c(()=>[n(E,{span:24},{default:c(()=>[z.value===2?(u(),x(Je,{key:0,class:"go-captcha-btn",modelValue:d.value,"onUpdate:modelValue":I[3]||(I[3]=w=>d.value=w),width:"100%",height:"50px",onHandleConfirm:V},null,8,["modelValue"])):N("",!0)]),_:1}),z.value===1?(u(),x(E,{key:0,span:15},{default:c(()=>[n(C,{type:"text",maxlength:"4",placeholder:l.$t("message.account.accountPlaceholder3"),modelValue:g(T).verifyCode,"onUpdate:modelValue":I[4]||(I[4]=w=>g(T).verifyCode=w),clearable:"",autocomplete:"off",onKeyup:U(_,["enter"])},{prefix:c(()=>[n(L,{class:"el-input__icon"},{default:c(()=>[n(X)]),_:1})]),_:1},8,["placeholder","modelValue"])]),_:1})):N("",!0),z.value===1?(u(),x(E,{key:1,span:1})):N("",!0),z.value===1?(u(),x(E,{key:2,span:8},{default:c(()=>[s("div",Xe,[s("img",{class:"login-content-code-img",onClick:b,width:"130",height:"38",src:g(W),style:{cursor:"pointer"}},null,8,Fe)])]),_:1})):N("",!0)]),_:1}),n(h,{class:"login-animation4"},{default:c(()=>[n(F,{type:"primary",class:"login-content-submit",round:"",onClick:_,loading:g(H).signIn},{default:c(()=>[s("span",null,P(l.$t("message.account.accountBtnText")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])}}}),Gt=k(Ke,[["__scopeId","data-v-568e3a8d"]]);export{Gt as default};
