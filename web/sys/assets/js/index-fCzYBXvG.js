import{d as ne,b as x,k as ie,Z as se,_ as re,j as pe,o as i,c as L,U as e,O as t,u as s,i as de,ai as n,aq as M,a as q,a9 as ue,F as me,a8 as ce,M as r,S as p,P as k,R as c,T as _e,V as fe,ae as ye}from"./@vue-CIdpUgdv.js";import{l as ge,d as ve}from"./sysNotice-C7br5zb9.js";import be from"./NoticeMessageEdit-5RVRSxpl.js";import{a as z,E as ke}from"./element-plus-BcbsnzDt.js";import{a as we}from"./index-Cf93PWEY.js";import"./index-1OT6ILAh.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@element-plus-jSNvwxF2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./@intlify-BrbEMGpa.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";const he={class:"system-sysNotice-container"},xe={class:"system-sysNotice-search mb15"},Ne=ne({name:"apiV1SystemSysNoticeList",__name:"index",setup(De){const{proxy:V}=de(),C=x(!1),R=x(),D=x(),I=x(!1),U=x(!0),E=x(!0);ie(()=>I.value===!1?"展开搜索":"收起搜索");const{notice_tag:S}=V.useDict("notice_tag"),y=se({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,id:void 0,title:void 0,type:void 0,tag:void 0,status:void 0,createdAt:void 0,dateRange:[]}}}),{tableData:d}=re(y);pe(()=>{O()});const O=()=>{w()},K=o=>{o&&(o.resetFields(),w())},w=()=>{C.value=!0,ge(y.tableData.param).then(o=>{let l=o.data.list??[];l.map(_=>{var g;_.createdBy=(g=_.createdUser)==null?void 0:g.userNickname}),y.tableData.data=l,y.tableData.total=o.data.total,C.value=!1})},j=o=>V.selectDictLabel(S.value,o.tag),Q=o=>{y.ids=o.map(l=>l.id),U.value=o.length!=1,E.value=!o.length},A=o=>{D.value.openDialog(),D.value.setType(o)},T=o=>{o||(o=y.tableData.data.find(l=>l.id===y.ids[0])),D.value.openDialog(ye(o))},$=o=>{let l="你确定要删除所选数据？",_=[];if(o?(l="此操作将永久删除数据，是否继续?",_=[o.id]):_=y.ids,_.length===0){z.error("请选择要删除的数据。");return}ke.confirm(l,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{ve(_).then(()=>{z.success("删除成功"),w()})}).catch(()=>{})};return(o,l)=>{const _=n("el-input"),g=n("el-form-item"),f=n("el-col"),N=n("el-option"),B=n("el-select"),Z=n("ele-Search"),v=n("el-icon"),b=n("el-button"),G=n("ele-Refresh"),F=n("el-row"),H=n("el-form"),P=n("ele-Plus"),J=n("ele-Edit"),W=n("ele-Delete"),u=n("el-table-column"),m=n("el-tag"),X=n("ele-EditPen"),Y=n("ele-DeleteFilled"),ee=n("el-table"),te=n("pagination"),ae=n("el-card"),h=M("auth"),le=M("loading");return i(),L("div",he,[e(ae,{shadow:"hover"},{default:t(()=>[q("div",xe,[e(H,{model:s(d).param,ref_key:"queryRef",ref:R,inline:!0,"label-width":"100px"},{default:t(()=>[e(F,null,{default:t(()=>[e(f,{span:5,class:"colBlock"},{default:t(()=>[e(g,{label:"标题",prop:"title"},{default:t(()=>[e(_,{modelValue:s(d).param.title,"onUpdate:modelValue":l[0]||(l[0]=a=>s(d).param.title=a),placeholder:"请输入标题",clearable:"",onKeyup:ue(w,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1}),e(f,{span:5,class:"colBlock"},{default:t(()=>[e(g,{label:"状态",prop:"status"},{default:t(()=>[e(B,{modelValue:s(d).param.status,"onUpdate:modelValue":l[1]||(l[1]=a=>s(d).param.status=a),placeholder:"请选择状态",clearable:"",style:{width:"160px"}},{default:t(()=>[e(N,{label:"正常",value:1}),e(N,{label:"停用",value:0})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:5,class:"colBlock"},{default:t(()=>[e(g,{label:"类型",prop:"type"},{default:t(()=>[e(B,{modelValue:s(d).param.type,"onUpdate:modelValue":l[2]||(l[2]=a=>s(d).param.type=a),placeholder:"请选择类型",clearable:"",style:{width:"160px"}},{default:t(()=>[e(N,{label:"通知",value:"1"}),e(N,{label:"公告",value:"2"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:5,class:"colBlock"},{default:t(()=>[e(g,{label:"标签",prop:"tag"},{default:t(()=>[e(B,{modelValue:s(d).param.tag,"onUpdate:modelValue":l[3]||(l[3]=a=>s(d).param.tag=a),placeholder:"请选择标签",clearable:"",style:{width:"160px"}},{default:t(()=>[(i(!0),L(me,null,ce(s(S),a=>(i(),r(N,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(f,{span:4,class:"colBlock"},{default:t(()=>[e(g,null,{default:t(()=>[e(b,{type:"primary",onClick:w},{default:t(()=>[e(v,null,{default:t(()=>[e(Z)]),_:1}),p(" 搜索 ")]),_:1}),e(b,{onClick:l[4]||(l[4]=a=>K(R.value))},{default:t(()=>[e(v,null,{default:t(()=>[e(G)]),_:1}),p(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),e(F,{gutter:10,class:"mb8"},{default:t(()=>[e(f,{span:1.5},{default:t(()=>[k((i(),r(b,{type:"primary",onClick:l[5]||(l[5]=a=>A(1))},{default:t(()=>[e(v,null,{default:t(()=>[e(P)]),_:1}),p(" 发通知 ")]),_:1})),[[h,"api/v1/system/sysNotice/noticeAdd"]])]),_:1}),e(f,{span:1.5},{default:t(()=>[k((i(),r(b,{type:"primary",onClick:l[6]||(l[6]=a=>A(2))},{default:t(()=>[e(v,null,{default:t(()=>[e(P)]),_:1}),p(" 发私信 ")]),_:1})),[[h,"api/v1/system/sysNotice/messageAdd"]])]),_:1}),e(f,{span:1.5},{default:t(()=>[k((i(),r(b,{type:"success",disabled:U.value,onClick:l[7]||(l[7]=a=>T(null))},{default:t(()=>[e(v,null,{default:t(()=>[e(J)]),_:1}),p(" 修改 ")]),_:1},8,["disabled"])),[[h,"api/v1/system/sysNotice/edit"]])]),_:1}),e(f,{span:1.5},{default:t(()=>[k((i(),r(b,{type:"danger",disabled:E.value,onClick:l[8]||(l[8]=a=>$(null))},{default:t(()=>[e(v,null,{default:t(()=>[e(W)]),_:1}),p(" 删除 ")]),_:1},8,["disabled"])),[[h,"api/v1/system/sysNotice/delete"]])]),_:1})]),_:1})]),k((i(),r(ee,{data:s(d).data,onSelectionChange:Q},{default:t(()=>[e(u,{type:"selection",width:"55",align:"center"}),e(u,{label:"ID",align:"center",prop:"id","min-width":"50px"}),e(u,{label:"标题",align:"left",prop:"title","min-width":"150px"}),e(u,{label:"类型",align:"center",prop:"type","min-width":"150px"},{default:t(a=>[a.row.type=="1"?(i(),r(m,{key:0,type:"warning"},{default:t(()=>[p("通知")]),_:1})):c("",!0),a.row.type=="2"?(i(),r(m,{key:1,type:"danger"},{default:t(()=>[p("私信")]),_:1})):c("",!0)]),_:1}),e(u,{label:"标签",align:"center",prop:"tag",formatter:j,"min-width":"80px"},{default:t(a=>[a.row.tag==0?(i(),r(m,{key:0,type:"info"},{default:t(()=>[p("无标签")]),_:1})):c("",!0),a.row.tag==1?(i(),r(m,{key:1,type:"success"},{default:t(()=>[p("提醒")]),_:1})):c("",!0),a.row.tag==2?(i(),r(m,{key:2,type:"success"},{default:t(()=>[p("一般")]),_:1})):c("",!0),a.row.tag==3?(i(),r(m,{key:3,type:"warning"},{default:t(()=>[p("次要")]),_:1})):c("",!0),a.row.tag==4?(i(),r(m,{key:4,type:"danger"},{default:t(()=>[p("重要")]),_:1})):c("",!0),a.row.tag==5?(i(),r(m,{key:5,type:"danger"},{default:t(()=>[p("紧急")]),_:1})):c("",!0)]),_:1}),e(u,{label:"备注",align:"center",prop:"remark","min-width":"150px"}),e(u,{label:"阅读次数",align:"center",prop:"clickNumber","min-width":"150px"}),e(u,{label:"排序",align:"center",prop:"sort","min-width":"50px"}),e(u,{label:"状态",align:"center",prop:"status","min-width":"80px"},{default:t(a=>[a.row.status==1?(i(),r(m,{key:0,type:"success"},{default:t(()=>[p("正常")]),_:1})):c("",!0),a.row.status==0?(i(),r(m,{key:1,type:"danger"},{default:t(()=>[p("停用")]),_:1})):c("",!0)]),_:1}),e(u,{label:"发送时间",align:"center",prop:"createdAt","min-width":"100px"},{default:t(a=>[q("span",null,_e(s(V).parseTime(a.row.createdAt,"{y}-{m}-{d}")),1)]),_:1}),e(u,{label:"操作",align:"center","class-name":"small-padding","min-width":"160px",fixed:"right"},{default:t(a=>[k((i(),r(b,{type:"primary",link:"",onClick:oe=>T(a.row)},{default:t(()=>[e(v,null,{default:t(()=>[e(X)]),_:1}),p(" 修改 ")]),_:2},1032,["onClick"])),[[h,"api/v1/system/sysNotice/edit"]]),k((i(),r(b,{type:"primary",link:"",onClick:oe=>$(a.row)},{default:t(()=>[e(v,null,{default:t(()=>[e(Y)]),_:1}),p(" 删除 ")]),_:2},1032,["onClick"])),[[h,"api/v1/system/sysNotice/delete"]])]),_:1})]),_:1},8,["data"])),[[le,C.value]]),k(e(te,{total:s(d).total,page:s(d).param.pageNum,"onUpdate:page":l[9]||(l[9]=a=>s(d).param.pageNum=a),limit:s(d).param.pageSize,"onUpdate:limit":l[10]||(l[10]=a=>s(d).param.pageSize=a),onPagination:w},null,8,["total","page","limit"]),[[fe,s(d).total>0]])]),_:1}),e(be,{ref_key:"editRef",ref:D,tagOptions:s(S),onSysNoticeList:w},null,8,["tagOptions"])])}}}),vt=we(Ne,[["__scopeId","data-v-c4b42843"]]);export{vt as default};
