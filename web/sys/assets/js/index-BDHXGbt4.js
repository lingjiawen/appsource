import{d as he,b as C,k as De,Z as xe,_ as Ve,j as Ue,o as f,c as J,U as e,O as t,u as o,i as Be,ai as n,aq as W,a as O,a9 as ee,I as h,S as r,T as V,P as m,V as D,F as Ye,a8 as Ee,M as v,ae as te}from"./@vue-CIdpUgdv.js";import{l as Oe,c as Me,d as Ne}from"./asRedeemCode-Cs__bbJp.js";import Se from"./add-DVkMjR85.js";import $e from"./edit-BnAxsJk0.js";import Le from"./detail-QjYPZ6OH.js";import{l as Te,d as He}from"./index-8l9Z7Oa5.js";import{a as le,E as Fe}from"./element-plus-BcbsnzDt.js";import{a as Pe}from"./index-Cf93PWEY.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@element-plus-jSNvwxF2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./@intlify-BrbEMGpa.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";const Ie={class:"appsource-asRedeemCode-container"},ze={class:"appsource-asRedeemCode-search mb15"},qe=he({name:"apiV1AppsourceAsRedeemCodeList",__name:"index",setup(Ke){const{proxy:x}=Be(),U=C(!1),B=C(),M=C(),N=C(),S=C(),$=C(),c=C(!1),L=C(!0),T=C(!0),H=De(()=>c.value===!1?"展开搜索":"收起搜索"),{appsource_redeem_code_type:R,sys_normal_disable:Y}=x.useDict("appsource_redeem_code_type","sys_normal_disable"),y=xe({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,id:void 0,code:void 0,udid:void 0,type:void 0,active:void 0,activeAt:void 0,createdBy:void 0,createdAt:void 0,dateRange:[]}}}),{tableData:d}=Ve(y);Ue(()=>{ae()});const ae=()=>{_()},F=p=>{p&&(p.resetFields(),_())},_=()=>{U.value=!0,Oe(y.tableData.param).then(p=>{let l=p.data.list??[];y.tableData.data=l,y.tableData.total=p.data.total,U.value=!1})},P=()=>{c.value=!c.value},oe=p=>x.selectDictLabel(R.value,p.type),ne=p=>{Me(p.id,p.active).catch(()=>{setTimeout(()=>{p.active=!p.active},300)})},pe=p=>{y.ids=p.map(l=>l.id),L.value=p.length!=1,T.value=!p.length},de=()=>{N.value.openDialog()},I=p=>{p||(p=y.tableData.data.find(l=>l.id===y.ids[0])),M.value.openDialog(te(p))},z=p=>{let l="你确定要删除所选数据？",w=[];if(p?(l="此操作将永久删除数据，是否继续?",w=[p.id]):w=y.ids,w.length===0){le.error("请选择要删除的数据。");return}Fe.confirm(l,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{Ne(w).then(()=>{le.success("删除成功"),_()})}).catch(()=>{})},ie=p=>{S.value.openDialog(te(p))},se=()=>{He("/api/v1/appsource/asRedeemCode/export",y.tableData.param,"get")},re=()=>{$.value.open()};return(p,l)=>{const w=n("el-input"),b=n("el-form-item"),u=n("el-col"),E=n("el-option"),q=n("el-select"),K=n("ele-Search"),i=n("el-icon"),s=n("el-button"),j=n("ele-Refresh"),G=n("ele-ArrowUp"),Q=n("ele-ArrowDown"),X=n("el-date-picker"),Z=n("el-row"),me=n("el-form"),ue=n("ele-Plus"),ce=n("ele-Edit"),_e=n("ele-Delete"),fe=n("ele-Download"),ve=n("ele-Upload"),g=n("el-table-column"),ye=n("el-switch"),ge=n("ele-View"),Ce=n("ele-EditPen"),be=n("ele-DeleteFilled"),ke=n("el-table"),we=n("pagination"),Re=n("el-card"),k=W("auth"),Ae=W("loading");return f(),J("div",Ie,[e(Re,{shadow:"hover"},{default:t(()=>[O("div",ze,[e(me,{model:o(d).param,ref_key:"queryRef",ref:B,inline:!0,"label-width":"100px"},{default:t(()=>[e(Z,null,{default:t(()=>[e(u,{span:8,class:"colBlock"},{default:t(()=>[e(b,{label:"设备码",prop:"udid"},{default:t(()=>[e(w,{modelValue:o(d).param.udid,"onUpdate:modelValue":l[0]||(l[0]=a=>o(d).param.udid=a),placeholder:"请输入设备码",clearable:"",onKeyup:ee(_,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:8,class:"colBlock"},{default:t(()=>[e(b,{label:"兑换码",prop:"code"},{default:t(()=>[e(w,{modelValue:o(d).param.code,"onUpdate:modelValue":l[1]||(l[1]=a=>o(d).param.code=a),placeholder:"请输入兑换码",clearable:"",onKeyup:ee(_,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{span:8,class:"colBlock"},{default:t(()=>[e(b,{label:"是否激活",prop:"active"},{default:t(()=>[e(q,{modelValue:o(d).param.active,"onUpdate:modelValue":l[2]||(l[2]=a=>o(d).param.active=a),placeholder:"选择是否激活",style:{width:"130px"}},{default:t(()=>[e(E,{value:"1",label:"激活"}),e(E,{value:"0",label:"未激活"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{span:8,class:h(c.value?"colNone":"colBlock")},{default:t(()=>[e(b,null,{default:t(()=>[e(s,{type:"primary",onClick:_},{default:t(()=>[e(i,null,{default:t(()=>[e(K)]),_:1}),r("搜索")]),_:1}),e(s,{onClick:l[3]||(l[3]=a=>F(B.value))},{default:t(()=>[e(i,null,{default:t(()=>[e(j)]),_:1}),r("重置")]),_:1}),e(s,{type:"primary",link:"",onClick:P},{default:t(()=>[r(V(H.value)+" ",1),m(e(i,null,{default:t(()=>[e(G)]),_:1},512),[[D,c.value]]),m(e(i,null,{default:t(()=>[e(Q)]),_:1},512),[[D,!c.value]])]),_:1})]),_:1})]),_:1},8,["class"]),e(u,{span:8,class:h(c.value?"colBlock":"colNone")},{default:t(()=>[e(b,{label:"类型",prop:"type"},{default:t(()=>[e(q,{filterable:"",modelValue:o(d).param.type,"onUpdate:modelValue":l[4]||(l[4]=a=>o(d).param.type=a),placeholder:"请选择类型",clearable:"",style:{width:"200px"}},{default:t(()=>[(f(!0),J(Ye,null,Ee(o(R),a=>(f(),v(E,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(u,{span:8,class:h(c.value?"colBlock":"colNone")},{default:t(()=>[e(b,{label:"激活时间",prop:"activeAt"},{default:t(()=>[e(X,{clearable:"",style:{width:"200px"},modelValue:o(d).param.activeAt,"onUpdate:modelValue":l[5]||(l[5]=a=>o(d).param.activeAt=a),format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",placeholder:"选择激活时间"},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(u,{span:8,class:h(c.value?"colBlock":"colNone")},{default:t(()=>[e(b,{label:"生成时间",prop:"createdAt"},{default:t(()=>[e(X,{clearable:"",style:{width:"200px"},modelValue:o(d).param.createdAt,"onUpdate:modelValue":l[6]||(l[6]=a=>o(d).param.createdAt=a),format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",placeholder:"选择生成时间"},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(u,{span:8,class:h(c.value?"colBlock":"colNone")},{default:t(()=>[e(b,null,{default:t(()=>[e(s,{type:"primary",onClick:_},{default:t(()=>[e(i,null,{default:t(()=>[e(K)]),_:1}),r("搜索")]),_:1}),e(s,{onClick:l[7]||(l[7]=a=>F(B.value))},{default:t(()=>[e(i,null,{default:t(()=>[e(j)]),_:1}),r("重置")]),_:1}),e(s,{type:"primary",link:"",onClick:P},{default:t(()=>[r(V(H.value)+" ",1),m(e(i,null,{default:t(()=>[e(G)]),_:1},512),[[D,c.value]]),m(e(i,null,{default:t(()=>[e(Q)]),_:1},512),[[D,!c.value]])]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["model"]),e(Z,{gutter:10,class:"mb8"},{default:t(()=>[e(u,{span:1.5},{default:t(()=>[m((f(),v(s,{type:"primary",onClick:de},{default:t(()=>[e(i,null,{default:t(()=>[e(ue)]),_:1}),r("新增")]),_:1})),[[k,"api/v1/appsource/asRedeemCode/add"]])]),_:1}),e(u,{span:1.5},{default:t(()=>[m((f(),v(s,{type:"success",disabled:L.value,onClick:l[8]||(l[8]=a=>I(null))},{default:t(()=>[e(i,null,{default:t(()=>[e(ce)]),_:1}),r("修改")]),_:1},8,["disabled"])),[[k,"api/v1/appsource/asRedeemCode/edit"]])]),_:1}),e(u,{span:1.5},{default:t(()=>[m((f(),v(s,{type:"danger",disabled:T.value,onClick:l[9]||(l[9]=a=>z(null))},{default:t(()=>[e(i,null,{default:t(()=>[e(_e)]),_:1}),r("删除")]),_:1},8,["disabled"])),[[k,"api/v1/appsource/asRedeemCode/delete"]])]),_:1}),e(u,{span:1.5},{default:t(()=>[m((f(),v(s,{type:"warning",onClick:l[10]||(l[10]=a=>se())},{default:t(()=>[e(i,null,{default:t(()=>[e(fe)]),_:1}),r("导出Excel")]),_:1})),[[k,"api/v1/appsource/asRedeemCode/export"]])]),_:1}),e(u,{span:1.5},{default:t(()=>[m((f(),v(s,{type:"success",onClick:l[11]||(l[11]=a=>re())},{default:t(()=>[e(i,null,{default:t(()=>[e(ve)]),_:1}),r("导入Excel")]),_:1})),[[k,"api/v1/appsource/asRedeemCode/import"]])]),_:1})]),_:1})]),m((f(),v(ke,{data:o(d).data,onSelectionChange:pe},{default:t(()=>[e(g,{type:"selection",width:"55",align:"center"}),e(g,{label:"ID",align:"center",prop:"id","min-width":"150px"}),e(g,{label:"兑换码",align:"center",prop:"code","min-width":"150px"}),e(g,{label:"设备码",align:"center",prop:"udid","min-width":"150px"}),e(g,{label:"类型",align:"center",prop:"type",formatter:oe,"min-width":"150px"}),e(g,{label:"是否激活",align:"center",prop:"active","min-width":"150px"},{default:t(a=>[e(ye,{modelValue:a.row.active,"onUpdate:modelValue":A=>a.row.active=A,"active-value":1,"inactive-value":0,class:"ml-2",onChange:A=>ne(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(g,{label:"激活时间",align:"center",prop:"activeAt","min-width":"150px"},{default:t(a=>[O("span",null,V(o(x).parseTime(a.row.activeAt,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:1}),e(g,{label:"生成时间",align:"center",prop:"createdAt","min-width":"150px"},{default:t(a=>[O("span",null,V(o(x).parseTime(a.row.createdAt,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:1}),e(g,{label:"操作",align:"center","class-name":"small-padding","min-width":"200px",fixed:"right"},{default:t(a=>[m((f(),v(s,{type:"primary",link:"",onClick:A=>ie(a.row)},{default:t(()=>[e(i,null,{default:t(()=>[e(ge)]),_:1}),r("详情")]),_:2},1032,["onClick"])),[[k,"api/v1/appsource/asRedeemCode/get"]]),m((f(),v(s,{type:"primary",link:"",onClick:A=>I(a.row)},{default:t(()=>[e(i,null,{default:t(()=>[e(Ce)]),_:1}),r("修改")]),_:2},1032,["onClick"])),[[k,"api/v1/appsource/asRedeemCode/edit"]]),m((f(),v(s,{type:"primary",link:"",onClick:A=>z(a.row)},{default:t(()=>[e(i,null,{default:t(()=>[e(be)]),_:1}),r("删除")]),_:2},1032,["onClick"])),[[k,"api/v1/appsource/asRedeemCode/delete"]])]),_:1})]),_:1},8,["data"])),[[Ae,U.value]]),m(e(we,{total:o(d).total,page:o(d).param.pageNum,"onUpdate:page":l[12]||(l[12]=a=>o(d).param.pageNum=a),limit:o(d).param.pageSize,"onUpdate:limit":l[13]||(l[13]=a=>o(d).param.pageSize=a),onPagination:_},null,8,["total","page","limit"]),[[D,o(d).total>0]])]),_:1}),e($e,{ref_key:"editRef",ref:M,typeOptions:o(R),activeOptions:o(Y),onAsRedeemCodeList:_},null,8,["typeOptions","activeOptions"]),e(Se,{ref_key:"addRef",ref:N,typeOptions:o(R),activeOptions:o(Y),onAsRedeemCodeList:_},null,8,["typeOptions","activeOptions"]),e(Le,{ref_key:"detailRef",ref:S,typeOptions:o(R),activeOptions:o(Y),onAsRedeemCodeList:_},null,8,["typeOptions","activeOptions"]),e(Te,{ref_key:"loadExcelAsRedeemCodeRef",ref:$,onGetList:_,upUrl:"api/v1/appsource/asRedeemCode/import",tplUrl:"/api/v1/appsource/asRedeemCode/excelTemplate"},null,512)])}}}),Ft=Pe(qe,[["__scopeId","data-v-c8302861"]]);export{Ft as default};
