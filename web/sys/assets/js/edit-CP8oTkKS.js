import{g as W,b as M,u as Q}from"./sysJob-C4O8EjPY.js";import{a as G}from"./element-plus-BcbsnzDt.js";import{d as z,b as B,Z,_ as H,o as p,c as b,U as e,O as o,u as a,D as K,ai as s,aq as X,P as Y,S as d,T as V,a as u,F as j,a8 as k,M as D}from"./@vue-CIdpUgdv.js";import{a as $}from"./index-Cf93PWEY.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@element-plus-jSNvwxF2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./@intlify-BrbEMGpa.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";const ee={class:"system-sysJob-edit"},oe={class:"cronExpression-rule"},le={class:"dialog-footer"},te=z({name:"apiV1SystemSysJobEdit",__name:"edit",props:{jobGroupOptions:{type:Array,default:()=>[]},misfirePolicyOptions:{type:Array,default:()=>[]},statusOptions:{type:Array,default:()=>[]}},emits:["sysJobList"],setup(v,{expose:I,emit:T}){const x=T,P=B(null);B();const n=Z({loading:!1,isShowDialog:!1,formData:{jobId:void 0,jobName:void 0,jobParams:void 0,jobGroup:void 0,invokeTarget:void 0,cronExpression:void 0,misfirePolicy:!1,concurrent:void 0,status:!1,createdBy:void 0,updatedBy:void 0,remark:void 0,createdAt:void 0,updatedAt:void 0,createdUser:{userNickname:""},updatedUser:{userNickname:""}},rules:{cronExpression:[{required:!0,message:"cron执行表达式不能为空",trigger:"blur"}],jobName:[{required:!0,message:"任务名称不能为空",trigger:"blur"}],invokeTarget:[{required:!0,message:"任务方法不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}]}}),{isShowDialog:g,formData:r,rules:w}=H(n);I({openDialog:c=>{O(),c&&W(c.jobId).then(t=>{const i=t.data;i.jobGroup=""+i.jobGroup,i.misfirePolicy=""+i.misfirePolicy,i.status=""+i.status,n.formData=i}),n.isShowDialog=!0}});const y=()=>{n.isShowDialog=!1},A=()=>{y()},F=()=>{const c=a(P);c&&c.validate(t=>{t&&(n.loading=!0,!n.formData.jobId||n.formData.jobId===0?M(n.formData).then(()=>{G.success("添加成功"),y(),x("sysJobList")}).finally(()=>{n.loading=!1}):Q(n.formData).then(()=>{G.success("修改成功"),y(),x("sysJobList")}).finally(()=>{n.loading=!1}))})},O=()=>{n.formData={jobId:void 0,jobName:void 0,jobParams:void 0,jobGroup:void 0,invokeTarget:void 0,cronExpression:void 0,misfirePolicy:!1,concurrent:void 0,status:!1,createdBy:void 0,updatedBy:void 0,remark:void 0,createdAt:void 0,updatedAt:void 0,createdUser:{userNickname:""},updatedUser:{userNickname:""}}};return(c,t)=>{const i=s("el-input"),m=s("el-form-item"),S=s("ele-QuestionFilled"),f=s("el-icon"),U=s("el-tooltip"),C=s("el-option"),h=s("el-select"),_=s("ele-WarningFilled"),N=s("el-radio"),E=s("el-radio-group"),q=s("el-form"),J=s("el-button"),L=s("el-dialog"),R=X("drag");return p(),b("div",ee,[e(L,{modelValue:a(g),"onUpdate:modelValue":t[8]||(t[8]=l=>K(g)?g.value=l:null),width:"769px","close-on-click-modal":!1,"destroy-on-close":!0},{header:o(()=>[Y((p(),b("div",null,[d(V((!a(r).jobId||a(r).jobId==0?"添加":"修改")+"定时任务"),1)])),[[R,[".system-sysJob-edit .el-dialog",".system-sysJob-edit .el-dialog__header"]]])]),footer:o(()=>[u("div",le,[e(J,{type:"primary",onClick:F},{default:o(()=>[d("确 定")]),_:1}),e(J,{onClick:A},{default:o(()=>[d("取 消")]),_:1})])]),default:o(()=>[e(q,{ref_key:"formRef",ref:P,model:a(r),rules:a(w),size:"default","label-width":"120px"},{default:o(()=>[e(m,{label:"任务名称",prop:"jobName"},{default:o(()=>[e(i,{modelValue:a(r).jobName,"onUpdate:modelValue":t[0]||(t[0]=l=>a(r).jobName=l),placeholder:"请输入任务名称"},null,8,["modelValue"])]),_:1}),e(m,{prop:"jobParams"},{label:o(()=>[u("span",null,[d(" 执行参数 "),e(U,{content:"以|分隔多个参数 示例：param1|param1；参数说明：支持字符串，布尔类型，长整型，浮点型，整型",placement:"top"},{default:o(()=>[e(f,null,{default:o(()=>[e(S)]),_:1})]),_:1})])]),default:o(()=>[e(i,{modelValue:a(r).jobParams,"onUpdate:modelValue":t[1]||(t[1]=l=>a(r).jobParams=l),placeholder:"请输入参数"},null,8,["modelValue"])]),_:1}),e(m,{label:"任务组名",prop:"jobGroup"},{default:o(()=>[e(h,{modelValue:a(r).jobGroup,"onUpdate:modelValue":t[2]||(t[2]=l=>a(r).jobGroup=l),placeholder:"请选择任务组名"},{default:o(()=>[(p(!0),b(j,null,k(v.jobGroupOptions,l=>(p(),D(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{prop:"invokeTarget"},{label:o(()=>[u("span",null,[d(" 任务方法 "),e(U,{content:"示例：demo1",placement:"top"},{default:o(()=>[e(f,null,{default:o(()=>[e(S)]),_:1})]),_:1})])]),default:o(()=>[e(i,{modelValue:a(r).invokeTarget,"onUpdate:modelValue":t[3]||(t[3]=l=>a(r).invokeTarget=l),placeholder:"请输入任务方法"},null,8,["modelValue"])]),_:1}),e(m,{label:"cron执行表达式",prop:"cronExpression"},{default:o(()=>[e(i,{modelValue:a(r).cronExpression,"onUpdate:modelValue":t[4]||(t[4]=l=>a(r).cronExpression=l),placeholder:"请输入cron执行表达式"},null,8,["modelValue"])]),_:1}),u("ul",oe,[u("li",null,[e(f,null,{default:o(()=>[e(_)]),_:1}),d(" */5 * * * * ? : 每隔5秒执行一次")]),u("li",null,[e(f,null,{default:o(()=>[e(_)]),_:1}),d(" 20 */1 * * * ? : 每隔1分钟执行一次")]),u("li",null,[e(f,null,{default:o(()=>[e(_)]),_:1}),d(" 30 0 23 * * ? : 每天23点执行一次")]),u("li",null,[e(f,null,{default:o(()=>[e(_)]),_:1}),d(" 0 0 1 * * ? : 每天凌晨1点执行一次")]),u("li",null,[e(f,null,{default:o(()=>[e(_)]),_:1}),d(" 0 0 1 1 * ? : 每月1号凌晨1点执行一次")])]),e(m,{label:"计划执行策略",prop:"misfirePolicy"},{default:o(()=>[e(E,{modelValue:a(r).misfirePolicy,"onUpdate:modelValue":t[5]||(t[5]=l=>a(r).misfirePolicy=l)},{default:o(()=>[(p(!0),b(j,null,k(v.misfirePolicyOptions,l=>(p(),D(N,{key:l.value,value:l.value},{default:o(()=>[d(V(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"状态",prop:"status"},{default:o(()=>[e(E,{modelValue:a(r).status,"onUpdate:modelValue":t[6]||(t[6]=l=>a(r).status=l)},{default:o(()=>[(p(!0),b(j,null,k(v.statusOptions,l=>(p(),D(N,{key:l.value,value:l.value},{default:o(()=>[d(V(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(m,{label:"备注信息",prop:"remark"},{default:o(()=>[e(i,{modelValue:a(r).remark,"onUpdate:modelValue":t[7]||(t[7]=l=>a(r).remark=l),placeholder:"请输入备注信息"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),He=$(te,[["__scopeId","data-v-53d7f8d2"]]);export{He as default};
