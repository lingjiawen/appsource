import{s as m,a as R}from"./index-Cf93PWEY.js";import{a as b}from"./element-plus-BcbsnzDt.js";import{d as B,b as y,Z as O,_ as T,o as D,c as h,U as s,O as r,u as e,D as j,ai as i,aq as A,P as M,S as _,T as S,a as F}from"./@vue-CIdpUgdv.js";function ee(n){return m({url:"/api/v1/system/post/list",method:"get",params:n})}function W(n){return m({url:"/api/v1/system/post/add",method:"post",data:n})}function Z(n){return m({url:"/api/v1/system/post/edit",method:"put",data:n})}function te(n){return m({url:"/api/v1/system/post/delete",method:"delete",data:{ids:n}})}const $={class:"system-edit-post-container"},G={class:"dialog-footer"},H=B({name:"systemEditPost",__name:"editPost",emits:["getPostList"],setup(n,{expose:C,emit:P}){const g=P,v=y(null);y();const t=O({loading:!1,isShowDialog:!1,formData:{postId:0,postCode:"",postName:"",postSort:0,status:1,remark:""},rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]},menuExpand:!1,menuNodeAll:!1,menuCheckStrictly:!1,menuProps:{children:"children",label:"title"}}),{isShowDialog:p,formData:l,loading:x,rules:k}=T(t);C({openDialog:d=>{E(),d&&(t.formData=d),t.isShowDialog=!0}});const f=()=>{t.isShowDialog=!1},N=()=>{f()},w=()=>{const d=e(v);d&&d.validate(o=>{o&&(t.loading=!0,t.formData.postId===0?W(t.formData).then(()=>{b.success("岗位添加成功"),f(),g("getPostList")}).finally(()=>{t.loading=!1}):Z(t.formData).then(()=>{b.success("岗位修改成功"),f(),g("getPostList")}).finally(()=>{t.loading=!1}))})},E=()=>{t.menuCheckStrictly=!1,t.menuExpand=!1,t.menuNodeAll=!1,t.formData={postId:0,postCode:"",postName:"",postSort:0,status:1,remark:""}};return(d,o)=>{const c=i("el-input"),u=i("el-form-item"),U=i("el-input-number"),I=i("el-switch"),q=i("el-form"),V=i("el-button"),z=i("el-dialog"),L=A("drag");return D(),h("div",$,[s(z,{modelValue:e(p),"onUpdate:modelValue":o[5]||(o[5]=a=>j(p)?p.value=a:null),width:"769px"},{header:r(()=>[M((D(),h("div",null,[_(S((e(l).postId===0?"添加":"修改")+"岗位"),1)])),[[L,[".system-edit-post-container .el-dialog",".system-edit-post-container .el-dialog__header"]]])]),footer:r(()=>[F("span",G,[s(V,{onClick:N,size:"default"},{default:r(()=>[_("取 消")]),_:1}),s(V,{type:"primary",onClick:w,size:"default",loading:e(x)},{default:r(()=>[_(S(e(l).postId===0?"新 增":"修 改"),1)]),_:1},8,["loading"])])]),default:r(()=>[s(q,{ref_key:"formRef",ref:v,model:e(l),rules:e(k),size:"default","label-width":"90px"},{default:r(()=>[s(u,{label:"岗位名称",prop:"postName"},{default:r(()=>[s(c,{modelValue:e(l).postName,"onUpdate:modelValue":o[0]||(o[0]=a=>e(l).postName=a),placeholder:"请输入岗位名称"},null,8,["modelValue"])]),_:1}),s(u,{label:"岗位编码",prop:"postCode"},{default:r(()=>[s(c,{modelValue:e(l).postCode,"onUpdate:modelValue":o[1]||(o[1]=a=>e(l).postCode=a),placeholder:"请输入编码名称"},null,8,["modelValue"])]),_:1}),s(u,{label:"岗位顺序",prop:"postSort"},{default:r(()=>[s(U,{modelValue:e(l).postSort,"onUpdate:modelValue":o[2]||(o[2]=a=>e(l).postSort=a),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),s(u,{label:"岗位状态",prop:"status"},{default:r(()=>[s(I,{modelValue:e(l).status,"onUpdate:modelValue":o[3]||(o[3]=a=>e(l).status=a),"active-value":1,"inactive-value":0,"inline-prompt":"","active-text":"启","inactive-text":"禁"},null,8,["modelValue"])]),_:1}),s(u,{label:"备注",prop:"remark"},{default:r(()=>[s(c,{modelValue:e(l).remark,"onUpdate:modelValue":o[4]||(o[4]=a=>e(l).remark=a),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),J=R(H,[["__scopeId","data-v-8c5c77b0"]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:J},Symbol.toStringTag,{value:"Module"}));export{J as E,te as d,oe as e,ee as g};
