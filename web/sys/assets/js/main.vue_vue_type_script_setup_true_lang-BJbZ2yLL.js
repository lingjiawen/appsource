import{d as j,k as U,o as c,c as I,a as h,u as y,T as A,ai as V,a8 as re,F as Q,M as z,O as u,U as r,S as H,Z as te,_ as se,j as oe,a0 as Je,R as F,a2 as le,D as he,bl as Oe,bj as Ee,b as ne,n as ge,e as _e,I as ue,J as Ve,i as we,E as Ye,aa as Xe,Y as Pe,P as Fe,V as Ue,W as Ze,aj as et}from"./@vue-CIdpUgdv.js";import{s as P}from"./pinia-DE-bJcb2.js";import{u as ae,a as Y,a4 as je,L as ee,i as ke,s as tt,b as st,a6 as at,S as J,t as Ne,k as nt,a5 as ot,a7 as He,V as it}from"./index-Cf93PWEY.js";import{u as me,b as ye,o as $e}from"./vue-router-CWOL7ATe.js";import{s as Se}from"./screenfull-DmVOzVZz.js";import{v as Ge}from"./vue-i18n-C6ZazF2L.js";import{e as lt,c as rt}from"./sysNotice-C7br5zb9.js";import{r as ct}from"./sysNoticeRead-MRZGqRU_.js";import{a as xe,f as ut,E as mt}from"./element-plus-BcbsnzDt.js";import{d as dt}from"./index-CGGO-gYc.js";import{l as Qe}from"./logo-mini-DKVW2eaB.js";import{S as ft}from"./sortablejs-C0-Qcoum.js";import pt from"./parent-CU-pSH9j.js";const ht=["src"],gt=["src"],_t=j({name:"layoutLogo",__name:"index",setup(S){const b=ae(),{themeConfig:w}=P(b),C=U(()=>{let{isCollapse:m,layout:k}=w.value;return!m||k==="classic"||document.body.clientWidth<1e3}),$=()=>{if(w.value.layout==="transverse")return!1;w.value.isCollapse=!w.value.isCollapse};return(m,k)=>C.value?(c(),I("div",{key:0,class:"layout-logo",onClick:$},[h("img",{src:y(Qe),class:"layout-logo-medium-img"},null,8,ht),h("span",null,A(y(w).globalTitle),1)])):(c(),I("div",{key:1,class:"layout-logo-size",onClick:$},[h("img",{src:y(Qe),class:"layout-logo-size-img"},null,8,gt)]))}}),wt=Y(_t,[["__scopeId","data-v-5eb18eb0"]]),yt=j({name:"navMenuSubItem",props:{chil:{type:Array,default:()=>[]}},setup(S){return{chils:U(()=>S.chil)}}}),bt=["href"];function Ct(S,b,w,C,$,m){const k=V("SvgIcon"),d=V("sub-item",!0),M=V("el-sub-menu"),B=V("el-menu-item");return c(!0),I(Q,null,re(S.chils,_=>(c(),I(Q,null,[_.children&&_.children.length>0?(c(),z(M,{index:_.path,key:_.path},{title:u(()=>[r(k,{name:_.meta.icon},null,8,["name"]),h("span",null,A(S.$t(_.meta.title)),1)]),default:u(()=>[r(d,{chil:_.children},null,8,["chil"])]),_:2},1032,["index"])):(c(),z(B,{index:_.path,key:_.path},{default:u(()=>[!_.meta.isLink||_.meta.isLink&&_.meta.isIframe?(c(),I(Q,{key:0},[r(k,{name:_.meta.icon},null,8,["name"]),h("span",null,A(S.$t(_.meta.title)),1)],64)):(c(),I("a",{key:1,href:_.meta.isLink,target:"_blank",rel:"opener",class:"w100"},[r(k,{name:_.meta.icon},null,8,["name"]),H(" "+A(S.$t(_.meta.title)),1)],8,bt))]),_:2},1032,["index"]))],64))),256)}const Lt=Y(yt,[["render",Ct]]),vt={key:0,class:"layout-navbars-breadcrumb"},St={key:0,class:"layout-navbars-breadcrumb-span"},Vt={key:1},kt={key:2},xt=["onClick"],$t=j({name:"layoutBreadcrumb",__name:"breadcrumb",setup(S){const b=je(),w=ae(),{themeConfig:C}=P(w),{routesList:$}=P(b),m=me(),k=ye(),d=te({breadcrumbList:[],routeSplit:[],routeSplitFirst:"",routeSplitIndex:1}),{breadcrumbList:M}=se(d),B=U(()=>{f(m.path);const{layout:n,isBreadcrumb:a}=C.value;return n==="classic"||n==="transverse"?!1:!!a}),_=n=>{const{redirect:a,path:R}=n;a?k.push(a):k.push(R)},L=()=>{C.value.isCollapse=!C.value.isCollapse,p()},p=()=>{ee.remove("themeConfig"),ee.set("themeConfig",C.value)},i=n=>{let a=[];n.map(R=>{a.push(...t(R,m.path,null)),a.length>0}),a.push(m),a=g(a),d.breadcrumbList=a},t=(n,a,R)=>{const D=[];if(n.path==a)return R&&D.push(R),D;if(n.children)for(let q=0;q<n.children.length;q++){const x=t(n.children[q],a,n);if(x&&x.length>0)return D.push(n,...x),D}return D},g=n=>{let a={},R=[];return n.forEach(D=>{a[D.path]||(a[D.path]=!0,R.push(D))}),R},f=n=>{if(!C.value.isBreadcrumb)return!1;d.breadcrumbList=[$.value[0]],d.routeSplit=n.split("/"),d.routeSplit.shift(),d.routeSplitFirst=`/${d.routeSplit[0]}`,d.routeSplitIndex=1,i($.value)};return oe(()=>{f(m.path)}),$e(n=>{f(n.path)}),(n,a)=>{const R=V("SvgIcon"),D=V("el-breadcrumb-item"),q=V("el-breadcrumb");return B.value?(c(),I("div",vt,[r(R,{class:"layout-navbars-breadcrumb-icon",name:y(C).isCollapse?"ele-Expand":"ele-Fold",size:16,onClick:L},null,8,["name"]),r(q,{class:"layout-navbars-breadcrumb-hide"},{default:u(()=>[r(Je,{name:"breadcrumb"},{default:u(()=>[(c(!0),I(Q,null,re(y(M),(x,G)=>(c(),z(D,{key:x.path},{default:u(()=>[G===y(M).length-1?(c(),I("span",St,[y(C).isBreadcrumbIcon?(c(),z(R,{key:0,name:x.meta.icon,class:"layout-navbars-breadcrumb-iconfont"},null,8,["name"])):F("",!0),x.meta.tagsViewName?(c(),I("div",kt,A(x.meta.tagsViewName),1)):(c(),I("div",Vt,A(n.$t(x.meta.title)),1))])):(c(),I("a",{key:1,onClick:le(N=>_(x),["prevent"])},[y(C).isBreadcrumbIcon?(c(),z(R,{key:0,name:x.meta.icon,class:"layout-navbars-breadcrumb-iconfont"},null,8,["name"])):F("",!0),H(A(n.$t(x.meta.title)),1)],8,xt))]),_:2},1024))),128))]),_:1})]),_:1})])):F("",!0)}}}),Tt=Y($t,[["__scopeId","data-v-ce845d01"]]),Te=S=>(Oe("data-v-e86cabc0"),S=S(),Ee(),S),It=Te(()=>h("span",{style:{"font-size":"18px","font-weight":"500"}},"通知",-1)),Rt={class:"layout-navbars-breadcrumb-user-news"},Mt={class:"content-box"},Bt=["onClick"],Dt=["innerHTML"],zt={class:"msg-box-attr"},At={class:"content-box-time"},qt={key:0,class:"foot-box"},Ht=Te(()=>h("span",{style:{"font-size":"18px","font-weight":"500"}}," 私信",-1)),Nt={class:"layout-navbars-breadcrumb-user-news"},Ot={class:"content-box"},Et=["onClick"],Pt=["innerHTML"],Ft={class:"msg-box-attr"},Ut={class:"content-box-time"},jt={key:0,class:"foot-box"},Wt=Te(()=>h("span",{style:{"font-weight":"600","font-size":"18px",color:"#6c6c6c"}},"通知",-1)),Kt=Te(()=>h("span",{style:{"font-weight":"600","font-size":"18px",color:"#6c6c6c"}},"私信",-1)),Qt=j({name:"layoutBreadcrumbUserNews",__name:"userNews",setup(S){oe(()=>{B(),_(1)});const b=ye(),w=te({type1Num:0,type2Num:0,noticeList:[],count:{notify:0,notice:0},tabsActive:1,activeInfo:1,isShowDialog:!1,barName:"通知"}),{tabsActive:C,activeInfo:$,isShowDialog:m,count:k,noticeList:d}=se(w),M=i=>{i===1?w.barName="通知":w.barName="公告",_(i)},B=()=>{lt().then(i=>{i.data!=null&&(w.count.notice=i.data.noticeCount||0,w.count.notify=i.data.notifyCount||0)})},_=i=>{rt({pageNum:1,pageSize:10,type:i,isTrim:!0}).then(g=>{w.noticeList=g.data.list||[]})},L=()=>{b.push("/system/sysNotice/show")},p=i=>{let t={noticeId:i.id};ct(t).then(()=>{_(i.type),xe.success("已读")}),B()};return(i,t)=>{const g=V("el-badge"),f=V("el-tag"),n=V("el-empty"),a=V("el-button"),R=V("el-tab-pane"),D=V("el-tabs"),q=V("el-dialog");return c(),I("div",null,[r(D,{modelValue:y(C),"onUpdate:modelValue":t[2]||(t[2]=x=>he(C)?C.value=x:null),onTabChange:M},{default:u(()=>[r(R,{name:1},{label:u(()=>[It,r(g,{type:"warning",value:y(k).notify,style:{"margin-left":"10px"}},null,8,["value"])]),default:u(()=>[h("div",Rt,[h("div",Mt,[y(d).length>0?(c(!0),I(Q,{key:0},re(y(d),(x,G)=>(c(),I("div",{class:"content-box-item",key:G},[h("div",{onClick:N=>p(x)},[h("div",null,A(x.title),1),h("div",{class:"content-box-msg",innerHTML:x.content},null,8,Dt),h("div",zt,[h("span",At,A(x.createdAt),1),h("span",null,[x.isRead==!0?(c(),z(f,{key:0,type:"success",effect:"plain"},{default:u(()=>[H("已读")]),_:1})):(c(),z(f,{key:1,type:"danger",effect:"plain"},{default:u(()=>[H("未读")]),_:1}))])])],8,Bt)]))),128)):(c(),z(n,{key:1,description:i.$t("message.user.newDesc")},null,8,["description"]))]),y(d).length>0?(c(),I("div",qt,[r(a,{onClick:t[0]||(t[0]=x=>L()),size:"small"},{default:u(()=>[H("查看更多")]),_:1})])):F("",!0)])]),_:1}),r(R,{name:2},{label:u(()=>[Ht,r(g,{type:"danger",value:y(k).notice,style:{"margin-left":"10px"}},null,8,["value"])]),default:u(()=>[h("div",Nt,[h("div",Ot,[y(d).length>0?(c(!0),I(Q,{key:0},re(y(d),(x,G)=>(c(),I("div",{class:"content-box-item",key:G},[h("div",{onClick:N=>p(x)},[h("div",null,A(x.title),1),h("div",{class:"content-box-msg",innerHTML:x.content},null,8,Pt),h("div",Ft,[h("span",Ut,A(x.createdAt),1),h("span",null,[x.isRead==!0?(c(),z(f,{key:0,type:"success",effect:"plain"},{default:u(()=>[H("已读")]),_:1})):(c(),z(f,{key:1,type:"danger",effect:"plain"},{default:u(()=>[H("未读")]),_:1}))])])],8,Et)]))),128)):(c(),z(n,{key:1,description:i.$t("message.user.newDesc")},null,8,["description"]))]),y(d).length>0?(c(),I("div",jt,[r(a,{onClick:t[1]||(t[1]=x=>L()),size:"small"},{default:u(()=>[H("查看更多")]),_:1})])):F("",!0)])]),_:1})]),_:1},8,["modelValue"]),r(q,{modelValue:y(m),"onUpdate:modelValue":t[4]||(t[4]=x=>he(m)?m.value=x:null),width:"1200px","close-on-click-modal":!1,"destroy-on-close":!0},{default:u(()=>[r(D,{modelValue:y($),"onUpdate:modelValue":t[3]||(t[3]=x=>he($)?$.value=x:null),type:"border-card"},{default:u(()=>[r(R,{name:1},{label:u(()=>[Wt]),_:1}),r(R,{label:"Config",name:2},{label:u(()=>[Kt]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])])}}}),Yt=Y(Qt,[["__scopeId","data-v-e86cabc0"]]),Gt={class:"layout-search-dialog"},Jt=j({name:"layoutBreadcrumbSearch",__name:"search",setup(S,{expose:b}){const w=ke(),{tagsViewRoutes:C}=P(w),$=ne(),{t:m}=Ge.useI18n(),k=ye(),d=te({isShowSearch:!1,menuQuery:"",tagsViewList:[]}),{isShowSearch:M,menuQuery:B}=se(d),_=()=>{d.menuQuery="",d.isShowSearch=!0,t(),ge(()=>{setTimeout(()=>{$.value.focus()})})},L=()=>{d.isShowSearch=!1},p=(n,a)=>{let R=n?d.tagsViewList.filter(i(n)):d.tagsViewList;a(R)},i=n=>a=>a.path.toLowerCase().indexOf(n.toLowerCase())>-1||a.meta.title.toLowerCase().indexOf(n.toLowerCase())>-1||m(a.meta.title).indexOf(n.toLowerCase())>-1,t=()=>{if(d.tagsViewList.length>0)return!1;C.value.map(n=>{n.meta.isHide||d.tagsViewList.push({...n})})},g=n=>{let{path:a,redirect:R}=n;n.meta.isLink&&!n.meta.isIframe?window.open(n.meta.isLink):R?k.push(R):k.push(a),L()},f=()=>{L()};return b({openSearch:_}),(n,a)=>{const R=V("ele-Search"),D=V("el-icon"),q=V("SvgIcon"),x=V("el-autocomplete"),G=V("el-dialog");return c(),I("div",Gt,[r(G,{modelValue:y(M),"onUpdate:modelValue":a[1]||(a[1]=N=>he(M)?M.value=N:null),width:"300px","destroy-on-close":"",modal:!1,fullscreen:"","show-close":!1},{default:u(()=>[r(x,{modelValue:y(B),"onUpdate:modelValue":a[0]||(a[0]=N=>he(B)?B.value=N:null),"fetch-suggestions":p,placeholder:n.$t("message.user.searchPlaceholder"),ref_key:"layoutMenuAutocompleteRef",ref:$,onSelect:g,onBlur:f},{prefix:u(()=>[r(D,{class:"el-input__icon"},{default:u(()=>[r(R)]),_:1})]),default:u(({item:N})=>[h("div",null,[r(q,{name:N.meta.icon,class:"mr5"},null,8,["name"]),H(" "+A(n.$t(N.meta.title)),1)])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["modelValue"])])}}}),Xt=Y(Jt,[["__scopeId","data-v-b9a41043"]]);function Zt(){return tt({url:"/api/v1/system/cache/remove",method:"delete"})}const es=S=>(Oe("data-v-d28c47c1"),S=S(),Ee(),S),ts={class:"layout-navbars-breadcrumb-user-icon"},ss=["title"],as={class:"layout-navbars-breadcrumb-user-icon"},ns=["title"],os=["title"],is=es(()=>h("i",{class:"fa-trash fa",title:"清除缓存"},null,-1)),ls=[is],rs={class:"layout-navbars-breadcrumb-user-icon"},cs=["title"],us={class:"layout-navbars-breadcrumb-user-link"},ms=["src"],ds=j({name:"layoutBreadcrumbUser",__name:"user",setup(S){const{t:b}=Ge.useI18n(),{proxy:w}=we(),C=ye(),$=me(),m=st(),k=ae(),{userInfos:d}=P(m),{themeConfig:M}=P(k),B=ne(),_=ne(),L=te({isScreenfull:!1,disabledI18n:"zh-cn",disabledSize:"large"}),{isScreenfull:p,disabledI18n:i,disabledSize:t}=se(L),g=U(()=>{let T="";const{layout:X,isClassicSplitMenu:O}=M.value;return["defaults","columns"].includes(X)||X==="classic"&&!O?T="1":T="",T}),f=()=>{if(!Se.isEnabled)return xe.warning("暂不不支持全屏"),!1;Se.toggle(),Se.on("change",()=>{Se.isFullscreen?L.isScreenfull=!0:L.isScreenfull=!1})},n=()=>{w.mittBus.emit("openSetingsDrawer")},a=()=>{J.remove("userMenu"),localStorage.clear(),Zt().then(()=>{xe.success("缓存清除成功"),window.location.reload()})},R=T=>{T==="logOut"?mt({closeOnClickModal:!1,closeOnPressEscape:!1,title:b("message.user.logOutTitle"),message:b("message.user.logOutMessage"),showCancelButton:!0,confirmButtonText:b("message.user.logOutConfirm"),cancelButtonText:b("message.user.logOutCancel"),buttonSize:"default",beforeClose:(X,O,Z)=>{X==="confirm"?dt().then(()=>{O.confirmButtonLoading=!0,O.confirmButtonText=b("message.user.logOutExit"),setTimeout(()=>{Z(),setTimeout(()=>{O.confirmButtonLoading=!1},300)},500)}):Z()}}).then(async()=>{J.clear(),window.location.reload()}).catch(()=>{}):T==="wareHouse"?window.open("https://gitee.com/tiger1103/gfast"):C.push(T)},D=()=>{B.value.openSearch()},q=()=>{debugger;_.value.hide()},x=T=>{ee.remove("themeConfig"),M.value.globalComponentSize=T,ee.set("themeConfig",M.value),ce(),window.location.reload()},G=T=>{ee.remove("themeConfig"),M.value.globalI18n=T,ee.set("themeConfig",M.value),w.$i18n.locale=T,de(),Ne.useTitle()},N=T=>{w.mittBus.emit("getI18nConfig",w.i18n.global.messages.value[T])},de=()=>{switch(ee.get("themeConfig").globalI18n){case"zh-cn":L.disabledI18n="zh-cn",N("zh-cn");break;case"en":L.disabledI18n="en",N("en");break;case"zh-tw":L.disabledI18n="zh-tw",N("zh-tw");break}},ce=()=>{switch(ee.get("themeConfig").globalComponentSize){case"large":L.disabledSize="large";break;case"default":L.disabledSize="default";break;case"small":L.disabledSize="small";break}};oe(()=>{ee.get("themeConfig")&&(de(),ce())});const be=at(),fe=U(()=>be.message);_e(fe,(T,X)=>{!T||!T.id||Ie(T)},{immediate:!0,deep:!0});const Ie=T=>{const X=ut({title:"新消息",message:`您有一条新消息：【${T.title}】，请点击查看详情。`,type:"warning",duration:36e5,onClick(){$.fullPath=="/system/sysNotice/show?type="+T.type?C.go(0):C.push("/system/sysNotice/show?type="+T.type),X.close()}})};return(T,X)=>{const O=V("el-dropdown-item"),Z=V("el-dropdown-menu"),pe=V("el-dropdown"),Re=V("ele-Search"),W=V("el-icon"),Me=V("ele-Bell"),Be=V("el-badge"),De=V("el-popover"),Ce=V("ele-ArrowDown");return c(),I("div",{class:"layout-navbars-breadcrumb-user pr15",style:Ve({flex:g.value})},[r(pe,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:x},{dropdown:u(()=>[r(Z,null,{default:u(()=>[r(O,{command:"large",disabled:y(t)==="large"},{default:u(()=>[H(A(T.$t("message.user.dropdownLarge")),1)]),_:1},8,["disabled"]),r(O,{command:"default",disabled:y(t)==="default"},{default:u(()=>[H(A(T.$t("message.user.dropdownDefault")),1)]),_:1},8,["disabled"]),r(O,{command:"small",disabled:y(t)==="small"},{default:u(()=>[H(A(T.$t("message.user.dropdownSmall")),1)]),_:1},8,["disabled"])]),_:1})]),default:u(()=>[h("div",ts,[h("i",{class:"iconfont icon-ziti",title:T.$t("message.user.title0")},null,8,ss)])]),_:1}),r(pe,{"show-timeout":70,"hide-timeout":50,trigger:"click",onCommand:G},{dropdown:u(()=>[r(Z,null,{default:u(()=>[r(O,{command:"zh-cn",disabled:y(i)==="zh-cn"},{default:u(()=>[H("简体中文")]),_:1},8,["disabled"]),r(O,{command:"en",disabled:y(i)==="en"},{default:u(()=>[H("English")]),_:1},8,["disabled"]),r(O,{command:"zh-tw",disabled:y(i)==="zh-tw"},{default:u(()=>[H("繁體中文")]),_:1},8,["disabled"])]),_:1})]),default:u(()=>[h("div",as,[h("i",{class:ue(["iconfont",y(i)==="en"?"icon-fuhao-yingwen":"icon-fuhao-zhongwen"]),title:T.$t("message.user.title1")},null,10,ns)])]),_:1}),h("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:D},[r(W,{title:T.$t("message.user.title2")},{default:u(()=>[r(Re)]),_:1},8,["title"])]),h("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:n},[h("i",{class:"icon-skin iconfont",title:T.$t("message.user.title3")},null,8,os)]),h("div",{class:"layout-navbars-breadcrumb-user-icon",onClick:a},ls),h("div",rs,[r(De,{ref_key:"newPopoverRef",ref:_,placement:"bottom",trigger:"click",transition:"el-zoom-in-top",width:500,persistent:!1},{reference:u(()=>[r(Be,{"is-dot":!0},{default:u(()=>[r(W,{title:T.$t("message.user.title4")},{default:u(()=>[r(Me)]),_:1},8,["title"])]),_:1})]),default:u(()=>[r(Yt,{onHideNews:q})]),_:1},512)]),h("div",{class:"layout-navbars-breadcrumb-user-icon mr10",onClick:f},[h("i",{class:ue(["iconfont",y(p)?"icon-tuichuquanping":"icon-fullscreen"]),title:y(p)?T.$t("message.user.title6"):T.$t("message.user.title5")},null,10,cs)]),r(pe,{"show-timeout":70,"hide-timeout":50,onCommand:R},{dropdown:u(()=>[r(Z,null,{default:u(()=>[r(O,{divided:"",command:"logOut"},{default:u(()=>[H(A(T.$t("message.user.dropdown5")),1)]),_:1})]),_:1})]),default:u(()=>[h("span",us,[h("img",{src:y(d).avatar,class:"layout-navbars-breadcrumb-user-link-photo mr5"},null,8,ms),H(" "+A(y(d).userName===""?"common":y(d).userName)+" ",1),r(W,{class:"el-icon--right"},{default:u(()=>[r(Ce)]),_:1})])]),_:1}),r(Xt,{ref_key:"searchRef",ref:B},null,512)],4)}}}),fs=Y(ds,[["__scopeId","data-v-d28c47c1"]]),ps=j({name:"navMenuHorizontal",components:{SubItem:Lt},props:{menuList:{type:Array,default:()=>[]}},setup(S){const{proxy:b}=we(),w=je(),C=ae(),{routesList:$}=P(w),{themeConfig:m}=P(C),k=me(),d=te({defaultActive:null}),M=U(()=>S.menuList),B=t=>{const g=t.wheelDelta||-t.deltaY*40;b.$refs.elMenuHorizontalScrollRef.$refs.wrap$.scrollLeft=b.$refs.elMenuHorizontalScrollRef.$refs.wrap$.scrollLeft+g/4},_=()=>{ge(()=>{let t=document.querySelector(".el-menu.el-menu--horizontal li.is-active");if(!t)return!1;b.$refs.elMenuHorizontalScrollRef.$refs.wrap$.scrollLeft=t.offsetLeft})},L=t=>t.filter(g=>!g.meta.isHide).map(g=>(g=Object.assign({},g),g.children&&(g.children=L(g.children)),g)),p=t=>{const g=t.split("/");let f={};return L($.value).map((n,a)=>{n.path===`/${g[1]}`&&(n.k=a,f.item=[{...n}],f.children=[{...n}],n.children&&(f.children=n.children))}),f},i=t=>{const{path:g,meta:f}=t;if(m.value.layout==="classic")d.defaultActive=`/${g.split("/")[1]}`;else{const n=f.isDynamic?f.isDynamicPath.split("/"):g.split("/");n.length>=4&&f.isHide?d.defaultActive=n.splice(0,3).join("/"):d.defaultActive=g}};return Ye(()=>{i(k)}),oe(()=>{_()}),$e(t=>{i(t);let{layout:g,isClassicSplitMenu:f}=m.value;g==="classic"&&f&&b.mittBus.emit("setSendClassicChildren",p(t.path))}),{menuLists:M,onElMenuHorizontalScroll:B,...se(d)}}}),hs={class:"el-menu-horizontal-warp"},gs=["href"];function _s(S,b,w,C,$,m){const k=V("SvgIcon"),d=V("SubItem"),M=V("el-sub-menu"),B=V("el-menu-item"),_=V("el-menu"),L=V("el-scrollbar");return c(),I("div",hs,[r(L,{onWheel:le(S.onElMenuHorizontalScroll,["prevent"]),ref:"elMenuHorizontalScrollRef"},{default:u(()=>[r(_,{router:"","default-active":S.defaultActive,ellipsis:!1,"background-color":"transparent",mode:"horizontal"},{default:u(()=>[(c(!0),I(Q,null,re(S.menuLists,p=>(c(),I(Q,null,[p.children&&p.children.length>0?(c(),z(M,{index:p.path,key:p.path},{title:u(()=>[r(k,{name:p.meta.icon},null,8,["name"]),h("span",null,A(S.$t(p.meta.title)),1)]),default:u(()=>[r(d,{chil:p.children},null,8,["chil"])]),_:2},1032,["index"])):(c(),z(B,{index:p.path,key:p.path},Xe({_:2},[!p.meta.isLink||p.meta.isLink&&p.meta.isIframe?{name:"title",fn:u(()=>[r(k,{name:p.meta.icon},null,8,["name"]),H(" "+A(S.$t(p.meta.title)),1)]),key:"0"}:{name:"title",fn:u(()=>[h("a",{href:p.meta.isLink,target:"_blank",rel:"opener",class:"w100"},[r(k,{name:p.meta.icon},null,8,["name"]),H(" "+A(S.$t(p.meta.title)),1)],8,gs)]),key:"1"}]),1032,["index"]))],64))),256))]),_:1},8,["default-active"])]),_:1},8,["onWheel"])])}const ws=Y(ps,[["render",_s],["__scopeId","data-v-0e8aec25"]]),ys={class:"layout-navbars-breadcrumb-index"},bs=j({name:"layoutBreadcrumbIndex",__name:"index",setup(S){const{proxy:b}=we(),w=je(),C=ae(),{themeConfig:$}=P(C),{routesList:m}=P(w),k=me(),d=te({menuList:[]}),{menuList:M}=se(d),B=U(()=>{let{isShowLogo:g,layout:f}=$.value;return g&&f==="classic"||g&&f==="transverse"}),_=U(()=>{let{layout:g,isClassicSplitMenu:f}=$.value;return g==="transverse"||f&&g==="classic"}),L=()=>{let{layout:g,isClassicSplitMenu:f}=$.value;if(g==="classic"&&f){d.menuList=p(i(m.value));const n=t(k.path);b.mittBus.emit("setSendClassicChildren",n)}else d.menuList=i(m.value)},p=g=>(g.map(f=>{f.children&&delete f.children}),g),i=g=>g.filter(f=>!f.meta.isHide).map(f=>(f=Object.assign({},f),f.children&&(f.children=i(f.children)),f)),t=g=>{const f=g.split("/");let n={};return i(m.value).map((a,R)=>{a.path===`/${f[1]}`&&(a.k=R,n.item=[{...a}],n.children=[{...a}],a.children&&(n.children=a.children))}),n};return oe(()=>{L(),b.mittBus.on("getBreadcrumbIndexSetFilterRoutes",()=>{L()})}),Pe(()=>{b.mittBus.off("getBreadcrumbIndexSetFilterRoutes",()=>{})}),(g,f)=>(c(),I("div",ys,[B.value?(c(),z(wt,{key:0})):F("",!0),r(Tt),_.value?(c(),z(ws,{key:1,menuList:y(M)},null,8,["menuList"])):F("",!0),r(fs)]))}}),Cs=Y(bs,[["__scopeId","data-v-5259b5fc"]]),Ls={class:"el-dropdown-menu"},vs=["onClick"],Ss=j({name:"layoutTagsViewContextmenu",__name:"contextmenu",props:{dropdown:{type:Object,default:()=>({x:0,y:0})}},emits:["currentContextmenuClick"],setup(S,{expose:b,emit:w}){const C=S,$=w,m=te({isShow:!1,dropdownList:[{contextMenuClickId:0,txt:"message.tagsView.refresh",affix:!1,icon:"ele-RefreshRight"},{contextMenuClickId:1,txt:"message.tagsView.close",affix:!1,icon:"ele-Close"},{contextMenuClickId:2,txt:"message.tagsView.closeOther",affix:!1,icon:"ele-CircleClose"},{contextMenuClickId:3,txt:"message.tagsView.closeAll",affix:!1,icon:"ele-FolderDelete"},{contextMenuClickId:4,txt:"message.tagsView.fullscreen",affix:!1,icon:"iconfont icon-fullscreen"}],item:{},arrowLeft:10}),{isShow:k,dropdownList:d,arrowLeft:M}=se(m),B=U(()=>C.dropdown.x+117>document.documentElement.clientWidth?{x:document.documentElement.clientWidth-117-5,y:C.dropdown.y}:C.dropdown),_=i=>{$("currentContextmenuClick",Object.assign({},{contextMenuClickId:i},m.item))},L=i=>{m.item=i,i.meta.isAffix?m.dropdownList[1].affix=!0:m.dropdownList[1].affix=!1,p(),setTimeout(()=>{m.isShow=!0},10)},p=()=>{m.isShow=!1};return oe(()=>{document.body.addEventListener("click",p)}),Pe(()=>{document.body.removeEventListener("click",p)}),_e(()=>C.dropdown,({x:i})=>{i+117>document.documentElement.clientWidth?m.arrowLeft=117-(document.documentElement.clientWidth-i):m.arrowLeft=10},{deep:!0}),b({openContextmenu:L}),(i,t)=>{const g=V("SvgIcon");return c(),z(Ze,{name:"el-zoom-in-center"},{default:u(()=>[Fe((c(),I("div",{"aria-hidden":"true",class:"el-dropdown__popper el-popper is-light is-pure custom-contextmenu",role:"tooltip","data-popper-placement":"bottom",style:Ve(`top: ${B.value.y+5}px;left: ${B.value.x}px;`),key:Math.random()},[h("ul",Ls,[(c(!0),I(Q,null,re(y(d),(f,n)=>(c(),I(Q,null,[f.affix?F("",!0):(c(),I("li",{class:"el-dropdown-menu__item","aria-disabled":"false",tabindex:"-1",key:n,onClick:a=>_(f.contextMenuClickId)},[r(g,{name:f.icon},null,8,["name"]),h("span",null,A(i.$t(f.txt)),1)],8,vs))],64))),256))]),h("div",{class:"el-popper__arrow",style:Ve({left:`${y(M)}px`})},null,4)],4)),[[Ue,y(k)]])]),_:1})}}}),Vs=Y(Ss,[["__scopeId","data-v-65ea1e21"]]),ks=["data-url","onContextmenu","onClick"],xs={key:0,class:"iconfont icon-webicon318 layout-navbars-tagsview-ul-li-iconfont"},$s=j({name:"layoutTagsView",__name:"tagsView",setup(S){const{proxy:b}=we(),w=ne([]),C=ne(),$=ne(),m=ne(),k=ke(),d=ae(),M=ke(),{themeConfig:B}=P(d),{tagsViewRoutes:_}=P(M),L=nt(),p=me(),i=ye(),t=te({routeActive:"",routePath:p.path,dropdown:{x:"",y:""},sortable:"",tagsRefsIndex:0,tagsViewList:[],tagsViewRoutesList:[]}),{tagsViewList:g,dropdown:f}=se(t),n=U(()=>B.value.tagsStyle),a=U(()=>B.value),R=U(()=>s=>Ne.setTagsViewNameI18n(s)),D=s=>a.value.isShareTagsView?s.path===t.routePath:s.query&&Object.keys(s.query).length||s.params&&Object.keys(s.params).length?s.url?s.url===t.routeActive:s.path===t.routeActive:s.path===t.routePath,q=s=>{J.set("tagsViewList",s)},x=async()=>{t.routeActive=await W(p),t.routePath=await p.meta.isDynamic?p.meta.isDynamicPath:p.path,t.tagsViewList=[],t.tagsViewRoutesList=_.value,G()},G=async()=>{J.get("tagsViewList")&&a.value.isCacheTagsView?t.tagsViewList=await J.get("tagsViewList"):(await t.tagsViewRoutesList.map(s=>{s.meta.isAffix&&!s.meta.isHide&&(s.url=W(s),t.tagsViewList.push({...s}),L.addCachedView(s))}),await ce(p.path,p)),Ce(a.value.isShareTagsView?t.routePath:t.routeActive)},N=async(s,e)=>{let l=e.meta.isDynamic?e.meta.isDynamicPath:s;if(t.tagsViewList.filter(v=>v.path===l&&He(e.meta.isDynamic?v.params?v.params:null:v.query?v.query:null,e.meta.isDynamic?e!=null&&e.params?e==null?void 0:e.params:null:e!=null&&e.query?e==null?void 0:e.query:null)).length<=0){let v=t.tagsViewRoutesList.find(E=>E.path===l);if(!v||v.meta.isAffix||v.meta.isLink&&!v.meta.isIframe)return!1;e.meta.isDynamic?v.params=e.params:v.query=e.query,v.url=W(v),t.tagsViewList.push({...v}),await L.addCachedView(v),q(t.tagsViewList)}},de=(s,e)=>{let l=e.meta.isDynamic?e.meta.isDynamicPath:s;t.tagsViewList.forEach(o=>{o.path===l&&!He(e.meta.isDynamic?o.params?o.params:null:o.query?o.query:null,e.meta.isDynamic?e!=null&&e.params?e==null?void 0:e.params:null:e!=null&&e.query?e==null?void 0:e.query:null)&&(e.meta.isDynamic?o.params=e.params:o.query=e.query,o.url=W(o),q(t.tagsViewList))})},ce=(s,e)=>{ge(async()=>{let l="";if(e&&e.meta.isDynamic){if(a.value.isShareTagsView?await de(s,e):await N(s,e),t.tagsViewList.some(o=>o.path===e.meta.isDynamicPath))return!1;l=t.tagsViewRoutesList.find(o=>o.path===e.meta.isDynamicPath)}else{if(a.value.isShareTagsView?await de(s,e):await N(s,e),t.tagsViewList.some(o=>o.path===s))return!1;l=t.tagsViewRoutesList.find(o=>o.path===s)}if(!l||l.meta.isLink&&!l.meta.isIframe)return!1;e&&e.meta.isDynamic?l.params=e!=null&&e.params?e==null?void 0:e.params:p.params:l.query=e!=null&&e.query?e==null?void 0:e.query:p.query,l.url=W(l),await L.addCachedView(l),await t.tagsViewList.push({...l}),await q(t.tagsViewList)})},be=async s=>{const e=t.tagsViewList.find(l=>a.value.isShareTagsView?l.path===s:l.url===s);e!=null&&(await L.delCachedView(e),b.mittBus.emit("onTagsViewRefreshRouterView",s),e.meta.isKeepAlive&&L.addCachedView(e))},fe=s=>{t.tagsViewList.map((e,l,o)=>{e.meta.isAffix||(a.value.isShareTagsView?e.path===s:e.url===s)&&(L.delCachedView(e),t.tagsViewList.splice(l,1),setTimeout(()=>{(t.tagsViewList.length===l&&a.value.isShareTagsView?t.routePath===s:t.routeActive===s)?o[o.length-1].meta.isDynamic?l!==o.length?i.push({name:o[l].name,params:o[l].params}):i.push({name:o[o.length-1].name,params:o[o.length-1].params}):l!==o.length?i.push({path:o[l].path,query:o[l].query}):i.push({path:o[o.length-1].path,query:o[o.length-1].query}):(t.tagsViewList.length!==l&&a.value.isShareTagsView?t.routePath===s:t.routeActive===s)&&(o[l].meta.isDynamic?i.push({name:o[l].name,params:o[l].params}):i.push({path:o[l].path,query:o[l].query}))},0))}),q(t.tagsViewList)},Ie=s=>{J.get("tagsViewList")&&(t.tagsViewList=[],J.get("tagsViewList").map(e=>{e.meta.isAffix&&!e.meta.isHide&&(e.url=W(e),L.delOthersCachedViews(e),t.tagsViewList.push({...e}))}),ce(s,p),q(t.tagsViewList))},T=()=>{J.get("tagsViewList")&&(L.delAllCachedViews(),t.tagsViewList=[],J.get("tagsViewList").map(s=>{s.meta.isAffix&&!s.meta.isHide&&(s.url=W(s),t.tagsViewList.push({...s}),i.push({path:t.tagsViewList[t.tagsViewList.length-1].path}))}),q(t.tagsViewList))},X=async s=>{const e=t.tagsViewList.find(l=>a.value.isShareTagsView?l.path===s:l.url===s);e.meta.isDynamic?await i.push({name:e.name,params:e.params}):await i.push({name:e.name,query:e.query}),k.setCurrenFullscreen(!0)},O=(s,e)=>(J.get("tagsViewList")?J.get("tagsViewList"):t.tagsViewList).find(o=>{if(o.path===s&&He(o.meta.isDynamic?o.params?o.params:null:o.query?o.query:null,e&&Object.keys(e||{}).length>0?e:null))return o;if(o.path===s&&Object.keys(e||{}).length<=0)return o}),Z=async s=>{const e=s.meta.isDynamic?s.params:s.query;if(!O(s.path,e))return xe({type:"warning",message:"请正确输入路径及完整参数（query、params）"});const{path:l,name:o,params:v,query:E,meta:K,url:ie}=O(s.path,e);switch(s.contextMenuClickId){case 0:K.isDynamic?await i.push({name:o,params:v}):await i.push({path:l,query:E}),be(a.value.isShareTagsView?l:ie);break;case 1:fe(a.value.isShareTagsView?l:ie);break;case 2:K.isDynamic?await i.push({name:o,params:v}):await i.push({path:l,query:E}),Ie(l);break;case 3:T();break;case 4:X(a.value.isShareTagsView?l:ie);break}},pe=(s,e)=>{const{clientX:l,clientY:o}=e;t.dropdown.x=l,t.dropdown.y=o,$.value.openContextmenu(s)},Re=(s,e)=>{t.tagsRefsIndex=e,i.push(s)},W=s=>{let e=s.query&&Object.keys(s.query).length>0?s.query:s.params;if(!e||Object.keys(e).length<=0)return s.path;let l="";for(let o in e)l+=e[o];return`${s.meta.isDynamic?s.meta.isDynamicPath:s.path}-${l}`},Me=()=>{C.value.update()},Be=s=>{C.value.$refs.wrapRef.scrollLeft+=s.wheelDelta/4},De=()=>{ge(()=>{if(w.value.length<=0)return!1;let s=w.value[t.tagsRefsIndex],e=t.tagsRefsIndex,l=w.value.length,o=w.value[0],v=w.value[w.value.length-1],E=C.value.$refs.wrapRef,K=E.scrollWidth,ie=E.offsetWidth,We=E.scrollLeft,qe=w.value[t.tagsRefsIndex-1],Ke=w.value[t.tagsRefsIndex+1],Le="",ve="";s===o?E.scrollLeft=0:s===v?E.scrollLeft=K-ie:(e===0?Le=o.offsetLeft-5:Le=(qe==null?void 0:qe.offsetLeft)-5,e===l?ve=v.offsetLeft+v.offsetWidth+5:ve=Ke.offsetLeft+Ke.offsetWidth+5,ve>We+ie?E.scrollLeft=ve-ie:Le<We&&(E.scrollLeft=Le)),Me()})},Ce=s=>{ge(async()=>{let e=await t.tagsViewList;t.tagsRefsIndex=e.findIndex(l=>a.value.isShareTagsView?l.path===s:l.url===s),De()})},ze=async()=>{const s=document.querySelector(".layout-navbars-tagsview-ul");if(!s)return!1;t.sortable.el&&t.sortable.destroy(),t.sortable=ft.create(s,{animation:300,dataIdAttr:"data-url",disabled:!a.value.isSortableTagsView,onEnd:()=>{const e=[];t.sortable.toArray().map(l=>{t.tagsViewList.map(o=>{o.url===l&&e.push({...o})})}),q(e)}})},Ae=async()=>{await ze(),Ne.isMobile()&&t.sortable.el&&t.sortable.destroy()};return Ye(()=>{Ae(),window.addEventListener("resize",Ae),b.mittBus.on("onCurrentContextmenuClick",s=>{Z(s)}),b.mittBus.on("openOrCloseSortable",()=>{ze()}),b.mittBus.on("openShareTagsView",()=>{a.value.isShareTagsView&&(i.push("/home"),t.tagsViewList=[],t.tagsViewRoutesList.map(s=>{s.meta.isAffix&&!s.meta.isHide&&(s.url=W(s),t.tagsViewList.push({...s}))}))})}),Pe(()=>{b.mittBus.off("onCurrentContextmenuClick",()=>{}),b.mittBus.off("openOrCloseSortable",()=>{}),b.mittBus.off("openShareTagsView",()=>{}),window.removeEventListener("resize",Ae)}),et(()=>{w.value=[]}),oe(()=>{x(),ze()}),$e(async s=>{t.routeActive=W(s),t.routePath=s.meta.isDynamic?s.meta.isDynamicPath:s.path,await ce(s.path,s),Ce(a.value.isShareTagsView?t.routePath:t.routeActive)}),_e(ot.state,s=>{if(s.tagsViewRoutes.tagsViewRoutes.length===t.tagsViewRoutesList.length)return!1;x()},{deep:!0}),(s,e)=>{const l=V("SvgIcon"),o=V("el-scrollbar");return c(),I("div",{class:ue(["layout-navbars-tagsview",{"layout-navbars-tagsview-shadow":a.value.layout==="classic"}])},[r(o,{ref_key:"scrollbarRef",ref:C,onWheel:le(Be,["prevent"])},{default:u(()=>[h("ul",{class:ue(["layout-navbars-tagsview-ul",n.value]),ref_key:"tagsUlRef",ref:m},[(c(!0),I(Q,null,re(y(g),(v,E)=>(c(),I("li",{key:E,class:ue(["layout-navbars-tagsview-ul-li",{"is-active":D(v)}]),"data-url":v.url,onContextmenu:le(K=>pe(v,K),["prevent"]),onClick:K=>Re(v,E),ref_for:!0,ref:K=>{K&&(w.value[E]=K)}},[D(v)?(c(),I("i",xs)):F("",!0),!D(v)&&a.value.isTagsviewIcon?(c(),z(l,{key:1,name:v.meta.icon,class:"pr5"},null,8,["name"])):F("",!0),h("span",null,A(R.value(v)),1),D(v)?(c(),I(Q,{key:2},[r(l,{name:"ele-RefreshRight",class:"ml5 layout-navbars-tagsview-ul-li-refresh",onClick:le(K=>be(a.value.isShareTagsView?v.path:v.url),["stop"])},null,8,["onClick"]),v.meta.isAffix?F("",!0):(c(),z(l,{key:0,name:"ele-Close",class:"layout-navbars-tagsview-ul-li-icon layout-icon-active",onClick:le(K=>fe(a.value.isShareTagsView?v.path:v.url),["stop"])},null,8,["onClick"]))],64)):F("",!0),v.meta.isAffix?F("",!0):(c(),z(l,{key:3,name:"ele-Close",class:"layout-navbars-tagsview-ul-li-icon layout-icon-three",onClick:le(K=>fe(a.value.isShareTagsView?v.path:v.url),["stop"])},null,8,["onClick"]))],42,ks))),128))],2)]),_:1},512),r(Vs,{dropdown:y(f),ref_key:"contextmenuRef",ref:$,onCurrentContextmenuClick:Z},null,8,["dropdown"])],2)}}}),Ts=Y($s,[["__scopeId","data-v-6797adeb"]]),Is={class:"layout-navbars-container"},Rs=j({name:"layoutNavBars",__name:"index",setup(S){const b=ae(),{themeConfig:w}=P(b),C=U(()=>{let{layout:$,isTagsview:m}=w.value;return $!=="classic"&&m});return($,m)=>(c(),I("div",Is,[r(Cs),C.value?(c(),z(Ts,{key:0})):F("",!0)]))}}),Ms=Y(Rs,[["__scopeId","data-v-89085438"]]),Xs=j({name:"layoutHeader",__name:"header",setup(S){const b=ke(),w=ae(),{themeConfig:C}=P(w),{isTagsViewCurrenFull:$}=P(b),m=U(()=>{let{isTagsview:k,layout:d}=C.value;return k&&d!=="classic"?"84px":"50px"});return(k,d)=>{const M=V("el-header");return Fe((c(),z(M,{class:"layout-header",height:m.value},{default:u(()=>[r(Ms)]),_:1},8,["height"])),[[Ue,!y($)]])}}}),Bs=S=>(Oe("data-v-adb8bdac"),S=S(),Ee(),S),Ds={class:"layout-footer mt15"},zs=Bs(()=>h("div",{class:"layout-footer-warp"},[h("div",null,"Copyright © 2023-2025 mangolang.com All Rights Reserved."),h("div",{class:"mt5"},"芒果云版权所有")],-1)),As=[zs],qs=j({name:"layoutFooter",__name:"index",setup(S){const b=ne(!0);return $e(()=>{setTimeout(()=>{b.value=!1,setTimeout(()=>{b.value=!0},800)},0)}),(w,C)=>Fe((c(),I("div",Ds,As,512)),[[Ue,b.value]])}}),Hs=Y(qs,[["__scopeId","data-v-adb8bdac"]]),Zs=j({name:"layoutMain",__name:"main",setup(S){const{proxy:b}=we(),w=ae(),{themeConfig:C}=P(w),$=me(),m=te({headerHeight:"",currentRouteMeta:{}}),{currentRouteMeta:k}=se(m),d=U(()=>{const{layout:_}=C.value;return _==="classic"||_==="transverse"}),M=()=>{const _=m.currentRouteMeta.isLink&&m.currentRouteMeta.isIframe;let{isTagsview:L}=C.value;return L?m.headerHeight=_?"86px":"115px":m.headerHeight="80px"},B=()=>{m.currentRouteMeta=$.meta};return oe(async()=>{await B(),M(),it.done()}),_e(()=>$.path,()=>{m.currentRouteMeta=$.meta;const _=m.currentRouteMeta.isLink&&m.currentRouteMeta.isIframe;m.headerHeight=_?"86px":"115px",b.$refs.layoutScrollbarRef.update()}),_e(C,_=>{var p,i;m.currentRouteMeta=$.meta;const L=m.currentRouteMeta.isLink&&m.currentRouteMeta.isIframe;m.headerHeight=_.isTagsview?L?"86px":"115px":"51px",(i=(p=b.$refs)==null?void 0:p.layoutScrollbarRef)==null||i.update()},{deep:!0}),(_,L)=>{const p=V("el-scrollbar"),i=V("el-main");return c(),z(i,{class:"layout-main"},{default:u(()=>[r(p,{ref:"layoutScrollbarRef",class:ue({"layout-scrollbar":!d.value&&!y(k).isLink&&!y(k).isIframe||!d.value&&y(k).isLink&&!y(k).isIframe})},{default:u(()=>[r(pt,{style:Ve({padding:!d.value||y(k).isLink&&y(k).isIframe?"0":"15px",transition:"padding 0.3s ease-in-out"})},null,8,["style"]),y(C).isFooter?(c(),z(Hs,{key:0})):F("",!0)]),_:1},8,["class"])]),_:1})}}});export{wt as L,Lt as S,Ts as T,Xs as _,Zs as a};
