import{d as G,b as _,Z as H,_ as J,o as u,M as N,O as t,ai as o,U as e,u as r,a9 as x,S as y,c as z,a8 as D,a as b,T as f,F as I,P as W,V as X}from"./@vue-CIdpUgdv.js";import{a as Y}from"./index-BXP_iOH9.js";import{a as U}from"./element-plus-BcbsnzDt.js";import{a as ee}from"./index-Cf93PWEY.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@element-plus-jSNvwxF2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./@intlify-BrbEMGpa.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";const ae={style:{float:"left"}},te={style:{float:"right",color:"#8492a6","font-size":"13px"}},le={style:{float:"left"}},oe={style:{float:"right",color:"#8492a6","font-size":"13px"}},ne=G({name:"relationTable",__name:"relationTable",emits:["ok"],setup(me,{expose:T,emit:F}){const B=F,V=_(),h=_(),d=_(!1),C=_(),p=H({tableData:{data:[],total:0,loading:!0,param:{pageNum:1,pageSize:10,tableName:"",tableComment:""}}}),{tableData:m}=J(p),c=()=>{Y(p.tableData.param).then(n=>{p.tableData.data=n.data.data??[],p.tableData.total=n.data.total})},k=()=>{p.tableData.param.pageNum=1,c()},K=()=>{V.value.resetFields(),c()},q=n=>{h.value.toggleRowSelection(n)},E=n=>{if(!n.linkLabelId){U.error("请选择关联表key");return}if(!n.linkLabelName){U.error("请选择关联表value");return}B("ok",C.value,{linkTableName:n.tableName,linkLabelId:n.linkLabelId,linkLabelName:n.linkLabelName}),d.value=!1};return T({openDialog:n=>{C.value=n,c(),d.value=!0}}),(n,i)=>{const w=o("el-input"),g=o("el-form-item"),M=o("ele-Search"),L=o("el-icon"),v=o("el-button"),P=o("SvgIcon"),Q=o("el-form"),s=o("el-table-column"),R=o("el-option"),S=o("el-select"),O=o("ele-Check"),Z=o("el-table"),$=o("pagination"),j=o("el-row"),A=o("el-dialog");return u(),N(A,{title:"请选择关联表",modelValue:d.value,"onUpdate:modelValue":i[4]||(i[4]=a=>d.value=a),width:"900px",top:"5vh","append-to-body":"","close-on-click-modal":!1},{default:t(()=>[e(Q,{model:r(m).param,ref_key:"queryFormRef",ref:V,inline:!0},{default:t(()=>[e(g,{label:"表名称",prop:"tableName"},{default:t(()=>[e(w,{modelValue:r(m).param.tableName,"onUpdate:modelValue":i[0]||(i[0]=a=>r(m).param.tableName=a),placeholder:"请输入表名称",clearable:"",size:"small",onKeyup:x(k,["enter","native"])},null,8,["modelValue"])]),_:1}),e(g,{label:"表描述",prop:"tableComment"},{default:t(()=>[e(w,{modelValue:r(m).param.tableComment,"onUpdate:modelValue":i[1]||(i[1]=a=>r(m).param.tableComment=a),placeholder:"请输入表描述",clearable:"",size:"small",onKeyup:x(k,["enter","native"])},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(v,{type:"primary",size:"small",onClick:k},{default:t(()=>[e(L,null,{default:t(()=>[e(M)]),_:1}),y("搜索")]),_:1}),e(v,{size:"small",onClick:K},{default:t(()=>[e(P,{name:"ele-Refresh"}),y("重置")]),_:1})]),_:1})]),_:1},8,["model"]),e(j,null,{default:t(()=>[e(Z,{onRowClick:q,ref_key:"tableRef",ref:h,data:r(m).data,height:"260px"},{default:t(()=>[e(s,{prop:"tableName",label:"表名称"}),e(s,{prop:"tableComment",label:"表描述"}),e(s,{prop:"packageName",label:"关联表key"},{default:t(a=>[e(S,{clearable:"",filterable:"",placeholder:"请选择关联表key",modelValue:a.row.linkLabelId,"onUpdate:modelValue":l=>a.row.linkLabelId=l},{default:t(()=>[(u(!0),z(I,null,D(a.row.columns,l=>(u(),N(R,{key:l.columnName,label:l.columnName,value:l.columnName},{default:t(()=>[b("span",ae,f(l.htmlField),1),b("span",te,f(l.columnComment),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{prop:"updateTime",label:"关联表value"},{default:t(a=>[e(S,{clearable:"",filterable:"",placeholder:"请选择关联表value",modelValue:a.row.linkLabelName,"onUpdate:modelValue":l=>a.row.linkLabelName=l},{default:t(()=>[(u(!0),z(I,null,D(a.row.columns,l=>(u(),N(R,{key:l.columnName,label:l.columnName,value:l.columnName},{default:t(()=>[b("span",le,f(l.htmlField),1),b("span",oe,f(l.columnComment),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:1}),e(s,{label:"操作"},{default:t(a=>[e(v,{size:"small",type:"primary",onClick:l=>E(a.row)},{default:t(()=>[e(L,null,{default:t(()=>[e(O)]),_:1}),y("关联此表")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),W(e($,{total:r(m).total,page:r(m).param.pageNum,"onUpdate:page":i[2]||(i[2]=a=>r(m).param.pageNum=a),limit:r(m).param.pageSize,"onUpdate:limit":i[3]||(i[3]=a=>r(m).param.pageSize=a),onPagination:c},null,8,["total","page","limit"]),[[X,r(m).total>0]])]),_:1})]),_:1},8,["modelValue"])}}}),Xe=ee(ne,[["__scopeId","data-v-e104655f"]]);export{Xe as default};
