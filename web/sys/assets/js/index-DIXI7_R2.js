import{d as Be,b as x,k as Ne,Z as ze,_ as Oe,j as Ee,o as b,c as S,U as e,O as l,u as o,i as Re,ai as i,aq as W,a as ee,a9 as A,I as _,S as g,T as $,P as y,V as U,F as le,a8 as ae,M as k,ae as te}from"./@vue-CIdpUgdv.js";import{l as Ie,c as Le,b as Se,d as $e}from"./asApplication-cyou5BJm.js";import Ke from"./edit-DbFRwgxQ.js";import Te from"./detail-Dor-uUB9.js";import{l as Me,d as Ye}from"./index-8l9Z7Oa5.js";import{a as oe,E as Fe}from"./element-plus-BcbsnzDt.js";import{a as Pe}from"./index-Cf93PWEY.js";import"./AppList-DlR5mOvI.js";import"./index-jX4CTekM.js";import"./lodash-kx6XzW9U.js";import"./@intlify-BrbEMGpa.js";import"./index-CNipAdKq.js";import"./@element-plus-jSNvwxF2.js";import"./axios-CdtiCRuU.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";const He={class:"appsource-asApplication-container"},qe={class:"appsource-asApplication-search mb15"},je=Be({name:"apiV1AppsourceAsApplicationList",__name:"index",setup(Ge){const{proxy:D}=Re(),O=x(!1),E=x(),R=x(),K=x(),T=x(),s=x(!1),M=x(!0),Y=x(!0),F=Ne(()=>s.value===!1?"展开搜索":"收起搜索"),{appsource_app_type:C,sys_normal_disable:B,sys_yes_no:N}=D.useDict("appsource_app_type","sys_normal_disable","sys_yes_no"),V=ze({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,id:void 0,fileUrl:void 0,name:void 0,bundleId:void 0,version:void 0,size:void 0,type:void 0,description:void 0,iconUrl:void 0,lock:void 0,lanzou:void 0,weigh:void 0,active:void 0,note:void 0,createdBy:void 0,createdAt:void 0,dateRange:[]}}}),{tableData:n}=Oe(V);Ee(()=>{ne()});const ne=()=>{d()},P=p=>{p&&(p.resetFields(),d())},d=()=>{O.value=!0,Ie(V.tableData.param).then(p=>{let t=p.data.list??[];V.tableData.data=t,V.tableData.total=p.data.total,O.value=!1})},H=()=>{s.value=!s.value},pe=p=>D.selectDictLabel(C.value,p.type),ie=p=>{Le(p.id,p.lock).catch(()=>{setTimeout(()=>{p.lock=!p.lock},300)})},se=p=>D.selectDictLabel(N.value,p.lanzou),re=p=>{Se(p.id,p.active).catch(()=>{setTimeout(()=>{p.active=!p.active},300)})},de=p=>{V.ids=p.map(t=>t.id),M.value=p.length!=1,Y.value=!p.length},ue=()=>{R.value.openDialog()},q=p=>{p||(p=V.tableData.data.find(t=>t.id===V.ids[0])),R.value.openDialog(te(p))},j=p=>{let t="你确定要删除所选数据？",f=[];if(p?(t="此操作将永久删除数据，是否继续?",f=[p.id]):f=V.ids,f.length===0){oe.error("请选择要删除的数据。");return}Fe.confirm(t,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{$e(f).then(()=>{oe.success("删除成功"),d()})}).catch(()=>{})},ce=p=>{K.value.openDialog(te(p))},me=()=>{Ye("/api/v1/appsource/asApplication/export",V.tableData.param,"get")},_e=()=>{T.value.open()};return(p,t)=>{const f=i("el-input"),u=i("el-form-item"),r=i("el-col"),I=i("el-option"),L=i("el-select"),G=i("ele-Search"),m=i("el-icon"),v=i("el-button"),Q=i("ele-Refresh"),X=i("ele-ArrowUp"),Z=i("ele-ArrowDown"),z=i("el-switch"),fe=i("el-date-picker"),J=i("el-row"),ve=i("el-form"),be=i("ele-Plus"),ge=i("ele-Edit"),ye=i("ele-Delete"),ke=i("ele-Download"),Ve=i("ele-Upload"),c=i("el-table-column"),Ae=i("ele-View"),we=i("ele-EditPen"),he=i("ele-DeleteFilled"),xe=i("el-table"),Ue=i("pagination"),De=i("el-card"),w=W("auth"),Ce=W("loading");return b(),S("div",He,[e(De,{shadow:"hover"},{default:l(()=>[ee("div",qe,[e(ve,{model:o(n).param,ref_key:"queryRef",ref:E,inline:!0,"label-width":"100px"},{default:l(()=>[e(J,null,{default:l(()=>[e(r,{span:8,class:"colBlock"},{default:l(()=>[e(u,{label:"ID",prop:"id"},{default:l(()=>[e(f,{modelValue:o(n).param.id,"onUpdate:modelValue":t[0]||(t[0]=a=>o(n).param.id=a),placeholder:"请输入ID",clearable:"",onKeyup:A(d,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8,class:"colBlock"},{default:l(()=>[e(u,{label:"文件",prop:"fileUrl"},{default:l(()=>[e(L,{filterable:"",modelValue:o(n).param.fileUrl,"onUpdate:modelValue":t[1]||(t[1]=a=>o(n).param.fileUrl=a),placeholder:"请选择文件",clearable:"",style:{width:"200px"}},{default:l(()=>[e(I,{label:"请选择字典生成",value:""})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(r,{span:8,class:_(s.value?"colNone":"colBlock")},{default:l(()=>[e(u,null,{default:l(()=>[e(v,{type:"primary",onClick:d},{default:l(()=>[e(m,null,{default:l(()=>[e(G)]),_:1}),g("搜索")]),_:1}),e(v,{onClick:t[2]||(t[2]=a=>P(E.value))},{default:l(()=>[e(m,null,{default:l(()=>[e(Q)]),_:1}),g("重置")]),_:1}),e(v,{type:"primary",link:"",onClick:H},{default:l(()=>[g($(F.value)+" ",1),y(e(m,null,{default:l(()=>[e(X)]),_:1},512),[[U,s.value]]),y(e(m,null,{default:l(()=>[e(Z)]),_:1},512),[[U,!s.value]])]),_:1})]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"应用名称",prop:"name"},{default:l(()=>[e(f,{modelValue:o(n).param.name,"onUpdate:modelValue":t[3]||(t[3]=a=>o(n).param.name=a),placeholder:"请输入应用名称",clearable:"",onKeyup:A(d,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"包名",prop:"bundleId"},{default:l(()=>[e(f,{modelValue:o(n).param.bundleId,"onUpdate:modelValue":t[4]||(t[4]=a=>o(n).param.bundleId=a),placeholder:"请输入包名",clearable:"",onKeyup:A(d,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"版本号",prop:"version"},{default:l(()=>[e(f,{modelValue:o(n).param.version,"onUpdate:modelValue":t[5]||(t[5]=a=>o(n).param.version=a),placeholder:"请输入版本号",clearable:"",onKeyup:A(d,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"文件大小",prop:"size"},{default:l(()=>[e(f,{modelValue:o(n).param.size,"onUpdate:modelValue":t[6]||(t[6]=a=>o(n).param.size=a),placeholder:"请输入文件大小",clearable:"",onKeyup:A(d,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"类型",prop:"type"},{default:l(()=>[e(L,{filterable:"",modelValue:o(n).param.type,"onUpdate:modelValue":t[7]||(t[7]=a=>o(n).param.type=a),placeholder:"请选择类型",clearable:"",style:{width:"200px"}},{default:l(()=>[(b(!0),S(le,null,ae(o(C),a=>(b(),k(I,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"描述",prop:"description"},{default:l(()=>[e(f,{modelValue:o(n).param.description,"onUpdate:modelValue":t[8]||(t[8]=a=>o(n).param.description=a),placeholder:"请输入描述",clearable:"",onKeyup:A(d,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"图标",prop:"iconUrl"},{default:l(()=>[e(f,{modelValue:o(n).param.iconUrl,"onUpdate:modelValue":t[9]||(t[9]=a=>o(n).param.iconUrl=a),placeholder:"请输入图标",clearable:"",onKeyup:A(d,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"付费",prop:"lock"},{default:l(()=>[e(z,{modelValue:o(n).param.lock,"onUpdate:modelValue":t[10]||(t[10]=a=>o(n).param.lock=a),class:"ml-2"},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"是否蓝奏云链接",prop:"lanzou"},{default:l(()=>[e(L,{filterable:"",modelValue:o(n).param.lanzou,"onUpdate:modelValue":t[11]||(t[11]=a=>o(n).param.lanzou=a),placeholder:"请选择是否蓝奏云链接",clearable:"",style:{width:"200px"}},{default:l(()=>[(b(!0),S(le,null,ae(o(N),a=>(b(),k(I,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"权重",prop:"weigh"},{default:l(()=>[e(f,{modelValue:o(n).param.weigh,"onUpdate:modelValue":t[12]||(t[12]=a=>o(n).param.weigh=a),placeholder:"请输入权重",clearable:"",onKeyup:A(d,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"是否启用",prop:"active"},{default:l(()=>[e(z,{modelValue:o(n).param.active,"onUpdate:modelValue":t[13]||(t[13]=a=>o(n).param.active=a),class:"ml-2"},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"备注",prop:"note"},{default:l(()=>[e(f,{modelValue:o(n).param.note,"onUpdate:modelValue":t[14]||(t[14]=a=>o(n).param.note=a),placeholder:"请输入备注",clearable:"",onKeyup:A(d,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,{label:"创建时间",prop:"createdAt"},{default:l(()=>[e(fe,{clearable:"",style:{width:"200px"},modelValue:o(n).param.createdAt,"onUpdate:modelValue":t[15]||(t[15]=a=>o(n).param.createdAt=a),format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",type:"datetime",placeholder:"选择创建时间"},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(r,{span:8,class:_(s.value?"colBlock":"colNone")},{default:l(()=>[e(u,null,{default:l(()=>[e(v,{type:"primary",onClick:d},{default:l(()=>[e(m,null,{default:l(()=>[e(G)]),_:1}),g("搜索")]),_:1}),e(v,{onClick:t[16]||(t[16]=a=>P(E.value))},{default:l(()=>[e(m,null,{default:l(()=>[e(Q)]),_:1}),g("重置")]),_:1}),e(v,{type:"primary",link:"",onClick:H},{default:l(()=>[g($(F.value)+" ",1),y(e(m,null,{default:l(()=>[e(X)]),_:1},512),[[U,s.value]]),y(e(m,null,{default:l(()=>[e(Z)]),_:1},512),[[U,!s.value]])]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["model"]),e(J,{gutter:10,class:"mb8"},{default:l(()=>[e(r,{span:1.5},{default:l(()=>[y((b(),k(v,{type:"primary",onClick:ue},{default:l(()=>[e(m,null,{default:l(()=>[e(be)]),_:1}),g("新增")]),_:1})),[[w,"api/v1/appsource/asApplication/add"]])]),_:1}),e(r,{span:1.5},{default:l(()=>[y((b(),k(v,{type:"success",disabled:M.value,onClick:t[17]||(t[17]=a=>q(null))},{default:l(()=>[e(m,null,{default:l(()=>[e(ge)]),_:1}),g("修改")]),_:1},8,["disabled"])),[[w,"api/v1/appsource/asApplication/edit"]])]),_:1}),e(r,{span:1.5},{default:l(()=>[y((b(),k(v,{type:"danger",disabled:Y.value,onClick:t[18]||(t[18]=a=>j(null))},{default:l(()=>[e(m,null,{default:l(()=>[e(ye)]),_:1}),g("删除")]),_:1},8,["disabled"])),[[w,"api/v1/appsource/asApplication/delete"]])]),_:1}),e(r,{span:1.5},{default:l(()=>[y((b(),k(v,{type:"warning",onClick:t[19]||(t[19]=a=>me())},{default:l(()=>[e(m,null,{default:l(()=>[e(ke)]),_:1}),g("导出Excel")]),_:1})),[[w,"api/v1/appsource/asApplication/export"]])]),_:1}),e(r,{span:1.5},{default:l(()=>[y((b(),k(v,{type:"success",onClick:t[20]||(t[20]=a=>_e())},{default:l(()=>[e(m,null,{default:l(()=>[e(Ve)]),_:1}),g("导入Excel")]),_:1})),[[w,"api/v1/appsource/asApplication/import"]])]),_:1})]),_:1})]),y((b(),k(xe,{data:o(n).data,onSelectionChange:de},{default:l(()=>[e(c,{type:"selection",width:"55",align:"center"}),e(c,{label:"ID",align:"center",prop:"id","min-width":"150px"}),e(c,{label:"软件地址",align:"center",prop:"fileUrl","min-width":"150px"}),e(c,{label:"应用名称",align:"center",prop:"name","min-width":"150px"}),e(c,{label:"包名",align:"center",prop:"bundleId","min-width":"150px"}),e(c,{label:"版本号",align:"center",prop:"version","min-width":"150px"}),e(c,{label:"文件大小",align:"center",prop:"size","min-width":"150px"}),e(c,{label:"类型",align:"center",prop:"type",formatter:pe,"min-width":"150px"}),e(c,{label:"描述",align:"center",prop:"description","min-width":"150px"}),e(c,{label:"图标",align:"center",prop:"iconUrl","min-width":"150px"}),e(c,{label:"付费",align:"center",prop:"lock","min-width":"150px"},{default:l(a=>[e(z,{modelValue:a.row.lock,"onUpdate:modelValue":h=>a.row.lock=h,class:"ml-2",onChange:h=>ie(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(c,{label:"是否蓝奏云链接",align:"center",prop:"lanzou",formatter:se,"min-width":"150px"}),e(c,{label:"权重",align:"center",prop:"weigh","min-width":"150px"}),e(c,{label:"是否启用",align:"center",prop:"active","min-width":"150px"},{default:l(a=>[e(z,{modelValue:a.row.active,"onUpdate:modelValue":h=>a.row.active=h,class:"ml-2",onChange:h=>re(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(c,{label:"备注",align:"center",prop:"note","min-width":"150px"}),e(c,{label:"创建时间",align:"center",prop:"createdAt","min-width":"150px"},{default:l(a=>[ee("span",null,$(o(D).parseTime(a.row.createdAt,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:1}),e(c,{label:"操作",align:"center","class-name":"small-padding","min-width":"200px",fixed:"right"},{default:l(a=>[y((b(),k(v,{type:"primary",link:"",onClick:h=>ce(a.row)},{default:l(()=>[e(m,null,{default:l(()=>[e(Ae)]),_:1}),g("详情")]),_:2},1032,["onClick"])),[[w,"api/v1/appsource/asApplication/get"]]),y((b(),k(v,{type:"primary",link:"",onClick:h=>q(a.row)},{default:l(()=>[e(m,null,{default:l(()=>[e(we)]),_:1}),g("修改")]),_:2},1032,["onClick"])),[[w,"api/v1/appsource/asApplication/edit"]]),y((b(),k(v,{type:"primary",link:"",onClick:h=>j(a.row)},{default:l(()=>[e(m,null,{default:l(()=>[e(he)]),_:1}),g("删除")]),_:2},1032,["onClick"])),[[w,"api/v1/appsource/asApplication/delete"]])]),_:1})]),_:1},8,["data"])),[[Ce,O.value]]),y(e(Ue,{total:o(n).total,page:o(n).param.pageNum,"onUpdate:page":t[21]||(t[21]=a=>o(n).param.pageNum=a),limit:o(n).param.pageSize,"onUpdate:limit":t[22]||(t[22]=a=>o(n).param.pageSize=a),onPagination:d},null,8,["total","page","limit"]),[[U,o(n).total>0]])]),_:1}),e(Ke,{ref_key:"editRef",ref:R,typeOptions:o(C),lockOptions:o(B),lanzouOptions:o(N),activeOptions:o(B),onAsApplicationList:d},null,8,["typeOptions","lockOptions","lanzouOptions","activeOptions"]),e(Te,{ref_key:"detailRef",ref:K,typeOptions:o(C),lockOptions:o(B),lanzouOptions:o(N),activeOptions:o(B),onAsApplicationList:d},null,8,["typeOptions","lockOptions","lanzouOptions","activeOptions"]),e(Me,{ref_key:"loadExcelAsApplicationRef",ref:T,onGetList:d,upUrl:"api/v1/appsource/asApplication/import",tplUrl:"/api/v1/appsource/asApplication/excelTemplate"},null,512)])}}}),ql=Pe(je,[["__scopeId","data-v-7068f773"]]);export{ql as default};
