import{_ as P}from"./editMenu.vue_vue_type_script_setup_true_lang-BgE8Can1.js";import{d as H,h as U}from"./index-Cf93PWEY.js";import{E as F,a as Q}from"./element-plus-BcbsnzDt.js";import{d as Z,b as V,Z as j,_ as G,E as J,o as p,c as K,U as e,O as o,u as i,i as W,ai as l,aq as X,a as h,S as s,P as w,M as y,T as u,R as Y}from"./@vue-CIdpUgdv.js";import"./index-tv3EQEJT.js";import"./getStyleSheets-Cjky2Pqb.js";import"./@element-plus-jSNvwxF2.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./@intlify-BrbEMGpa.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";const ee={class:"system-menu-container"},te={class:"system-menu-search mb15"},oe={class:"ml10"},Ke=Z({name:"apiV1SystemAuthMenuList",__name:"index",setup(le){const v=V(),b=j({queryParams:{title:"",component:""},menuTableData:[]}),{queryParams:d,menuTableData:z}=G(b),{proxy:c}=W(),{sys_show_hide:C}=c.useDict("sys_show_hide"),T=V("add"),k=n=>{T.value="add",v.value.openDialog(n)},B=n=>{T.value="edit",v.value.openDialog(n)},S=n=>{F.confirm(`此操作将永久删除菜单：“${n.title}”, 是否继续?`,"提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(()=>{U(n.id).then(()=>{Q.success("删除成功"),c.$refs.editMenuRef.resetMenuSession(),_()})}).catch(()=>{})},$=n=>c.selectDictLabel(i(C),""+n.isHide);J(()=>{_()});const E=()=>{_()},_=()=>{H(b.queryParams).then(n=>{b.menuTableData=c.handleTree(n.data.rules??[],"id","pid")})};return(n,r)=>{const M=l("el-input"),g=l("el-form-item"),R=l("ele-Search"),x=l("el-icon"),m=l("el-button"),L=l("ele-FolderAdd"),O=l("el-form"),q=l("SvgIcon"),a=l("el-table-column"),A=l("el-tag"),I=l("el-table"),N=l("el-card"),f=X("auth");return p(),K("div",ee,[e(N,{shadow:"hover"},{default:o(()=>[h("div",te,[e(O,{inline:!0},{default:o(()=>[e(g,{label:"菜单名称"},{default:o(()=>[e(M,{modelValue:i(d).title,"onUpdate:modelValue":r[0]||(r[0]=t=>i(d).title=t),placeholder:"请输入菜单名称",clearable:"",class:"w-50 m-2",size:"default"},null,8,["modelValue"])]),_:1}),e(g,{label:"组件路径"},{default:o(()=>[e(M,{modelValue:i(d).component,"onUpdate:modelValue":r[1]||(r[1]=t=>i(d).component=t),placeholder:"请输入组件路径",clearable:"",size:"default",class:"w-50 m-2"},null,8,["modelValue"])]),_:1}),e(g,null,{default:o(()=>[e(m,{size:"default",type:"primary",class:"ml10",onClick:E},{default:o(()=>[e(x,null,{default:o(()=>[e(R)]),_:1}),s(" 查询 ")]),_:1}),w((p(),y(m,{size:"default",type:"success",class:"ml10",onClick:r[2]||(r[2]=t=>k(null))},{default:o(()=>[e(x,null,{default:o(()=>[e(L)]),_:1}),s(" 新增菜单 ")]),_:1})),[[f,"api/v1/system/menu/add"]])]),_:1})]),_:1})]),e(I,{data:i(z),style:{width:"100%"},"row-key":"path","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:o(()=>[e(a,{label:"菜单名称","show-overflow-tooltip":""},{default:o(t=>[e(q,{name:t.row.icon},null,8,["name"]),h("span",oe,u(t.row.title),1)]),_:1}),e(a,{prop:"path",label:"路由路径","show-overflow-tooltip":""}),e(a,{label:"组件路径","show-overflow-tooltip":""},{default:o(t=>[h("span",null,u(t.row.component),1)]),_:1}),e(a,{label:"api接口","show-overflow-tooltip":""},{default:o(t=>[h("span",null,u(t.row.name),1)]),_:1}),e(a,{label:"排序","show-overflow-tooltip":"",width:"80"},{default:o(t=>[s(u(t.row.weigh),1)]),_:1}),e(a,{label:"类型","show-overflow-tooltip":"",width:"80"},{default:o(t=>[e(A,{type:t.row.menuType===0?"danger":t.row.menuType===1?"success":"warning",size:"small"},{default:o(()=>[s(u(t.row.menuType===0?"目录":t.row.menuType===1?"菜单":"按钮"),1)]),_:2},1032,["type"])]),_:1}),e(a,{prop:"isHide",label:"显示状态",formatter:$,width:"120"}),e(a,{label:"操作",width:"240"},{default:o(t=>[t.row.menuType!==2?w((p(),y(m,{key:0,size:"small",text:"",type:"primary",onClick:D=>k(t.row)},{default:o(()=>[s("新增")]),_:2},1032,["onClick"])),[[f,"api/v1/system/menu/add"]]):Y("",!0),w((p(),y(m,{size:"small",text:"",type:"primary",onClick:D=>B(t.row)},{default:o(()=>[s("修改")]),_:2},1032,["onClick"])),[[f,"api/v1/system/menu/update"]]),w((p(),y(m,{size:"small",text:"",type:"primary",onClick:D=>S(t.row)},{default:o(()=>[s("删除")]),_:2},1032,["onClick"])),[[f,"api/v1/system/menu/delete"]])]),_:1})]),_:1},8,["data"])]),_:1}),e(P,{ref_key:"editMenuRef",ref:v,onMenuList:_,visibleOptions:i(C),acType:T.value},null,8,["visibleOptions","acType"])])}}});export{Ke as default};
