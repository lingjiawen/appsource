import{d as Be,b as V,k as Pe,Z as Ae,_ as Ie,j as Ne,o as r,c as R,U as e,O as l,u as t,i as Ee,ai as i,aq as oe,a as K,a9 as L,F as U,a8 as S,M as _,I as k,S as y,T as F,P as b,V as N,ae as Le}from"./@vue-CIdpUgdv.js";import{l as Fe,c as We,b as $e,d as Ke}from"./signRedeemCode-B5rpnkPq.js";import ze from"./add-BHNlY9A-.js";import Me from"./edit-v34gZa8P.js";import qe from"./detail-e-O7DQSP.js";import{l as je,d as Ge}from"./index-8l9Z7Oa5.js";import{a as ne,E as Qe}from"./element-plus-BcbsnzDt.js";import{a as Xe}from"./index-Cf93PWEY.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@element-plus-jSNvwxF2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./@intlify-BrbEMGpa.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";const Ze={class:"install-signRedeemCode-container"},He={class:"install-signRedeemCode-search mb15"},Je=Be({name:"apiV1InstallSignRedeemCodeList",__name:"index",setup(Ye){const{proxy:g}=Ee(),W=V(!1),$=V(),z=V(),M=V(),pe=V(),q=V(),s=V(!1),j=V(!0),G=V(!0),Q=Pe(()=>s.value===!1?"展开搜索":"收起搜索"),{apple_account_type:B,apple_warranty_type:w,apple_device_type:P,apple_pool_type:A,api_platform_type:I}=g.useDict("apple_account_type","apple_warranty_type","apple_device_type","apple_pool_type","api_platform_type"),T=Ae({ids:[],tableData:{data:[],total:0,loading:!1,param:{pageNum:1,pageSize:10,id:void 0,code:void 0,udid:void 0,certId:void 0,accountType:void 0,warrantyType:void 0,deviceType:void 0,pool:void 0,apiPlatform:void 0,apiWarrantyType:void 0,note:void 0,banned:void 0,active:void 0,activeAt:void 0,createdBy:void 0,createdAt:void 0,dateRange:[]}}}),{tableData:p}=Ie(T);Ne(()=>{ie()});const ie=()=>{c()},X=n=>{n&&(n.resetFields(),c())},c=()=>{W.value=!0,Fe(T.tableData.param).then(n=>{let o=n.data.list??[];T.tableData.data=o,T.tableData.total=n.data.total,W.value=!1})},Z=()=>{s.value=!s.value},re=n=>g.selectDictLabel(B.value,n.accountType),de=n=>g.selectDictLabel(w.value,n.warrantyType),se=n=>g.selectDictLabel(P.value,n.deviceType),ue=n=>g.selectDictLabel(A.value,n.pool),me=n=>g.selectDictLabel(I.value,n.apiPlatform),ce=n=>g.selectDictLabel(w.value,n.apiWarrantyType),fe=n=>{We(n.id,n.banned).catch(()=>{setTimeout(()=>{n.banned=!n.banned},300)})},_e=n=>{$e(n.id,n.active).catch(()=>{setTimeout(()=>{n.active=!n.active},300)})},ve=n=>{T.ids=n.map(o=>o.id),j.value=n.length!=1,G.value=!n.length},ye=()=>{M.value.openDialog()},H=n=>{n||(n=T.tableData.data.find(o=>o.id===T.ids[0])),z.value.openDialog(Le(n))},J=n=>{let o="你确定要删除所选数据？",C=[];if(n?(o="此操作将永久删除数据，是否继续?",C=[n.id]):C=T.ids,C.length===0){ne.error("请选择要删除的数据。");return}Qe.confirm(o,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{Ke(C).then(()=>{ne.success("删除成功"),c()})}).catch(()=>{})},be=()=>{Ge("/api/v1/install/signRedeemCode/export",T.tableData.param,"get")},ge=()=>{q.value.open()};return(n,o)=>{const C=i("el-input"),f=i("el-form-item"),d=i("el-col"),O=i("el-option"),D=i("el-select"),Y=i("ele-Search"),m=i("el-icon"),v=i("el-button"),ee=i("ele-Refresh"),le=i("ele-ArrowUp"),ae=i("ele-ArrowDown"),E=i("el-switch"),te=i("el-row"),we=i("el-form"),Te=i("ele-Plus"),Ce=i("ele-Edit"),Ve=i("ele-Delete"),ke=i("ele-Download"),he=i("ele-Upload"),u=i("el-table-column"),xe=i("ele-EditPen"),Re=i("ele-DeleteFilled"),Oe=i("el-table"),De=i("pagination"),Ue=i("el-card"),h=oe("auth"),Se=oe("loading");return r(),R("div",Ze,[e(Ue,{shadow:"hover"},{default:l(()=>[K("div",He,[e(we,{model:t(p).param,ref_key:"queryRef",ref:$,inline:!0,"label-width":"100px"},{default:l(()=>[e(te,{class:"search-fields-container"},{default:l(()=>[e(d,{span:8},{default:l(()=>[e(f,{label:"UDID",prop:"udid"},{default:l(()=>[e(C,{modelValue:t(p).param.udid,"onUpdate:modelValue":o[0]||(o[0]=a=>t(p).param.udid=a),placeholder:"请输入UDID",clearable:"",onKeyup:L(c,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:8},{default:l(()=>[e(f,{label:"时效类型",prop:"accountType"},{default:l(()=>[e(D,{filterable:"",modelValue:t(p).param.accountType,"onUpdate:modelValue":o[1]||(o[1]=a=>t(p).param.accountType=a),placeholder:"秒出/审核",clearable:"",style:{"min-width":"170px"}},{default:l(()=>[(r(!0),R(U,null,S(t(B),a=>(r(),_(O,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{span:8,class:"colBlock"},{default:l(()=>[e(f,{label:"兑换码",prop:"code"},{default:l(()=>[e(C,{modelValue:t(p).param.code,"onUpdate:modelValue":o[2]||(o[2]=a=>t(p).param.code=a),placeholder:"请输入兑换码",clearable:"",onKeyup:L(c,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1}),e(d,{span:8},{default:l(()=>[e(f,{label:"售后类型",prop:"warrantyType"},{default:l(()=>[e(D,{filterable:"",modelValue:t(p).param.warrantyType,"onUpdate:modelValue":o[3]||(o[3]=a=>t(p).param.warrantyType=a),placeholder:"请选择售后类型",clearable:"",style:{"min-width":"170px"}},{default:l(()=>[(r(!0),R(U,null,S(t(w),a=>(r(),_(O,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{span:8},{default:l(()=>[e(f,{label:"出书方式",prop:"pool"},{default:l(()=>[e(D,{filterable:"",modelValue:t(p).param.pool,"onUpdate:modelValue":o[4]||(o[4]=a=>t(p).param.pool=a),placeholder:"请选择出书方式",clearable:"",style:{"min-width":"170px"}},{default:l(()=>[(r(!0),R(U,null,S(t(A),a=>(r(),_(O,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(d,{span:8,class:k(s.value?"colNone":"colBlock")},{default:l(()=>[e(f,{class:"search-container"},{default:l(()=>[e(v,{type:"primary",onClick:c},{default:l(()=>[e(m,null,{default:l(()=>[e(Y)]),_:1}),y(" 搜索 ")]),_:1}),e(v,{onClick:o[5]||(o[5]=a=>X($.value))},{default:l(()=>[e(m,null,{default:l(()=>[e(ee)]),_:1}),y(" 重置 ")]),_:1}),e(v,{type:"primary",link:"",onClick:Z},{default:l(()=>[y(F(Q.value)+" ",1),b(e(m,null,{default:l(()=>[e(le)]),_:1},512),[[N,s.value]]),b(e(m,null,{default:l(()=>[e(ae)]),_:1},512),[[N,!s.value]])]),_:1})]),_:1})]),_:1},8,["class"]),e(d,{span:8,class:k(s.value?"colBlock":"colNone")},{default:l(()=>[e(f,{label:"证书标识",prop:"certId"},{default:l(()=>[e(C,{modelValue:t(p).param.certId,"onUpdate:modelValue":o[6]||(o[6]=a=>t(p).param.certId=a),placeholder:"请输入证书标识",clearable:"",onKeyup:L(c,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(d,{span:8,class:k(s.value?"colBlock":"colNone")},{default:l(()=>[e(f,{label:"设备类型",prop:"deviceType"},{default:l(()=>[e(D,{filterable:"",modelValue:t(p).param.deviceType,"onUpdate:modelValue":o[7]||(o[7]=a=>t(p).param.deviceType=a),placeholder:"请选择设备类型",clearable:"",style:{"min-width":"170px"}},{default:l(()=>[(r(!0),R(U,null,S(t(P),a=>(r(),_(O,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(d,{span:8,class:k(s.value?"colBlock":"colNone")},{default:l(()=>[e(f,{label:"对接平台",prop:"apiPlatform"},{default:l(()=>[e(D,{filterable:"",modelValue:t(p).param.apiPlatform,"onUpdate:modelValue":o[8]||(o[8]=a=>t(p).param.apiPlatform=a),placeholder:"请选择对接平台",clearable:"",style:{"min-width":"170px"}},{default:l(()=>[(r(!0),R(U,null,S(t(I),a=>(r(),_(O,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(d,{span:8,class:k(s.value?"colBlock":"colNone")},{default:l(()=>[e(f,{label:"对接售后类型",prop:"apiWarrantyType"},{default:l(()=>[e(D,{filterable:"",modelValue:t(p).param.apiWarrantyType,"onUpdate:modelValue":o[9]||(o[9]=a=>t(p).param.apiWarrantyType=a),placeholder:"请选择对接售后类型",clearable:"",style:{"min-width":"170px"}},{default:l(()=>[(r(!0),R(U,null,S(t(w),a=>(r(),_(O,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(d,{span:8,class:k(s.value?"colBlock":"colNone")},{default:l(()=>[e(f,{label:"备注",prop:"note"},{default:l(()=>[e(C,{modelValue:t(p).param.note,"onUpdate:modelValue":o[10]||(o[10]=a=>t(p).param.note=a),placeholder:"请输入备注",clearable:"",onKeyup:L(c,["enter","native"])},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(d,{span:8,class:k(s.value?"colBlock":"colNone")},{default:l(()=>[e(f,{label:"禁用",prop:"banned"},{default:l(()=>[e(E,{modelValue:t(p).param.banned,"onUpdate:modelValue":o[11]||(o[11]=a=>t(p).param.banned=a),class:"ml-2"},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(d,{span:8,class:k(s.value?"colBlock":"colNone")},{default:l(()=>[e(f,{label:"激活",prop:"active"},{default:l(()=>[e(E,{modelValue:t(p).param.active,"onUpdate:modelValue":o[12]||(o[12]=a=>t(p).param.active=a),class:"ml-2"},null,8,["modelValue"])]),_:1})]),_:1},8,["class"]),e(d,{span:8,class:k(s.value?"colBlock":"colNone")},{default:l(()=>[e(f,null,{default:l(()=>[e(v,{type:"primary",onClick:c},{default:l(()=>[e(m,null,{default:l(()=>[e(Y)]),_:1}),y(" 搜索 ")]),_:1}),e(v,{onClick:o[13]||(o[13]=a=>X($.value))},{default:l(()=>[e(m,null,{default:l(()=>[e(ee)]),_:1}),y(" 重置 ")]),_:1}),e(v,{type:"primary",link:"",onClick:Z},{default:l(()=>[y(F(Q.value)+" ",1),b(e(m,null,{default:l(()=>[e(le)]),_:1},512),[[N,s.value]]),b(e(m,null,{default:l(()=>[e(ae)]),_:1},512),[[N,!s.value]])]),_:1})]),_:1})]),_:1},8,["class"])]),_:1})]),_:1},8,["model"]),e(te,{gutter:10,class:"btn-container"},{default:l(()=>[e(d,{span:1.5},{default:l(()=>[b((r(),_(v,{type:"primary",onClick:ye},{default:l(()=>[e(m,null,{default:l(()=>[e(Te)]),_:1}),y(" 新增 ")]),_:1})),[[h,"api/v1/install/signRedeemCode/add"]])]),_:1}),e(d,{span:1.5},{default:l(()=>[b((r(),_(v,{type:"success",disabled:j.value,onClick:o[14]||(o[14]=a=>H(null))},{default:l(()=>[e(m,null,{default:l(()=>[e(Ce)]),_:1}),y(" 修改 ")]),_:1},8,["disabled"])),[[h,"api/v1/install/signRedeemCode/edit"]])]),_:1}),e(d,{span:1.5},{default:l(()=>[b((r(),_(v,{type:"danger",disabled:G.value,onClick:o[15]||(o[15]=a=>J(null))},{default:l(()=>[e(m,null,{default:l(()=>[e(Ve)]),_:1}),y(" 删除 ")]),_:1},8,["disabled"])),[[h,"api/v1/install/signRedeemCode/delete"]])]),_:1}),e(d,{span:1.5},{default:l(()=>[b((r(),_(v,{type:"warning",onClick:o[16]||(o[16]=a=>be())},{default:l(()=>[e(m,null,{default:l(()=>[e(ke)]),_:1}),y(" 导出Excel ")]),_:1})),[[h,"api/v1/install/signRedeemCode/export"]])]),_:1}),e(d,{span:1.5},{default:l(()=>[b((r(),_(v,{type:"success",onClick:o[17]||(o[17]=a=>ge())},{default:l(()=>[e(m,null,{default:l(()=>[e(he)]),_:1}),y(" 导入Excel ")]),_:1})),[[h,"api/v1/install/signRedeemCode/import"]])]),_:1})]),_:1})]),b((r(),_(Oe,{data:t(p).data,onSelectionChange:ve},{default:l(()=>[e(u,{type:"selection",width:"55",align:"center"}),e(u,{label:"兑换码",align:"center",prop:"code","min-width":"200px"}),e(u,{label:"设备码",align:"center",prop:"udid","min-width":"250px"}),e(u,{label:"证书标识",align:"center",prop:"certId","min-width":"100px"}),e(u,{label:"时效类型",align:"center",prop:"accountType",formatter:re,"min-width":"100px"}),e(u,{label:"售后类型",align:"center",prop:"warrantyType",formatter:de,"min-width":"100px"}),e(u,{label:"设备类型",align:"center",prop:"deviceType",formatter:se,"min-width":"100px"}),e(u,{label:"出书方式",align:"center",prop:"pool",formatter:ue,"min-width":"100px"}),e(u,{label:"对接平台",align:"center",prop:"apiPlatform",formatter:me,"min-width":"100px"}),e(u,{label:"对接售后",align:"center",prop:"apiWarrantyType",formatter:ce,"min-width":"100px"}),e(u,{label:"备注",align:"center",prop:"note","min-width":"150px"}),e(u,{label:"禁用",align:"center",prop:"banned","min-width":"150px"},{default:l(a=>[e(E,{modelValue:a.row.banned,"onUpdate:modelValue":x=>a.row.banned=x,class:"ml-2","active-value":1,"inactive-value":0,onChange:x=>fe(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(u,{label:"激活",align:"center",prop:"active","min-width":"100px"},{default:l(a=>[e(E,{modelValue:a.row.active,"onUpdate:modelValue":x=>a.row.active=x,"active-value":1,"inactive-value":0,class:"ml-2",onChange:x=>_e(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(u,{label:"激活时间",align:"center",prop:"activeAt","min-width":"180px"},{default:l(a=>[K("span",null,F(t(g).parseTime(a.row.activeAt,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:1}),e(u,{label:"创建时间",align:"center",prop:"createdAt","min-width":"180px"},{default:l(a=>[K("span",null,F(t(g).parseTime(a.row.createdAt,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:1}),e(u,{label:"操作",align:"center","class-name":"operation-container small-padding","min-width":"80px",fixed:"right"},{default:l(a=>[b((r(),_(v,{type:"primary",link:"",onClick:x=>H(a.row)},{default:l(()=>[e(m,null,{default:l(()=>[e(xe)]),_:1}),y(" 修改 ")]),_:2},1032,["onClick"])),[[h,"api/v1/install/signRedeemCode/edit"]]),b((r(),_(v,{type:"primary",link:"",onClick:x=>J(a.row)},{default:l(()=>[e(m,null,{default:l(()=>[e(Re)]),_:1}),y(" 删除 ")]),_:2},1032,["onClick"])),[[h,"api/v1/install/signRedeemCode/delete"]])]),_:1})]),_:1},8,["data"])),[[Se,W.value]]),b(e(De,{total:t(p).total,page:t(p).param.pageNum,"onUpdate:page":o[18]||(o[18]=a=>t(p).param.pageNum=a),limit:t(p).param.pageSize,"onUpdate:limit":o[19]||(o[19]=a=>t(p).param.pageSize=a),onPagination:c},null,8,["total","page","limit"]),[[N,t(p).total>0]])]),_:1}),e(ze,{ref_key:"addRef",ref:M,accountTypeOptions:t(B),warrantyTypeOptions:t(w),deviceTypeOptions:t(P),poolOptions:t(A),apiPlatformOptions:t(I),onSignRedeemCodeList:c},null,8,["accountTypeOptions","warrantyTypeOptions","deviceTypeOptions","poolOptions","apiPlatformOptions"]),e(Me,{ref_key:"editRef",ref:z,accountTypeOptions:t(B),warrantyTypeOptions:t(w),deviceTypeOptions:t(P),poolOptions:t(A),apiPlatformOptions:t(I),apiWarrantyTypeOptions:t(w),onSignRedeemCodeList:c},null,8,["accountTypeOptions","warrantyTypeOptions","deviceTypeOptions","poolOptions","apiPlatformOptions","apiWarrantyTypeOptions"]),e(qe,{ref_key:"detailRef",ref:pe,accountTypeOptions:t(B),warrantyTypeOptions:t(w),deviceTypeOptions:t(P),poolOptions:t(A),apiPlatformOptions:t(I),apiWarrantyTypeOptions:t(w),onSignRedeemCodeList:c},null,8,["accountTypeOptions","warrantyTypeOptions","deviceTypeOptions","poolOptions","apiPlatformOptions","apiWarrantyTypeOptions"]),e(je,{ref_key:"loadExcelSignRedeemCodeRef",ref:q,onGetList:c,upUrl:"api/v1/install/signRedeemCode/import",tplUrl:"/api/v1/install/signRedeemCode/excelTemplate"},null,512)])}}}),Ql=Xe(Je,[["__scopeId","data-v-cf1ff584"]]);export{Ql as default};
