import{d as V,Z as D,k as S,e as A,j as N,_ as x,ai as h,o as y,M as b,O as m,c as R,F as W,a8 as P,U as C,a as F,T as k,aa as j,E as O,P as U,V as z,u as I,R as Z,I as G,i as J}from"./@vue-CIdpUgdv.js";import{s as L}from"./pinia-DE-bJcb2.js";import{u as E,a as K,a4 as Q,i as X,a5 as Y}from"./index-Cf93PWEY.js";import{S as ee,L as te}from"./main.vue_vue_type_script_setup_true_lang-BJbZ2yLL.js";import{u as se,o as ne}from"./vue-router-CWOL7ATe.js";const oe=V({name:"navMenuVertical",components:{SubItem:ee},props:{menuList:{type:Array,default:()=>[]}},setup(i){const a=E(),{themeConfig:u}=L(a),d=se(),r=D({defaultActive:d.meta.isDynamic?d.meta.isDynamicPath:d.path,isCollapse:!1}),g=S(()=>i.menuList),o=S(()=>u.value),_=n=>{const{path:f,meta:p}=n,s=p.isDynamic?p.isDynamicPath.split("/"):f.split("/");return s.length>=4&&p.isHide?s.splice(0,3).join("/"):f};return A(u.value,()=>{document.body.clientWidth<=1e3?r.isCollapse=!1:r.isCollapse=u.value.isCollapse},{immediate:!0}),N(()=>{r.defaultActive=_(d)}),ne(n=>{r.defaultActive=_(n),document.body.clientWidth<1e3&&(u.value.isCollapse=!1)}),{menuLists:g,getThemeConfig:o,...x(r)}}}),ie=["href"];function ae(i,a,u,d,r,g){const o=h("SvgIcon"),_=h("SubItem"),n=h("el-sub-menu"),f=h("el-menu-item"),p=h("el-menu");return y(),b(p,{router:"","default-active":i.defaultActive,"background-color":"transparent",collapse:i.isCollapse,"unique-opened":i.getThemeConfig.isUniqueOpened,"collapse-transition":!1},{default:m(()=>[(y(!0),R(W,null,P(i.menuLists,s=>(y(),R(W,null,[s.children&&s.children.length>0?(y(),b(n,{index:s.path,key:s.path},{title:m(()=>[C(o,{name:s.meta.icon},null,8,["name"]),F("span",null,k(i.$t(s.meta.title)),1)]),default:m(()=>[C(_,{chil:s.children},null,8,["chil"])]),_:2},1032,["index"])):(y(),b(f,{index:s.path,key:s.path},j({default:m(()=>[C(o,{name:s.meta.icon},null,8,["name"])]),_:2},[!s.meta.isLink||s.meta.isLink&&s.meta.isIframe?{name:"title",fn:m(()=>[F("span",null,k(i.$t(s.meta.title)),1)]),key:"0"}:{name:"title",fn:m(()=>[F("a",{href:s.meta.isLink,target:"_blank",rel:"opener",class:"w100"},k(i.$t(s.meta.title)),9,ie)]),key:"1"}]),1032,["index"]))],64))),256))]),_:1},8,["default-active","collapse","unique-opened"])}const le=K(oe,[["render",ae]]),ue={class:"h100"},pe=V({name:"layoutAside",__name:"aside",setup(i){const{proxy:a}=J(),u=Q(),d=E(),r=X(),{routesList:g}=L(u),{themeConfig:o}=L(d),{isTagsViewCurrenFull:_}=L(r),n=D({menuList:[],clientWidth:0}),{menuList:f}=x(n),p=S(()=>{const{layout:e,isCollapse:t,menuBar:l}=o.value,c=["#FFFFFF","#FFF","#fff","#ffffff"].includes(l)?"layout-el-aside-br-color":"";if(n.clientWidth<=1e3)if(t){document.body.setAttribute("class","el-popup-parent--hidden");const H=document.querySelector(".layout-container"),B=document.createElement("div");return B.setAttribute("class","layout-aside-mobile-mode"),H.appendChild(B),B.addEventListener("click",s),[c,"layout-aside-mobile","layout-aside-mobile-open"]}else return s(),[c,"layout-aside-mobile","layout-aside-mobile-close"];else return e==="columns"?t?[c,"layout-aside-pc-1"]:[c,"layout-aside-pc-220"]:t?[c,"layout-aside-pc-64"]:[c,"layout-aside-pc-220"]}),s=()=>{const e=document.querySelector(".layout-aside-mobile-mode");e==null||e.setAttribute("style","animation: error-img-two 0.3s"),setTimeout(()=>{var l;(l=e==null?void 0:e.parentNode)==null||l.removeChild(e)},300),document.body.clientWidth<1e3&&(o.value.isCollapse=!1),document.body.setAttribute("class","")},q=S(()=>{let{layout:e,isShowLogo:t}=o.value;return t&&e==="defaults"||t&&e==="columns"}),v=()=>{if(o.value.layout==="columns")return!1;n.menuList=w(g.value)},w=e=>e.filter(t=>!t.meta.isHide).map(t=>(t=Object.assign({},t),t.children&&(t.children=w(t.children)),t)),M=e=>{n.clientWidth=e},T=e=>{let{layout:t}=o.value;if(t!=="columns")return!1;e||a.mittBus.emit("restoreDefault"),u.setColumnsMenuHover(e)};return A(o.value,e=>{if(e.isShowLogoChange!==e.isShowLogo){if(!a.$refs.layoutAsideScrollbarRef)return!1;a.$refs.layoutAsideScrollbarRef.update()}}),A(Y.state,e=>{let{layout:t,isClassicSplitMenu:l}=e.themeConfig.themeConfig;if(t==="classic"&&l)return!1;v()},{deep:!0}),O(()=>{M(document.body.clientWidth),v(),a.mittBus.on("setSendColumnsChildren",e=>{n.menuList=e.children}),a.mittBus.on("setSendClassicChildren",e=>{let{layout:t,isClassicSplitMenu:l}=o.value;t==="classic"&&l&&(n.menuList=[],n.menuList=e.children)}),a.mittBus.on("getBreadcrumbIndexSetFilterRoutes",()=>{v()}),a.mittBus.on("layoutMobileResize",e=>{M(e.clientWidth),s()})}),(e,t)=>{const l=h("el-scrollbar"),$=h("el-aside");return U((y(),R("div",ue,[C($,{class:G(["layout-aside",p.value])},{default:m(()=>[q.value?(y(),b(te,{key:0})):Z("",!0),C(l,{class:"flex-auto",ref:"layoutAsideScrollbarRef",onMouseenter:t[0]||(t[0]=c=>T(!0)),onMouseleave:t[1]||(t[1]=c=>T(!1))},{default:m(()=>[C(le,{menuList:I(f)},null,8,["menuList"])]),_:1},512)]),_:1},8,["class"])],512)),[[z,!I(_)]])}}});export{pe as _};
