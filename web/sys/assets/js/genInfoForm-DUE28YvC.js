import{d as Z,b as P,Z as G,j as H,o as i,M as N,O as l,i as J,u as n,ai as r,B as K,U as e,a as s,S as d,T as q,c as v,R as X,P as Y,V as $,a8 as y,F as h,bl as ee,bj as le}from"./@vue-CIdpUgdv.js";import{m as te,a as ae}from"./index-Cf93PWEY.js";import{a as oe}from"./element-plus-BcbsnzDt.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./@element-plus-jSNvwxF2.js";import"./nprogress-ekFNJb3B.js";import"./@intlify-BrbEMGpa.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";const B=g=>(ee("data-v-6776582a"),g=g(),le(),g),ne=B(()=>s("span",null,"生成模板",-1)),re={key:0},ue=B(()=>s("h4",{class:"form-header"},"其他信息",-1)),se=Z({name:"genInfoForm",__name:"genInfoForm",emits:["goNext","close"],setup(g,{expose:M,emit:D}){const x=D,F=P(),o=K("tableData"),T=G({tplCategory:[{required:!0,message:"请选择生成模板",trigger:"blur"}],packageName:[{required:!0,message:"请输入生成包路径",trigger:"blur"}],moduleName:[{required:!0,message:"请输入生成模块名",trigger:"blur"}],businessName:[{required:!0,message:"请输入生成业务名",trigger:"blur"}],functionName:[{required:!0,message:"请输入生成功能名",trigger:"blur"}]}),{proxy:j}=J(),I=P([]);H(()=>{te().then(m=>{const a={id:0,title:"主类目",children:[]};a.children=j.handleTree(m.data.menus,"id","pid"),I.value=new Array(a)})});const w=()=>{let m=!1;const a=n(F);return a?(a.validate(c=>{c?(x("goNext"),m=!0):oe.error("请将表单填写完整")}),m):!1},L=()=>{x("close")},R=m=>{let a=m.lastIndexOf("/");return a!==-1?m.substring(a+1):m},z=m=>{o.value.moduleName=R(m)};return M({nextTip:w}),(m,a)=>{const c=r("el-option"),V=r("el-select"),p=r("el-form-item"),u=r("el-col"),_=r("ele-QuestionFilled"),f=r("el-icon"),b=r("el-tooltip"),C=r("el-input"),E=r("el-cascader"),k=r("el-row"),O=r("el-divider"),Q=r("el-checkbox"),A=r("el-form"),U=r("el-button"),W=r("el-card");return i(),N(W,{shadow:"never",header:"生成信息配置"},{default:l(()=>[e(A,{ref_key:"genInfoFormRef",ref:F,model:n(o),rules:T,"label-width":"150px"},{default:l(()=>[e(k,{gutter:35},{default:l(()=>[e(u,{class:"mb20",span:12},{default:l(()=>[e(p,{prop:"tplCategory"},{label:l(()=>[ne]),default:l(()=>[e(V,{modelValue:n(o).tplCategory,"onUpdate:modelValue":a[0]||(a[0]=t=>n(o).tplCategory=t)},{default:l(()=>[e(c,{label:"单表（增删改查）",value:"crud"}),e(c,{label:"树表（增删改查）",value:"tree"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mb20",span:12},{default:l(()=>[e(p,{prop:"packageName"},{label:l(()=>[s("span",null,[d(" 生成包路径 "),e(b,{content:"生成在哪个包下，例如 internal/app/system，必须internal/app开头，不可/结尾",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(_)]),_:1})]),_:1})])]),default:l(()=>[e(C,{modelValue:n(o).packageName,"onUpdate:modelValue":a[1]||(a[1]=t=>n(o).packageName=t),onInput:z},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mb20",span:12},{default:l(()=>[e(p,{prop:"businessName"},{label:l(()=>[s("span",null,[d(" 生成业务名 "),e(b,{content:"可理解为功能英文名，例如 user",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(_)]),_:1})]),_:1})])]),default:l(()=>[e(C,{modelValue:n(o).businessName,"onUpdate:modelValue":a[2]||(a[2]=t=>n(o).businessName=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mb20",span:12},{default:l(()=>[e(p,{prop:"functionName"},{label:l(()=>[s("span",null,[d(" 生成功能名 "),e(b,{content:"用作类描述，例如 用户",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(_)]),_:1})]),_:1})])]),default:l(()=>[e(C,{modelValue:n(o).functionName,"onUpdate:modelValue":a[3]||(a[3]=t=>n(o).functionName=t)},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mb20",span:12},{default:l(()=>[e(p,{label:"上级菜单"},{default:l(()=>[e(E,{options:I.value,props:{label:"title",value:"id",checkStrictly:!0,emitPath:!1},placeholder:"请选择上级菜单,默认为根目录",clearable:"",class:"w100",modelValue:n(o).menuPid,"onUpdate:modelValue":a[4]||(a[4]=t=>n(o).menuPid=t)},{default:l(({node:t,data:S})=>[s("span",null,q(S.title),1),t.isLeaf?X("",!0):(i(),v("span",re," ("+q(S.children.length)+") ",1))]),_:1},8,["options","modelValue"])]),_:1})]),_:1})]),_:1}),Y(s("div",null,[ue,e(O),e(k,{gutter:35},{default:l(()=>[e(u,{class:"mb20",span:8},{default:l(()=>[e(p,null,{label:l(()=>[s("span",null,[d(" 树编码字段 "),e(b,{content:"树显示的编码字段名， 如：dept_id",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(_)]),_:1})]),_:1})])]),default:l(()=>[e(V,{modelValue:n(o).treeCode,"onUpdate:modelValue":a[5]||(a[5]=t=>n(o).treeCode=t),placeholder:"请选择"},{default:l(()=>[(i(!0),v(h,null,y(n(o).columns,t=>(i(),N(c,{key:t.htmlField,label:t.columnName+"："+t.columnComment,value:t.htmlField},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mb20",span:8},{default:l(()=>[e(p,null,{label:l(()=>[s("span",null,[d(" 树父编码字段 "),e(b,{content:"树显示的父编码字段名， 如：parent_Id",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(_)]),_:1})]),_:1})])]),default:l(()=>[e(V,{modelValue:n(o).treeParentCode,"onUpdate:modelValue":a[6]||(a[6]=t=>n(o).treeParentCode=t),placeholder:"请选择"},{default:l(()=>[(i(!0),v(h,null,y(n(o).columns,t=>(i(),N(c,{key:t.htmlField,label:t.columnName+"："+t.columnComment,value:t.htmlField},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mb20",span:8},{default:l(()=>[e(p,null,{label:l(()=>[s("span",null,[d(" 树名称字段 "),e(b,{content:"树节点的显示名称字段名， 如：dept_name",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(_)]),_:1})]),_:1})])]),default:l(()=>[e(V,{modelValue:n(o).treeName,"onUpdate:modelValue":a[7]||(a[7]=t=>n(o).treeName=t),placeholder:"请选择"},{default:l(()=>[(i(!0),v(h,null,y(n(o).columns,t=>(i(),N(c,{key:t.htmlField,label:t.columnName+"："+t.columnComment,value:t.htmlField},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{class:"mb20",span:8},{default:l(()=>[e(p,null,{label:l(()=>[s("span",null,[d(" 使用虚拟化树表 "),e(b,{content:"如果该表数据量较大，请选择使用虚拟表，否则请勿选择，因为虚拟表会增加代码复杂度，后续如果修改所生成的页面会增加工作量",placement:"top"},{default:l(()=>[e(f,null,{default:l(()=>[e(_)]),_:1})]),_:1})])]),default:l(()=>[e(Q,{modelValue:n(o).useVirtual,"onUpdate:modelValue":a[8]||(a[8]=t=>n(o).useVirtual=t)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})],512),[[$,n(o).tplCategory=="tree"]])]),_:1},8,["model","rules"]),e(k,null,{default:l(()=>[e(u,{span:10}),e(u,{span:4,class:"base-footer"},{default:l(()=>[s("span",null,[e(U,{size:"default",onClick:L},{default:l(()=>[d("关 闭")]),_:1}),e(U,{type:"primary",onClick:w,size:"default"},{default:l(()=>[d("下一步")]),_:1})])]),_:1}),e(u,{span:10})]),_:1})]),_:1})}}}),Ye=ae(se,[["__scopeId","data-v-6776582a"]]);export{Ye as default};
