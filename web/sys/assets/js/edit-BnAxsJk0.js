import{g as N,a as q,u as H}from"./asRedeemCode-Cs__bbJp.js";import{a as V}from"./element-plus-BcbsnzDt.js";import{d as I,b as A,Z as T,_ as P,o as n,c as v,U as a,O as i,u as e,D as W,ai as r,aq as Z,P as j,S as u,T as D,a as z,F as G,a8 as J,M as K}from"./@vue-CIdpUgdv.js";import{a as Q}from"./index-Cf93PWEY.js";import"./lodash-es-1chB_st9.js";import"./@vueuse-Dw_h8qVP.js";import"./@element-plus-jSNvwxF2.js";import"./@popperjs-D9SI2xQl.js";import"./@ctrl-r5W6hzzQ.js";import"./dayjs-BB1_x23Y.js";import"./@intlify-BrbEMGpa.js";import"./async-validator-DKvM95Vc.js";import"./memoize-one-BdPwpGay.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@floating-ui-DSOXY3Ah.js";import"./pinia-DE-bJcb2.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CWOL7ATe.js";import"./js-cookie-Cz0CWeBA.js";import"./nprogress-ekFNJb3B.js";import"./axios-CdtiCRuU.js";import"./qs-Cbync0Ql.js";import"./side-channel-Bxu5bNZA.js";import"./get-intrinsic-BKEvijrG.js";import"./es-errors-DzOT6E3C.js";import"./has-symbols-eVqrYdw7.js";import"./has-proto-JnoBQRdH.js";import"./function-bind-BbkWVFrm.js";import"./hasown-DYqjtFKE.js";import"./call-bind-Bt3bzbWQ.js";import"./set-function-length-B5OANX0j.js";import"./define-data-property-DO9o5wXF.js";import"./es-define-property-tzmkNPou.js";import"./gopd-CEkvUycD.js";import"./has-property-descriptors-DphFXkuo.js";import"./object-inspect-C4zVfScY.js";import"./vue-i18n-C6ZazF2L.js";import"./vue-BUaMJYO7.js";import"./vue-clipboard3-B4JKg9Nx.js";import"./clipboard-UlwKUFeW.js";import"./mitt-DJ65BbbF.js";import"./vue-grid-layout-CBs1MJUm.js";import"./vue-simple-uploader-DfJosV98.js";import"./vue-ueditor-wrap-DRzi_KnA.js";const X={class:"appsource-asRedeemCode-edit"},$={class:"dialog-footer"},ee=I({name:"ApiV1AppsourceAsRedeemCodeEdit",__name:"edit",props:{typeOptions:{type:Array,default:()=>[]},activeOptions:{type:Array,default:()=>[]}},emits:["asRedeemCodeList"],setup(C,{expose:b,emit:R}){const _=R,g=A(null);A();const l=T({loading:!1,isShowDialog:!1,formData:{id:void 0,code:void 0,udid:void 0,type:void 0,active:!1,activeAt:void 0,createdBy:void 0,updatedBy:void 0,createdAt:void 0,updatedAt:void 0,deletedAt:void 0},rules:{id:[{required:!0,message:"ID不能为空",trigger:"blur"}]}}),{loading:h,isShowDialog:c,formData:d,rules:k}=P(l),w=p=>{S(),p&&N(p.id).then(o=>{const s=o.data;s.type=""+s.type,s.active=!!s.active,l.formData=s}),l.isShowDialog=!0},f=()=>{l.isShowDialog=!1};b({openDialog:w});const x=()=>{f()},B=()=>{const p=e(g);p&&p.validate(o=>{o&&(l.loading=!0,!l.formData.id||l.formData.id===0?q(l.formData).then(()=>{V.success("添加成功"),f(),_("asRedeemCodeList")}).finally(()=>{l.loading=!1}):H(l.formData).then(()=>{V.success("修改成功"),f(),_("asRedeemCodeList")}).finally(()=>{l.loading=!1}))})},S=()=>{l.formData={id:void 0,code:void 0,udid:void 0,type:"",active:!1,activeAt:void 0,createdBy:void 0,updatedBy:void 0,createdAt:void 0,updatedAt:void 0,deletedAt:void 0}};return(p,o)=>{const s=r("el-input"),m=r("el-form-item"),U=r("el-radio"),E=r("el-radio-group"),L=r("el-switch"),M=r("el-date-picker"),O=r("el-form"),y=r("el-button"),Y=r("el-dialog"),F=Z("drag");return n(),v("div",X,[a(Y,{modelValue:e(c),"onUpdate:modelValue":o[5]||(o[5]=t=>W(c)?c.value=t:null),width:"800px","close-on-click-modal":!1,"destroy-on-close":!0},{header:i(()=>[j((n(),v("div",null,[u(D((!e(d).id||e(d).id==0?"添加":"修改")+"卡密管理"),1)])),[[F,[".appsource-asRedeemCode-edit .el-dialog",".appsource-asRedeemCode-edit .el-dialog__header"]]])]),footer:i(()=>[z("div",$,[a(y,{type:"primary",onClick:B,disabled:e(h)},{default:i(()=>[u("确 定")]),_:1},8,["disabled"]),a(y,{onClick:x},{default:i(()=>[u("取 消")]),_:1})])]),default:i(()=>[a(O,{ref_key:"formRef",ref:g,model:e(d),rules:e(k),"label-width":"120px"},{default:i(()=>[a(m,{label:"兑换码",prop:"code"},{default:i(()=>[a(s,{modelValue:e(d).code,"onUpdate:modelValue":o[0]||(o[0]=t=>e(d).code=t),placeholder:"请输入兑换码"},null,8,["modelValue"])]),_:1}),a(m,{label:"设备码",prop:"udid"},{default:i(()=>[a(s,{modelValue:e(d).udid,"onUpdate:modelValue":o[1]||(o[1]=t=>e(d).udid=t),placeholder:"请输入设备码"},null,8,["modelValue"])]),_:1}),a(m,{label:"类型",prop:"type"},{default:i(()=>[a(E,{modelValue:e(d).type,"onUpdate:modelValue":o[2]||(o[2]=t=>e(d).type=t)},{default:i(()=>[(n(!0),v(G,null,J(C.typeOptions,t=>(n(),K(U,{key:t.value,value:t.value},{default:i(()=>[u(D(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),a(m,{label:"是否激活",prop:"active"},{default:i(()=>[a(L,{modelValue:e(d).active,"onUpdate:modelValue":o[3]||(o[3]=t=>e(d).active=t),class:"ml-2"},null,8,["modelValue"])]),_:1}),a(m,{label:"激活时间",prop:"activeAt"},{default:i(()=>[a(M,{clearable:"",style:{width:"200px"},modelValue:e(d).activeAt,"onUpdate:modelValue":o[4]||(o[4]=t=>e(d).activeAt=t),type:"datetime","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"选择激活时间"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),Ze=Q(ee,[["__scopeId","data-v-ca060bd8"]]);export{Ze as default};
